<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Cory Whitney, Eike Luedeling et al." />


<meta name="progressive" content="false" />
<meta name="allow-skip" content="false" />
<meta name="learnr-version-prerender" content="0.11.5" />

<title>Decision Analysis and Forecasting for Agricultural Development </title>

<!-- header-includes START -->
<!-- HEAD_CONTENT -->
<!-- header-includes END -->
<!-- HEAD_CONTENT -->

<!-- highlightjs -->
<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>


<!-- taken from https://github.com/rstudio/rmarkdown/blob/de8a9c38618903627ca509f5401d50a0876079f7/inst/rmd/h/default.html#L293-L343 -->
<!-- tabsets -->
<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>
<!-- end tabsets -->


</head>

<body>
<a class='sr-only sr-only-focusable visually-hidden-focusable' href='#learnr-tutorial-content'>Skip to Tutorial Content</a>



<div class="pageContent band">
<main class="bandContent page">

<article class="topics" id="learnr-tutorial-content">

<p><img src="images/decisionSupport_hex_sticker.png"
style="width:1in" /></p>
<!-- List of Lecture RMD files to be compiled -->
<div id="section-introduction" class="section level2">
<h2>Lecture 1: Introduction</h2>
<!-- use the {#introduction} syntax to create a label that can be referenced with [Introduction](#introduction) -->
<p><img src="images/INRES_Logo.png" style="width:1in" /> <img
src="images/Uni_Bonn_Picture.png" style="width:2.5in" /> <img
src="images/decisionSupport_hex_sticker.png" style="width:1in" /></p>
<p>Welcome to <strong>Decision Analysis and Forecasting for Agricultural
Development</strong>. We are excited to deliver you this course content
and to train a new generation of experts in applying these tools. We see
enormous scope for application of these methods in agriculture and the
need for more practitioners. The course has a <a
href="https://agtools.app/decision_analysis/">dedicated interactive
website</a> but if you prefer you can also look at the <a
href="http://htmlpreview.github.io/?https://github.com/CWWhitney/Decision_Analysis_Course/blob/main/Index.html">simple
html version</a>.</p>
<p>Decisions in agriculture are often risky, meaning that decision
makers have uncertainty about how their decision will influence the
intended outcomes. Farming systems are dynamic and the impact of any
intervention, policy or management decision is likely to be influenced
by many factors ranging from soil and crop dynamics to social dynamics
such as farmer and community perceptions. In order to provide scientific
support for decision making it is important that our models and
forecasts attempt to include these interactions. Decision Analysis
provides a set of approaches that are aimed at capturing what is known
and applying this knowledge to generate forecasts of decision outcomes.
The theoretical body of approaches have been formally applied in
business and economics for more than 50 years <span
class="citation">Howard and Abbas (2015)</span> and have been gaining
ground in agricultural development research more recently <span
class="citation">Luedeling and Shepherd (2016)</span>. Our mission is to
normalize these holistic approaches and move agricultural science from
the lab bench and field trials to real world application and decision
support for farmers and agricultural decision makers such as those in
government ministries and aid organizations.</p>
<p><strong>A student is not a vessel to be filled, but a lamp to be
lighted…</strong> - Plutarch</p>
<ul>
<li><p><strong>What?</strong> This is an experiential course. You
(participants) will be leading discussions and projects.</p></li>
<li><p><strong>So What?</strong> The aim is for you to become a critical
thinker and lead the process in generating useful forecasts for decision
makers in agricultural development.</p></li>
<li><p><strong>Now What?</strong> You will build a working model of an
agricultural development decision.</p></li>
</ul>
<p>Here is a course overview:</p>
<p><img src="images/DA-Overview.png" style="width:9in" /></p>
</div>
<div id="section-course-content" class="section level2">
<h2>Course content</h2>
<p>In this course, we will provide an overview of methods we can use to
study agricultural development decisions and generate forecasts of
decision outcomes. If you do not have a clear idea what that is you’ve
come to the right place. This course was developed for MSc. students in
<a href="https://www.lf.uni-bonn.de/en/studying/master/npw">Crop
Sciences</a> at the <a
href="https://www.uni-bonn.de/startpage?set_language=en">University of
Bonn</a>, but the materials are also intended for a general audience
interested in applying these tools. The main parts of the course
include:</p>
<ul>
<li><a href="#section-decision_analysis">Introduction to Decision
Analysis</a></li>
<li><a href="#section-calibration_lecture">Calibration training</a></li>
<li><a href="#section-participatory_methods">Participatory modeling
building</a></li>
<li><a href="#section-model_programming">Decision modeling in R</a></li>
<li>Group project on decision analysis</li>
</ul>
<p>See the official pages in the coursebook here <a
href="https://www.lf.uni-bonn.de/en/studying/downloads/coursebook2020/module-msc-npw2020"><strong>Decision
Analysis and Forecasting for Agricultural Development</strong></a>.</p>
<p>After some introduction of the subject matter much of this course
will consist of practical application of the <a
href="https://cran.r-project.org/web/packages/decisionSupport/index.html"><code>decisionSupport</code></a>
package in the <a href="https://www.r-project.org/">R</a> programming
language <span class="citation">(R Core Team 2024)</span>.</p>
<div id="section-intended-learning-outcomes" class="section level3">
<h3>Intended learning outcomes</h3>
<p>In this course, we aim to provide you with the skills and experiences
in decision modeling. By the end of this course you will be able to:</p>
<ul>
<li><p>develop decision models and comprehensively evaluate the findings
using the <code>R</code> programming language with functions from the
<code>decisionSupport</code> package <span class="citation">(Luedeling
et al. 2024)</span>.</p></li>
<li><p>recognize your own biases and provide accurate range estimates
for uncertain variables.</p></li>
<li><p>analyze a decision context. You will be able to draw conclusions
from a decision model and recommend steps forward.</p></li>
<li><p>develop decision models, comprehensively evaluate your findings
and compose a report about the model you developed.</p></li>
</ul>
</div>
</div>
<div id="section-performance-assessment" class="section level2">
<h2>Performance assessment</h2>
<p>In this module, there will be no exam, but you’ll still have to put
in a bit of effort to pass and get a good grade here. Over the course of
the semester, you’ll be developing an <a
href="https://rmarkdown.rstudio.com/">Rmarkdown</a> document, where
you’ll record your learning and your coding work (<a
href="http://inresgb-lehre.iaas.uni-bonn.de/Methodology_outline.html">here
is an example from Hoa Do with an overview that includes the main
modeling procedures with the decisionSupport package in R</a>) <span
class="citation">(Luedeling et al. 2024)</span>. This document will
contain short thematic chapters on the lecture contents, as well as the
code you’ll produce and the outputs you’ll generate. The final chapters
will contain some discussion of the results you’ll have obtained. This
document will be evaluated, and it will be the major determinant of your
final grade (participation in class will also count for some of the
grade).</p>
<p>There will be about 60 hours of formal in-class time (15 ~ 4 hour <a
href="#section-lecture_schedule">lectures</a> and <a
href="#section-seminar_schedule">seminars</a>) and 120 hours of work
outside the class.</p>
<div id="section-what-we-expect-from-you" class="section level3">
<h3>What we expect from you</h3>
<p>Class participation will be about 50% of the work in this course. We
will expect you to show up in class and be an active participant in
discussions. We may also have short weekly tests for seeing how up to
speed you are and we will track your project activity (follow your <a
href="github.com">git</a> repositories etc.).</p>
<p>Group work will make up the rest of the required work for this
course. You will put together a report, build a repository with code and
a working RMarkdown file. You will also do weekly reading/listening
assignments and lead short related discussions.</p>
</div>
</div>
<div id="section-house-rules" class="section level2">
<h2>House rules</h2>
<p>In this course, we’ll gradually work our way into the
<code>decisionSupport</code> package <span class="citation">(Luedeling
et al. 2024)</span>. At the end of the semester, you should be able to
apply state-of-the-art Decision Analysis. Yet even if it’s not your
ambition to become a decision analyst, you’ll have picked up a bunch of
useful skills along the way. We’ll try to teach you how to use some
staple programming tools and techniques that can be used for all kinds
of programming challenges. These will include the use of git and <a
href="github.com">github</a> and <a href="rmarkdown.com">Rmarkdown</a>,
as well the the ability to create, manipulate and use R functions and
packages.</p>
<p>What is expected of you is to be engaged in this class, and to
diligently complete the assignments you receive. Learning things in R
requires practice, through which many things that seem cumbersome at
first eventually become almost automatic. We are hopeful that the things
you’ll get exposed to in this class will be assets in your scientific
(or other) career. So please take the materials seriously!</p>
<p>This course not only aims to teach you things about Decision Analysis
and related topics - it also provides hands-on exercises to illustrate
the functions of the <code>decisionSupport</code> package <span
class="citation">Luedeling et al. (2024)</span>. For all of these
practical components, we need tools. <code>decisionSupport</code> is an
R package, so we’ll need <a href="https://www.r-project.org/">R</a>,
which is most comfortably operated through the <a
href="https://rstudio.com/">RStudio</a> interface.</p>
<p>We could simply start running <a
href="https://rstudio.com/">RStudio</a> on our local computer, save our
files somewhere on our hard drive and generally operate the way we
usually work with our computer. But this is not how real programmers
work, and since this is what we’re trying to be, we should familiarize
ourselves with some code development tools that such people use. We’ll
therefore introduce you to <a href="https://git-scm.com/">git</a> and <a
href="https://github.com/">github</a>, which are very useful for keeping
code organized and secure and for sharing with collaborators and wider
audiences.</p>
<p>Finally, we want to show you how to properly document what you do in
R, and how to compile professional-looking reports of your work. This is
what <a href="https://rmarkdown.rstudio.com/">Rmarkdown</a> helps us do.
Some of this may be a bit confusing in the beginning, but you’ll
probably learn to appreciate the value of these tools, as we keep using
them in this module.</p>
</div>
<div id="section-group-work" class="section level2">
<h2>Group Work</h2>
<p>The course will be largely based on group work. Please take some time
to choose a group to work with and begin to think about a decision. Over
the next few weeks you will be responsible for the following
milestones:</p>
<ul>
<li><p>Identify a decision</p></li>
<li><p>Collaborate with decision makers on decision model development
(qualitative)</p></li>
<li><p>Generate model code from qualitative model and parameterize
(quantitative step)</p></li>
<li><p>Generate a git repo with code and documentation</p></li>
<li><p>Write a ~ 5,000 word paper in RMarkdown, see this report on <a
href="http://htmlpreview.github.io/?https://github.com/hortibonn/Plotting-High-Dimensional-Data/blob/master/HighDimensionalData.html">plotting
high-dimensional data</a> for a useful example of how this can be
done.</p></li>
</ul>
<p>In addition, each week small teams (groups of two or three) will be
responsible for presenting and leading a discussion on a short paper or
chapter. We expect everyone in the course to read the work and come
prepared for the meeting. Please contact us if you cannot find the
readings in the library or elsewhere. We will help you get a copy.</p>
<div id="section-bonus-video-from-sir-ken-robinson"
class="section level3">
<h3>Bonus video from Sir Ken Robinson</h3>
<p>Bonus: to get more background on the teaching methods that inspire
this course watch <a
href="https://www.ted.com/talks/sir_ken_robinson_do_schools_kill_creativity">Sir
Ken Robinson’s talk on Ted.com</a>. If you like it you might enjoy
reading his book ‘Out of Our Minds’ <span class="citation">(Robinson
2017)</span>.</p>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-ken-robinson" class="tutorial-question panel-body">
<div id="question-ken-robinson-answer_container" class="shiny-html-output"></div>
<div id="question-ken-robinson-message_container" class="shiny-html-output"></div>
<div id="question-ken-robinson-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<!-- ```{r child="Tools_Experiential.Rmd"} -->
<!-- ``` -->
</div>
</div>
<div id="section-lecture_schedule" class="section level2">
<h2>Lecture schedule</h2>
<table>
<colgroup>
<col width="5%" />
<col width="17%" />
<col width="22%" />
<col width="53%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">Lecture</th>
<th align="left">Date</th>
<th align="left">Materials</th>
<th align="left">Reading</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Wednesday, April 10, 2024</td>
<td align="left"><a href="#section-introduction">Introduction</a></td>
<td align="left">Watch: Sir Ken Robinson / Hans Rosling (optional)</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Friday, April 12, 2024</td>
<td align="left"><a href="#section-decision_analysis">Decision Analysis
Overview</a></td>
<td align="left"><span class="citation">Hubbard (2014)</span> (Chapter
1. The Challenge of Intangibles)</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Wednesday, April 17, 2024</td>
<td align="left"><a href="#section-define_decision">Defining a
Decision</a></td>
<td align="left"><span class="citation">Howard and Abbas (2015)</span>
(Chapter 1. Introduction to Quality Decision Making)</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">Friday, April 19, 2024</td>
<td align="left"><a href="#section-case_studies">Decision Analysis Case
Studies</a></td>
<td align="left"><span class="citation">Shepherd et al.
(2015)</span></td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">Wednesday, April 24, 2024</td>
<td align="left"><a href="#section-participatory_methods">Participatory
Methods</a></td>
<td align="left"><span class="citation">Luedeling and Shepherd
(2016)</span></td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">Friday, April 26, 2024</td>
<td align="left"><a href="#section-decision_models">Building Decision
Models</a></td>
<td align="left"><span class="citation">Do, Luedeling, and Whitney
(2020)</span></td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="left">Friday, May 3, 2024</td>
<td align="left"><a href="#section-forecasts">Using Models to Create
Forecasts</a></td>
<td align="left"><span class="citation">Tetlock and Gardner
(2015)</span> (Chapter 1. An Optimistic Skeptic)</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="left">Wednesday, May 8, 2024</td>
<td align="left"><a href="#section-bayes">Bayesian Thinking</a></td>
<td align="left"><span class="citation">Bertsch McGrayne (2011)</span>
(Chapter 1. Causes in the Air)</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="left">Friday, May 10, 2024</td>
<td align="left"><a href="#section-calibration_lecture">Calibrating
experts</a></td>
<td align="left"><span class="citation">Kahneman and Egan (2011)</span>
(Chapter 1)</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="left">Friday, May 17, 2024</td>
<td align="left"><a href="#section-analyst_profile">Profile of a
Decision Analyst</a></td>
<td align="left"><span class="citation">Savage and Markowitz
(2009)</span> (Chapter 1)</td>
</tr>
</tbody>
</table>
</div>
<div id="section-seminar_schedule" class="section level2">
<h2>Seminar schedule</h2>
<table>
<colgroup>
<col width="4%" />
<col width="24%" />
<col width="35%" />
<col width="34%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">Week</th>
<th align="left">Date</th>
<th align="left">Materials</th>
<th align="left">Assignment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Wednesday, May 28, 2024</td>
<td align="left"><a href="#section-r_rstudio">Using R and
RStudio</a></td>
<td align="left">Install R and Rstudio</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Friday, May 31, 2024</td>
<td align="left"><a href="#section-rstudio_continued">Using R and
RStudio continued</a></td>
<td align="left">Share R scripts (part 1)</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Wednesday, June 5, 2024</td>
<td align="left"><a href="#section-tools">Group Work Overview</a></td>
<td align="left">Share R scripts (part 2)</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">Friday, June 7, 2024</td>
<td align="left"><a href="#section-rmarkdown">Using RMarkdown</a></td>
<td align="left">Share Rmarkdown file</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">Wednesday, June 12, 2024</td>
<td align="left"><a href="#section-github_git">Using git and
Github</a></td>
<td align="left">Start a Github repo</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">Friday, June 14, 2024</td>
<td align="left"><a href="#section-model_programming">Model
Programming</a></td>
<td align="left">Share R scripts (part 3)</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="left">Wednesday, June 19, 2024</td>
<td align="left"><a href="#section-calibration_seminar">Calibration
training</a></td>
<td align="left">Participate in calibration training</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="left">Friday, June 21, 2024</td>
<td align="left"><a href="#section-model_functions">Model
functions</a></td>
<td align="left">Share updated model</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="left">Wednesday, June 26, 2024</td>
<td align="left"><a href="#section-model_share_seminar">Value of
information</a></td>
<td align="left">Share R scripts (part 3)</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="left">Friday, June 28, 2024</td>
<td align="left"><a href="#section-communicating">Communicating Decision
Support</a></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="left">Wednesday, July 03, 2024</td>
<td align="left"><a href="#section-forecast_seminar">Model
forecasts</a></td>
<td align="left">Share initial forecasts</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="left">Friday, July 5, 2024</td>
<td align="left"><a href="#section-citations">Citation
Management</a></td>
<td align="left">Join Zotero Group</td>
</tr>
<tr class="odd">
<td align="right">13</td>
<td align="left">Wednesday, July 10, 2024</td>
<td align="left">Guest Lecture</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">14</td>
<td align="left">Friday, July 12, 2024</td>
<td align="left">Consultation</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">15</td>
<td align="left">Wednesday, July 17, 2024</td>
<td align="left">Groups present / discuss final model</td>
<td align="left">Present</td>
</tr>
<tr class="even">
<td align="right">16</td>
<td align="left">Friday, July 19, 2024</td>
<td align="left">Presentations continued</td>
<td align="left">Present</td>
</tr>
</tbody>
</table>
</div>
<div id="section-decision_analysis" class="section level2">
<h2>Lecture 2: Decision Analysis Overview</h2>
<!-- reference with [Decision Analysis](#decision_analysis) -->
<p><em>“Everything is vague to a degree you do not realize till you have
tried to make it precise.”</em></p>
<p>― <span class="citation">Whitehead and Russell (2011)</span></p>
<p><img src="images/INRES_Logo.png" style="width:1in" /> <img
src="images/Uni_Bonn_Picture.png" style="width:2in" /> <img
src="images/decisionSupport_hex_sticker.png" style="width:1in" /></p>
<p>Welcome to lecture 2 of <strong>Decision Analysis and Forecasting for
Agricultural Development</strong>. In this lecture we will follow a <a
href="https://www.youtube.com/playlist?list=PLe1C9W5AtEiBzmXFf-XzmXH8NNJjqs0IY">six-part
micro-series of videos</a> and use the <code>#lecture-02-overview</code>
Slack channel and Zoom meeting to follow up. This will allow us all to
have a chance to see your progress, provide feedback. It will be
encouraging to others to see activity from colleagues. Feel free to
bring up any questions or concerns in the Slack or to <a
href="mailto:cory.whitney@uni-bonn.de?subject=%5BSeminar_2%5D%20Decision%20Analysis%20Lecture">Dr. Cory
Whitney</a> or the course tutor.</p>
<p>Please take a few minutes to watch these six short videos and do the
associated exercises. The slides will be shared in the respective Slack
channels.</p>
<div id="section-introduction-1" class="section level3">
<h3>Introduction</h3>
<p>The introduction outlines the general theory and application of
Decision Analysis tools. <strong>At the end of the video please take a
moment to think about decisions that are made in agricultural
development</strong>, ideally decisions that are relevant to your
research interests. Please share these with us in the Slack channel.</p>
<p><strong>Remember to take a moment to gather your thoughts so far and
share with us in Slack. </strong></p>
<!-- ![](https://youtu.be/7P2YI9-smfU) -->
<iframe width="560" height="315" src="https://www.youtube.com/embed/7P2YI9-smfU" frameborder="0" allowfullscreen>
</iframe>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-1" class="tutorial-question panel-body">
<div id="question-1-answer_container" class="shiny-html-output"></div>
<div id="question-1-message_container" class="shiny-html-output"></div>
<div id="question-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-2" class="tutorial-question panel-body">
<div id="question-2-answer_container" class="shiny-html-output"></div>
<div id="question-2-message_container" class="shiny-html-output"></div>
<div id="question-2-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-3" class="tutorial-question panel-body">
<div id="question-3-answer_container" class="shiny-html-output"></div>
<div id="question-3-message_container" class="shiny-html-output"></div>
<div id="question-3-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
<div id="section-part-1-approaches" class="section level3">
<h3>Part 1: Approaches</h3>
<p>Part 1 gives an overview of various approaches in agricultural
research and of the Decision Analysis paradigm. At the end of the video
please take a moment to think about a situation where Decision Analysis
might be applicable. Try and identify a decision maker with a choice
between different options and with uncertainty about the outcome.</p>
<p><strong>Remember to share a specific risky decision that might be
supported with these tools. Share your ideas with us in
Slack.</strong></p>
<!-- ![](https://youtu.be/IRZZokPD3GU) -->
<iframe width="560" height="315" src="https://www.youtube.com/embed/IRZZokPD3GU" frameborder="0" allowfullscreen>
</iframe>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-DA-approaches_define" class="tutorial-question panel-body">
<div id="question-DA-approaches_define-answer_container" class="shiny-html-output"></div>
<div id="question-DA-approaches_define-message_container" class="shiny-html-output"></div>
<div id="question-DA-approaches_define-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-DA-approaches_impact-pathway" class="tutorial-question panel-body">
<div id="question-DA-approaches_impact-pathway-answer_container" class="shiny-html-output"></div>
<div id="question-DA-approaches_impact-pathway-message_container" class="shiny-html-output"></div>
<div id="question-DA-approaches_impact-pathway-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-DA-approaches_trans-research" class="tutorial-question panel-body">
<div id="question-DA-approaches_trans-research-answer_container" class="shiny-html-output"></div>
<div id="question-DA-approaches_trans-research-message_container" class="shiny-html-output"></div>
<div id="question-DA-approaches_trans-research-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
<div id="section-part-2-decision-analysis" class="section level3">
<h3>Part 2: Decision Analysis</h3>
<p>Part 2 offers some background on the theory and development of
Decision Analysis and how we apply it in agricultural decisions.</p>
<p>At the end of the video please take some time to think about a
practical application of the kinds of approaches to dealing with
uncertainty that are used in Decision Analysis. Describe a few variables
that you consider difficult to measure but for which the effects on a
decision might be possible to describe as uncertainty distributions.
Share with us in Slack.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/UvLiq85W398" frameborder="0" allowfullscreen>
</iframe>
</div>
<div id="section-part-3-model-building" class="section level3">
<h3>Part 3: Model Building</h3>
<p>Part 3 gives an overview of model building processes and
approaches.</p>
<p><strong>At the end of this video take some time to draw a decision
impact pathway.</strong> Draw a conceptual diagram of an agricultural
development decision. Include the major factors that would influence the
decision, no matter how difficult they might be to measure. Feel free to
use any program you like to make this drawing. <a
href="https://ncase.me/loopy/">Loopy</a> is a very nice interface. <a
href="https://www.google.com/slides/about/">Google Slides</a>, <a
href="https://app.biorender.com/biorender-templates">Biorender</a> are
also good options. For the more advance R users you might like the <a
href="https://igraph.org/r/">igraph library</a>. For those who prefer
analog, a photo or scan of a hand drawn diagram is also welcome. Be sure
to save your work and share it with us in Slack, a screen shot is fine,
a working link is even better.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/fikoVbnoNOQ" frameborder="0" allowfullscreen>
</iframe>
</div>
<div id="section-part-4-overcoming-bias" class="section level3">
<h3>Part 4: Overcoming Bias</h3>
<p>Part 4 gives an overview of various types of cognitive biases and
outlines how these can interfere with the definition of and
parameterization of models. The session ends with a number of approaches
that can be applied to help in overcoming these biases and outlines the
calibration training process whereby experts are trained to give
accurate estimates of their own uncertainty.</p>
<p><strong>At the end of the video please take some time to consider the
variables in your conceptual diagram that might benefit from calibrated
estimates.</strong> Describe variables in your model that might be
difficult to measure but the effects of which might be possible to
describe with calibrated-expert derived uncertainty distributions.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/dlUz5XT-u98" frameborder="0" allowfullscreen>
</iframe>
</div>
<div id="section-parts-5-and-6-case-studies-conclusions"
class="section level3">
<h3>Parts 5 and 6: Case Studies, Conclusions</h3>
<p>Parts 5 and 6 offer some brief Decision Analysis case studies and
conclusions. At the end of the video please take some time to revisit
your model and consider these approaches in practice. Feel free to
discuss in Slack about what application these approaches might have with
regard to your research.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_Yq4E85a7xM" frameborder="0" allowfullscreen>
</iframe>
</div>
<div id="section-group-discussion-reading" class="section level3">
<h3>Group discussion reading:</h3>
<p>This week you will all read <span class="citation">Hubbard
(2014)</span> (Chapter 1, pp 1-14). The first group will lead a
discussion on the reading.</p>
<ul>
<li>Hubbard, Douglas W. How To Measure Anything: Finding the Value of
Intangibles in Business. 2nd ed. Vol. Second Edition. Hoboken, New
Jersey: John Wiley &amp; Sons, 2014. <em>Part 1:The measurement solution
exists</em></li>
</ul>
<!-- ## Further reading -->
<!-- -  Overview of DA (Hubbard, Shepherd, Howard) -->
<!-- -  Brief examples (Vietnam…, Uganda, Calluna…) -->
<!-- -  Hubbard (selected chapters from ‘How to Measure Anything’) -->
<!-- -  Howard (selected chapters from ‘Decision Analysis’ and recorded talks) -->
</div>
<div id="section-bonus-video-by-professor-karl-claxton"
class="section level3">
<h3>Bonus video by Professor Karl Claxton</h3>
<p>Bonus: to get an economist’s perspective on the Decision Analysis
approaches watch ‘<a
href="https://www.youtube.com/watch?v=f1E3Iv8juC0">Lessons from applying
decision science in the public health sector</a>’ by Professor Karl
Claxton in the Constructing a Digital Environment Webinar Series. The
talk gets really interesting at around eight minutes in.</p>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-karl-claxton" class="tutorial-question panel-body">
<div id="question-karl-claxton-answer_container" class="shiny-html-output"></div>
<div id="question-karl-claxton-message_container" class="shiny-html-output"></div>
<div id="question-karl-claxton-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
</div>
<div id="section-define_decision" class="section level2">
<h2>Lecture 3: Defining a Decision</h2>
<!-- use the {#define_decision} syntax to create a label that can be referenced with [Define decision](#define_decision) -->
<p><img src="images/INRES_Logo.png" style="width:1in" /> <img
src="images/Uni_Bonn_Picture.png" style="width:3in" /> <img
src="images/decisionSupport_hex_sticker.png" style="width:1in" />
<!-- Neuman and Morgenstern etc. --></p>
<p>The following videos cover some of the challenges that researchers
and agricultural development experts face when attempting to define
decisions. Please watch the videos and answer the questions that
follow.</p>
<div id="section-defining-decisions-part-1" class="section level3">
<h3>Defining Decisions Part 1</h3>
<!-- ![](https://youtu.be/pPIs7MwgMe0) -->
<iframe width="560" height="315" src="https://www.youtube.com/embed/pPIs7MwgMe0" frameborder="0" allowfullscreen>
</iframe>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-define-decision-part-01-01" class="tutorial-question panel-body">
<div id="question-define-decision-part-01-01-answer_container" class="shiny-html-output"></div>
<div id="question-define-decision-part-01-01-message_container" class="shiny-html-output"></div>
<div id="question-define-decision-part-01-01-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-define-decision-part-01-02" class="tutorial-question panel-body">
<div id="question-define-decision-part-01-02-answer_container" class="shiny-html-output"></div>
<div id="question-define-decision-part-01-02-message_container" class="shiny-html-output"></div>
<div id="question-define-decision-part-01-02-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
<div id="section-defining-decisions-part-2" class="section level3">
<h3>Defining Decisions Part 2</h3>
<!-- ![](https://youtu.be/4vlwELJwHYg) -->
<iframe width="560" height="315" src="https://www.youtube.com/embed/4vlwELJwHYg" frameborder="0" allowfullscreen>
</iframe>
<p>Think about the following questions and jot down your thoughts.</p>
<ul>
<li><strong>Does decision analysis make sense without involving a
decision-maker?</strong></li>
<li><strong>What can this achieve, and what shouldn’t we expect from
it?</strong></li>
</ul>
</div>
<div id="section-defining-decisions-part-3" class="section level3">
<h3>Defining Decisions Part 3</h3>
<!-- ![](https://youtu.be/5ZTd73gcL-0) -->
<iframe width="560" height="315" src="https://www.youtube.com/embed/5ZTd73gcL-0" frameborder="0" allowfullscreen>
</iframe>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-define-decision-part-03-01" class="tutorial-question panel-body">
<div id="question-define-decision-part-03-01-answer_container" class="shiny-html-output"></div>
<div id="question-define-decision-part-03-01-message_container" class="shiny-html-output"></div>
<div id="question-define-decision-part-03-01-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-define-decision-part-03-02" class="tutorial-question panel-body">
<div id="question-define-decision-part-03-02-answer_container" class="shiny-html-output"></div>
<div id="question-define-decision-part-03-02-message_container" class="shiny-html-output"></div>
<div id="question-define-decision-part-03-02-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-define-decision-part-03-03" class="tutorial-question panel-body">
<div id="question-define-decision-part-03-03-answer_container" class="shiny-html-output"></div>
<div id="question-define-decision-part-03-03-message_container" class="shiny-html-output"></div>
<div id="question-define-decision-part-03-03-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<p>Think of challenges you may encounter when trying to do
<em>credible</em>, <em>salient</em> and <em>legitimate</em> research
(all of which decision analysts should aim to achieve).</p>
</div>
<div id="section-quality-decision-making" class="section level3">
<h3>Quality Decision Making</h3>
<p>This video outlines the background for quality decision making,
closely following <span class="citation">Howard and Abbas (2015)</span>.
At the end of the video please take some time to sketch out some
thoughts about a decision that you will be working on for the
experiential part of this course. You can find the slides for the first
three parts of the lecture here.</p>
<ul>
<li><strong>Define the decision-maker</strong>: The person, organization
or group that will be faced with choices.</li>
<li><strong>Define the decision choice and alternatives</strong>: from
which to choose</li>
<li><strong>Define the preferences</strong>: clarify how the
decision-makers consider the different possible consequences and
outcomes of the decision. These can take many forms, i.e. they can be
personal, societal or cultural values.</li>
<li><strong>Define the sources of Information</strong>: What sources of
information will you access to gather a causal understanding of the
decision impact pathway. Be explicit about where you will reach out,
i.e. specific farmers, literature etc.</li>
</ul>
<!-- ![](https://youtu.be/r_BbXfMbfe0) -->
<iframe width="560" height="315" src="https://www.youtube.com/embed/r_BbXfMbfe0" frameborder="0" allowfullscreen>
</iframe>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-quality-decision" class="tutorial-question panel-body">
<div id="question-quality-decision-answer_container" class="shiny-html-output"></div>
<div id="question-quality-decision-message_container" class="shiny-html-output"></div>
<div id="question-quality-decision-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
<div id="section-group-discussion-reading-1" class="section level3">
<h3>Group discussion reading:</h3>
<p>This week you will all read <span class="citation">Howard and Abbas
(2015)</span> (Chapter 1. Introduction to Quality Decision Making). One
group will lead a discussion on the reading.</p>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-howard" class="tutorial-question panel-body">
<div id="question-howard-answer_container" class="shiny-html-output"></div>
<div id="question-howard-message_container" class="shiny-html-output"></div>
<div id="question-howard-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
<div id="section-reading-for-this-lecture" class="section level3">
<h3>Reading for this lecture</h3>
<ul>
<li>Howard, Ronald A., and Ali E. Abbas. Foundations of Decision
Analysis. NY, NY: Prentice Hall, 2015.</li>
</ul>
<p>Bonus reading by <span class="citation">Shepherd et al.
(2015)</span>.</p>
<ul>
<li>Shepherd, Keith, Douglas Hubbard, Norman Fenton, Karl Claxton, Eike
Luedeling, and Jan de Leeuw. “Development Goals Should Enable
Decision-Making.” Nature 523, no. 7559 (2015): 152–54.</li>
</ul>
</div>
</div>
<div id="section-case_studies" class="section level2">
<h2>Lecture 4: Decision Analysis Case Studies</h2>
<!-- reference with [Decision Analysis Case Studies](#case_studies) -->
<p>Welcome to lecture 4 of <strong>Decision Analysis and Forecasting for
Agricultural Development</strong>. In this lecture we will follow three
case studies and use the <code>#lecture-04-case-studies</code> Slack
channel and Zoom meeting to follow up. This will allow us all to have a
chance to see your progress, provide feedback. As always, your
engagement and sharing is appreciated. It will be encouraging to others
to see activity from colleagues. Feel free to bring up any questions or
concerns in the Slack or to <a
href="mailto:cory.whitney@uni-bonn.de?subject=%5BSeminar_2%5D%20Decision%20Analysis%20Lecture">Dr. Cory
Whitney</a> or the course tutor.</p>
<p>Please take a few minutes to watch these short videos and do the
associated exercises before our meeting.</p>
<div id="section-introduction-2" class="section level3">
<h3>Introduction</h3>
<p>The following videos introduce some decision analysis case studies.
Please watch the videos and answer the questions that follow.</p>
</div>
<div id="section-decision-analysis-case---water-for-wajir"
class="section level3">
<h3>Decision analysis case - Water for Wajir</h3>
<p>The city of Wajir in Northern Kenya has lacks a reliable supply of
clean drinking water and sanitation. To improve the situation, plans are
being considered to construct a water pipeline from Habaswein over 100
km away <span class="citation">(Luedeling and Leeuw 2014; Luedeling et
al. 2015)</span>. Watch the following video to learn more.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/imQ1Gn-E7wQ" frameborder="0" allowfullscreen>
</iframe>
<p>Now try to answer the following questions:</p>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-1-Decision-analysis-case-Water-for-Wajir" class="tutorial-question panel-body">
<div id="question-1-Decision-analysis-case-Water-for-Wajir-answer_container" class="shiny-html-output"></div>
<div id="question-1-Decision-analysis-case-Water-for-Wajir-message_container" class="shiny-html-output"></div>
<div id="question-1-Decision-analysis-case-Water-for-Wajir-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-2-Decision-analysis-case-Water-for-Wajir" class="tutorial-question panel-body">
<div id="question-2-Decision-analysis-case-Water-for-Wajir-answer_container" class="shiny-html-output"></div>
<div id="question-2-Decision-analysis-case-Water-for-Wajir-message_container" class="shiny-html-output"></div>
<div id="question-2-Decision-analysis-case-Water-for-Wajir-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-3-Decision-analysis-case-Water-for-Wajir" class="tutorial-question panel-body">
<div id="question-3-Decision-analysis-case-Water-for-Wajir-answer_container" class="shiny-html-output"></div>
<div id="question-3-Decision-analysis-case-Water-for-Wajir-message_container" class="shiny-html-output"></div>
<div id="question-3-Decision-analysis-case-Water-for-Wajir-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
<div
id="section-case-study---plastic-covers-in-sweet-cherry-orchards-in-chile"
class="section level3">
<h3>Case study - Plastic covers in sweet cherry orchards in Chile</h3>
<p>This video shows the study <span class="citation">Rojas et al.
(2021)</span> conducted in Chile for assessing the profitability of
implementing plastic covers in sweet cherry orchards to protect the
fruits from hazardous weather events.</p>
<!-- ![]() syntax will also work but not in html -->
<iframe width="560" height="315" src="https://www.youtube.com/embed/kpsqzkeg53Y" frameborder="0" allowfullscreen>
</iframe>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-sweet_cherry-1" class="tutorial-question panel-body">
<div id="question-sweet_cherry-1-answer_container" class="shiny-html-output"></div>
<div id="question-sweet_cherry-1-message_container" class="shiny-html-output"></div>
<div id="question-sweet_cherry-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<p>Based on the question above, think about and write down two to three
positive and negative implications of using the method we used to define
the decision.</p>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-sweet_cherry-2" class="tutorial-question panel-body">
<div id="question-sweet_cherry-2-answer_container" class="shiny-html-output"></div>
<div id="question-sweet_cherry-2-message_container" class="shiny-html-output"></div>
<div id="question-sweet_cherry-2-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="questio-sweet_cherry-3" class="tutorial-question panel-body">
<div id="questio-sweet_cherry-3-answer_container" class="shiny-html-output"></div>
<div id="questio-sweet_cherry-3-message_container" class="shiny-html-output"></div>
<div id="questio-sweet_cherry-3-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<p>The data and scripts for this study are also available online <span
class="citation">(Fernandez et al. 2021)</span>.</p>
</div>
<div id="section-group-discussion-reading-2" class="section level3">
<h3>Group discussion reading:</h3>
<ul>
<li>Luedeling, Eike, and Keith Shepherd. “<a
href="https://www.thesolutionsjournal.com/article/decision-focused-agricultural-research/">Decision-Focused
Agricultural Research</a>.” Solutions 7, no. 5 (2016): 46–54.</li>
</ul>
<!-- ### Bonus: Decision analysis case - Calluna production in NRW -->
<!-- Heather growers and other stakeholders in North Rhine-Westphalia, Germany are looking for sustainable options to manage disease outbreaks. @ruett_model-based_2020 worked with these farmers to model the impacts of changing disease management practices and to generate comprehensive forecasts of net returns. Watch the following video to learn more. -->
<!-- ![](https://www.youtube.com/watch?v=hvnhjrf1Ims) -->
<!-- <iframe width="560" height="315" src="https://www.youtube.com/embed/hvnhjrf1Ims" frameborder="0" allowfullscreen></iframe> -->
<!-- Think about the following questions and jot down your thoughts. -->
<!-- - **How would you develop an expert network for your decision analysis project?** -->
<!-- - **What do you expect from your expert network?** -->
<!-- [](https://www.youtube.com/watch?v=hvnhjrf1Ims) -->
<!-- ```{r Question1-Calluna, echo=FALSE} -->
<!-- question("What are the risks and uncertainties in Calluna production?", -->
<!-- answer("Bud-flowering mutation"), -->
<!-- answer("Water management", correct = TRUE), -->
<!-- answer("Fungal infections", correct = TRUE), -->
<!-- answer("Fertilizer management", correct = TRUE), -->
<!-- answer("Customer demand"), -->
<!-- answer("Fungal resistance to pesticides", correct = TRUE), -->
<!--   incorrect = "Watch [the video](https://youtu.be/hvnhjrf1Ims) and try again.", -->
<!-- allow_retry = TRUE -->
<!-- ) -->
<!-- ``` -->
<!-- ```{r Question2-Calluna, echo=FALSE} -->
<!-- question("What steps did we use to apply decision analysis in Calluna production?", -->
<!-- answer("Developing impact models", correct = TRUE), -->
<!-- answer("Defining decisions together with experts using participatory workshops", correct = TRUE), -->
<!-- answer("Using precise numbers instead of ranges"), -->
<!-- answer("Calibration of experts", correct = TRUE), -->
<!-- answer("Involving the local government"), -->
<!-- answer("Using model simulations to calculate probability distributions, VIP scores and the EVPI", correct = TRUE), -->
<!--   incorrect = "Watch [the video](https://youtu.be/hvnhjrf1Ims) and try again.", -->
<!-- allow_retry = TRUE -->
<!-- ) -->
<!-- ``` -->
<!-- ```{r Question3-Calluna, echo=FALSE} -->
<!-- question("How can we overcome the tendency of experts to make mistakes when generating estimates and making judgements?", -->
<!-- answer("Confront the participants from your expert network with their biases", correct = TRUE), -->
<!-- answer("Teach techniques that allow your participants to give better estimations (Calibration training)", correct = TRUE), -->
<!-- answer("Apply techniques that allow both shy and confident participants to contribute to your decision analysis workshop", correct = TRUE), -->
<!-- answer("Involve as many professors as possible"), -->
<!-- answer("Experts in high job positions would do better estimations than Master students"), -->
<!-- answer("Apply techniques that allow you to focus more detailed on certain findings instead of focusing on the whole picture"), -->
<!-- answer("Use feedback from all participants to merge all models into a model that you can use as a template to program your code", correct = TRUE), -->
<!--   incorrect = "Watch [the video](https://youtu.be/hvnhjrf1Ims) and try again.", -->
<!-- allow_retry = TRUE -->
<!-- ) -->
<!-- ``` -->
<!-- The data and scripts for this study are available in this [zenodo repository]( http://doi.org/10.5281/zenodo.4637259) [@ruett_data_2021]. -->
</div>
</div>
<div id="section-participatory_methods" class="section level2">
<h2>Lecture 5: Participatory Methods For Qualitative Model
Development</h2>
<!-- [Participatory methods](#participatory_methods) -->
<div id="section-participatory-methods" class="section level3">
<h3>Participatory methods</h3>
<p>The following video outlines some of the tools that can be used in
participatory modeling. Watch the video and answer the questions that
follow.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/X2ZjG6o7u3o" frameborder="0" allowfullscreen>
</iframe>
<div class="panel panel-default tutorial-question-container">
<div data-label="participatory-methods-01" class="tutorial-question panel-body">
<div id="participatory-methods-01-answer_container" class="shiny-html-output"></div>
<div id="participatory-methods-01-message_container" class="shiny-html-output"></div>
<div id="participatory-methods-01-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<!-- Future question: Why might it be useful to think about 'the fox and the hedgehog' when hosting participatory model building workshops?" -->
</div>
<div id="section-stakeholder-management" class="section level3">
<h3>Stakeholder management</h3>
<p>The following video covers some definitions, methods and tools and a
case study related to stakeholder management in decision analysis.
Please watch the videos and answer the questions that follow. These will
be helpful in determining which tools/techniques you might use to
identify stakeholders in your decision analysis process.</p>
<!-- THis will also work, but not in html ![](https://youtu.be/Xax-JxlmQf0) -->
<!-- Note that the youtube link needs to begin with https://www.youtube.com/embed/ -->
<iframe width="560" height="315" src="https://www.youtube.com/embed/Xax-JxlmQf0" frameborder="0" allowfullscreen>
</iframe>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-stakeholder-management-01" class="tutorial-question panel-body">
<div id="question-stakeholder-management-01-answer_container" class="shiny-html-output"></div>
<div id="question-stakeholder-management-01-message_container" class="shiny-html-output"></div>
<div id="question-stakeholder-management-01-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-stakeholder-management-02" class="tutorial-question panel-body">
<div id="question-stakeholder-management-02-answer_container" class="shiny-html-output"></div>
<div id="question-stakeholder-management-02-message_container" class="shiny-html-output"></div>
<div id="question-stakeholder-management-02-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<!-- ### Bonus: Plot the stakeholder analysis in R -->
<!-- Plot stakeholders' experience, availability and expertise in decision analysis with the `ggplot2` `ggrepel` `ggthemes` libraries [@R-ggplot2; @R-ggrepel; @R-ggthemes]. Use the stakeholder data set from our git repository. To run this on your machine, save [this raw csv file](https://raw.githubusercontent.com/CWWhitney/Decision_Analysis_Course/main/data/stakeholder.csv) as `.csv` to your local `.RProj` directory. Then use `stakeholder<-read.csv("stakeholder.csv")` to load the data to your R environment and save it as `stakeholder`.  -->
<!-- ```{r stakeholder-management-01, exercise=TRUE} -->
<!-- ggplot(data = stakeholder, aes(x = Experience,  -->
<!--                                y = Availability,  -->
<!--                                label = stakeholders,  -->
<!--                                color = Expertise)) +  -->
<!--   geom_point(aes(shape=Gender)) + -->
<!--   xlab("Relevant Experience") + -->
<!--  #label names of stakeholders and expand space to show full names -->
<!--   scale_x_continuous(labels = paste(seq(0, 5, by = 1)),  -->
<!--                      breaks = seq(0, 5, by = 1),  -->
<!--                      limits = c(0, 5), -->
<!--                      expand = c(0, 1)) + -->
<!--   scale_y_continuous(labels = paste(seq(0, 5, by = 1)),  -->
<!--                      breaks = seq(0, 5, by = 1),  -->
<!--                      limits = c(0, 5), -->
<!--                      expand = c(0, 1)) + -->
<!--   theme(plot.margin = unit(c(1, 1, 1, 1), "cm")) + -->
<!--   theme(legend.position = "none") + -->
<!-- # Create line to categorize stakeholders -->
<!--   geom_hline(yintercept=2.5, color="white", size=2) + -->
<!--   geom_vline(xintercept=2.5, color="white", size=2) + -->
<!-- # Show all names of overlapped values -->
<!--   geom_text_repel(box.padding = 0.3, max.overlaps = Inf, size = 3) + -->
<!--   annotate("text", label = "Potential core experts", -->
<!--     x = 4.5, y = 3.2, size = 5, color = "grey48") + -->
<!--   annotate("text", label = "Resource persons", -->
<!--            x = 4.5, y = 0.25, size = 5, color = "grey48") -->
<!-- ``` -->
<!-- Learn more about using names and [overlapped values](https://ggrepel.slowkow.com/articles/examples.html). -->
</div>
<div id="section-group-discussion-reading-3" class="section level3">
<h3>Group discussion reading:</h3>
<p>Luu et al</p>
</div>
<div id="section-further-reading" class="section level3">
<h3>Further Reading</h3>
<ul>
<li><p><a href="http://www.liberatingstructures.com/">Liberating
Structures</a> by Keith McCandless (and others)</p></li>
<li><p>Reed, M. S. et al. (2009) ‘Who’s in and why? A typology of
stakeholder analysis methods for natural resource management’, Journal
of Environmental Management, 90(5), pp. 1933–1949. doi:
10.1016/j.jenvman.2009.01.001.</p></li>
</ul>
</div>
</div>
<div id="section-decision_models" class="section level2">
<h2>Lecture 6: Building Decision Models</h2>
<!-- reference with [Decision Models](#decision_models) -->
<p>Welcome to lecture 6 of <strong>Decision Analysis and Forecasting for
Agricultural Development</strong>. We will walk through brief examples
and offer the scripts. Feel free to bring up any questions or concerns
in the Slack, to <a
href="mailto:cory.whitney@uni-bonn.de?subject=%5BLecture_3%5D%20Decision%20Analysis%20Lecture">Dr. Cory
Whitney</a> or to the course tutor.</p>
<p>Decision-makers often wish to have a quantitative basis for their
decisions. However,‘hard data’ is often missing or unattainable for many
important variables, which can paralyze the decision-making processes or
lead decision-makers to conclude that large research efforts are needed
before a decision can be made. That is, many variables decision makers
must consider cannot be precisely quantified, at least not without
unreasonable effort. The major objective of (prescriptive) decision
analysis is to support decision-making processes faced with this
problem. Following the principles of Decision Analysis can allow us to
make forecasts of decision outcomes without precise numbers, as long as
probability distributions describing the possible values for all
variables can be estimated.</p>
<p>The <code>decisionSupport</code> package implements this as a Monte
Carlo simulation, which generates a large number of plausible system
outcomes, based on random numbers for each input variable that are drawn
from user-specified probability distributions. This approach is useful
for determining whether a clearly preferable course of action can be
delineated based on the present state of knowledge without the need for
further information. If the distribution of predicted system outcomes
does not imply a clearly preferable decision option, variables
identified as carrying decision-relevant uncertainty can then be
targeted by decision-supporting research. This approach is explained in
more detail below and in the <a href="#section-model_programming">model
programming seminar</a>.</p>
<p>In this portion of the course we hope to introduce you to the methods
and inspire you to follow a few important guidelines in the process of
model building. One of the key aspects of model building has to do with
making a solid business case for the model before programming.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/bViPWX8_G4A" frameborder="0" allowfullscreen>
</iframe>
<p>Another important guideline is to start simple then move on to other
steps. This ensures that you always have a working model at each of the
steps in the process, i.e. starting with a skateboard rather than a car
part as in this example from <a
href="https://twitter.com/metalab">MetaLab</a>.</p>
<div class="float">
<img src="images/Model_stages_car_analogy.png"
alt="‘Skateboard, Bike, Car’" />
<div class="figcaption">‘Skateboard, Bike, Car’</div>
</div>
<!-- ### Group discussion reading: -->
<!--  - @do_decision_2020 'Decision analysis of agroforestry options reveals adoption risks for resource-poor farmers'. -->
<div id="section-bonus-further-reading" class="section level3">
<h3>Bonus: Further reading</h3>
<ul>
<li><p><span class="citation">Whitney et al. (2018)</span>
‘Probabilistic decision tools for determining impacts of agricultural
development policy on household nutrition’.</p></li>
<li><p><span class="citation">Ruett, Whitney, and Luedeling
(2020)</span> ‘Model-based evaluation of management options in
ornamental plant nurseries’</p></li>
</ul>
</div>
</div>
<div id="section-forecasts" class="section level2">
<h2>Lecture 7: Using Models to Create Forecasts</h2>
<!-- reference with [Forecasts](#forecasts) -->
<p>Welcome to lecture 7 of <strong>Decision Analysis and Forecasting for
Agricultural Development</strong>. We will walk through brief examples
and offer the scripts. Feel free to bring up any questions or concerns
in the Slack or to <a
href="mailto:cory.whitney@uni-bonn.de?subject=%5BLecture_3%5D%20Decision%20Analysis%20Lecture">Dr. Cory
Whitney</a> or the course tutor.</p>
<div id="section-group-discussion-reading-4" class="section level3">
<h3>Group discussion reading:</h3>
<ul>
<li>Tetlock, Philip E., and Dan Gardner. Superforecasting: The Art and
Science of Prediction. New York, NY: Crown Publishers, 2015.(Chapter 1.
An Optimistic Skeptic)</li>
</ul>
</div>
</div>
<div id="section-practical" class="section level2">
<h2>Lecture 8: Bayesian Analysis Practical</h2>
<div id="section-confronting-expert-calibrated-models-with-data"
class="section level3">
<h3>Confronting expert calibrated models with data</h3>
<p>Welcome to the lecture on Bayesian modeling with me, <a
href="https://www.gartenbauwissenschaft.uni-bonn.de/author/dr.-katja-schiffers/">Dr. Katja
Schiffers</a>. Although we mainly implement these methods in our group
for decision analysis, we do not want to withhold the Bayesian Modeling
approaches from you. Originally, I prepared this introduction for a
seminar on the analysis of experimental data, so the focus is more on
comparing frequentist and Bayesian statistics than on decision models.
In this lecture we will use the <code>brms</code> package and use the
<code>#lecture_08_01_practical</code> Slack channel to follow up. This
will allow us all to have a chance to see your progress, provide
feedback. As always, your engagement and sharing is appreciated. It will
be encouraging to others to see activity from colleagues. Feel free to
bring up any questions or concerns in Slack or to <a
href="mailto:cory.whitney@uni-bonn.de?subject=%5BSeminar_2%5D%20Decision%20Analysis%20Lecture">Dr. Cory
Whitney</a> or the course tutor.</p>
<p>The following text heavily relies on a very well-written article <a
href="https://www.researchgate.net/profile/Ommo-Hueppop/publication/326111028_A_short_introduction_to_bayes_statistics_with_R_for_ornithologists/links/5b3db7a0aca272078511a8da/A-short-introduction-to-bayes-statistics-with-R-for-ornithologists.pdf">“Short
introduction to Bayesian statistics with R for ornithologists”</a>
(2016) by Fränzi Korner-Nievergelt &amp; Ommo Hüppop in ‘Die
Vogelwarte’. At the end of the lecture, you will know</p>
<ul>
<li>the principle of Bayesian statistics,</li>
<li>ways to apply it using the R package ‘bmrs’, and</li>
<li>the differences between frequentist and Bayesian statistics
regarding the interpretation of results.</li>
</ul>
<hr />
</div>
<div id="section-bayes-theorem" class="section level3">
<h3>Bayes’ theorem</h3>
<p>No introduction to Bayesian statistics is complete without Bayes’
theorem. Thomas Bayes was an English clergyman, philosopher, and
statistician who, in 1763 published a manuscript entitled “An essay
towards solving a problem in the doctrine of chances.” In this work, he
describes how, based on existing knowledge and additional observations
<strong>X</strong>, the probability can be calculated that a hypothesis
<strong>H</strong> is true:</p>
<p><span class="math display">\[P(H|X) = \frac
{P(X|H)×P(H)}{P(X)}\]</span></p>
<p>In words, the probability (P) that the hypothesis is true, given the
observed data (P(H|X), <strong>a-posteriori</strong> knowledge), is
equal to the probability of observing the data, assuming the hypothesis
is true (P(X|H), <strong>likelihood</strong>), times the prior
probability that the hypothesis is true before observing the data (P(H),
<strong>a-priori</strong> knowledge or <strong>prior</strong>), divided
by the probability of observing the data regardless of any assumptions
about the hypothesis (P(X), normalization constant).</p>
<p>It is important to note that hypotheses are expressed as parameter
values. For example, if our hypothesis is that the mean of a dependent
variable is greater under treatment A than under treatment B, we would
calculate the probability for the parameter mean(A) - mean(B) and obtain
the probability that it is greater than zero.</p>
</div>
<div id="section-the-principle-of-bayesian-statistics"
class="section level3">
<h3>The principle of Bayesian statistics</h3>
<p>In Bayesian statistics, this idea is used to combine prior knowledge
from experts/literature (P(H)) with the information contained in newly
collected data X to generate the updated a-posteriori knowledge. We also
see that as a result, we obtain the probability of our hypothesis. This
is much more digestible and closer to our “normal” way of thinking than
interpreting a p-value: <strong>“The probability of finding data as
extreme as this or more extreme, if the null hypothesis is
true.”</strong></p>
<p><strong>Excursion: Probability distributions</strong></p>
<p>To represent probabilities, such as prior knowledge, probability
distributions are used. In the following figure, you can see such a
probability distribution: the higher the density, the more likely the
parameter value plotted on the x-axis. The total area under the curve
always adds up to 1 (exactly some parameter value must always be
true).</p>
<div class="float">
<img src="images/probdensfunc.png"
alt="Source: https://flexbooks.ck12.org/cbook/ck-12-probability-and-statistics-concepts/section/7.5/primary/lesson/probability-density-function-pst/." />
<div class="figcaption">Source: <a
href="https://flexbooks.ck12.org/cbook/ck-12-probability-and-statistics-concepts/section/7.5/primary/lesson/probability-density-function-pst/"
class="uri">https://flexbooks.ck12.org/cbook/ck-12-probability-and-statistics-concepts/section/7.5/primary/lesson/probability-density-function-pst/</a>.</div>
</div>
<p>So how do we calculate this probability? Unfortunately, it’s usually
not as straightforward as it seems. While we can usually calculate the
likelihood (this is also done in frequentist statistics to determine the
parameter values of our models) and establish our a-priori knowledge
through a probability distribution, things get tricky with the P(X)
part, the probability of the data, at least once we no longer have very
simple models. To do this, we would have to integrate the probability of
the data over all possible parameter values, and this is often not
possible. Fortunately, this problem can be overcome with a simulation
technique developed in the 1980s and 1990s:</p>
<div id="section-mcmc---markov-chain-monte-carlo"
class="section level4">
<h4>MCMC - Markov Chain Monte Carlo</h4>
<p>MCMC methods can approximate probability distributions (in this case,
P(H|X)) that cannot be analytically computed. The most intuitive and
quite ingenious explanation I found for this is by Michael Franke on his
Github page at <a
href="https://michael-franke.github.io/intro-data-analysis/Ch-03-03-estimation-algorithms.html">https://michael-franke.github.io/intro-data-analysis/Ch-03-03-estimation-algorithms.html</a>.
Here are some parts of it:</p>
<div class="float">
<img src="images/apple_tree.jpg" style="width:50.0%"
alt="Image by brgfx on Freepik" />
<div class="figcaption">Image by brgfx on Freepik</div>
</div>
<p><strong>How the Apples Get to the Trees</strong></p>
<p>Every year in spring, Mother Nature sends out her children to
distribute apples on the apple trees. For each tree, the number of
apples should be proportional to the number of leaves: Giant Ralph with
twice as many leaves as Skinny Daniel should also have twice as many
apples in the end. So if there are a total of <span
class="math inline">\(n_a\)</span> apples, and <span
class="math inline">\(L(t)\)</span> is the number of leaves on tree
<span class="math inline">\(t\)</span>, each tree should receive <span
class="math inline">\(A(t)\)</span> apples.</p>
<p><span class="math display">\[A(t) = \frac {L(t)}{\sum
L(t&#39;)}n_a\]</span></p>
<p>The problem is that Mother Nature cannot calculate <span
class="math inline">\(\sum L(t&#39;)\)</span> (the normalization
constant), so she doesn’t know how many leaves all the trees have
together.</p>
<p>The children (Markov chains) can count, however. They can’t visit all
the trees and they can’t remember the numbers for very long, but they
can do it for two trees at a time. Here’s what they do: they each start
at a random tree (parameter value), already put an apple in it, count
the leaves <span class="math inline">\(L(t_1)\)</span> there and then
look for a nearby tree from which they can also count the leaves <span
class="math inline">\(L(t_2)\)</span> (the denominator of our
distribution). If the number of leaves in the second tree is higher,
they will definitely go there and put an apple in it. If it’s lower,
they will only go there with a probability of <span
class="math inline">\(L(t_2)/L(t_1)\)</span> and put an apple there.
They keep walking back and forth between the trees, and in the end, the
apples are roughly evenly distributed. The frequency of visits by the
children has therefore approximated the desired distribution (which
Mother Nature couldn’t calculate)!</p>
<p>MCMC methods do the same thing: an MCMC chain randomly draws values
for the model parameters and computes
<code>Result1 = Likelihood of the data * Prior for them</code>. Then it
draws values randomly around the first ones and computes
<code>Result2 = Likelihood of the data * Prior for them</code>. If
<code>Result2</code> is higher than <code>Result1</code>, it jumps there
and draws new parameter values from there. If <code>Result2</code> is
lower, it only jumps there with a probability of
<code>Result2/Result1</code>. Then, values are drawn randomly again, and
so on. In the following figure, successful jumps are represented by blue
arrows and rejected jumps by green arrows.</p>
<div class="float">
<img src="images/mcmc.png"
alt="Visualization of an MCMC simulation. You have to imagine that you cannot see the salmon-colored parameter landscape, which represents the values for Likelihood * Prior, but can only calculate the values of individual points. Further explanations are given in the text. Source: https://www.turing.ac.uk/research/research-projects/adaptive-multilevel-mcmc-sampling" />
<div class="figcaption">Visualization of an MCMC simulation. You have to
imagine that you cannot see the salmon-colored parameter landscape,
which represents the values for Likelihood * Prior, but can only
calculate the values of individual points. Further explanations are
given in the text. Source: <a
href="https://www.turing.ac.uk/research/research-projects/adaptive-multilevel-mcmc-sampling"
class="uri">https://www.turing.ac.uk/research/research-projects/adaptive-multilevel-mcmc-sampling</a></div>
</div>
<p>If this process is continued long enough, the distribution of the
blue dots approaches the posterior probability distribution of the
parameters that we want: We have combined a priori knowledge with the
information contained in the newly collected data to successfully obtain
posterior knowledge!</p>
</div>
</div>
<div id="section-a-somewhat-contrived-example." class="section level3">
<h3>A (somewhat contrived) example.</h3>
<p>We need to decide which chicken breed we want to keep in our orchard.
We already have 3 Kraienköppe and 6 Niederrheiner. We prefer the
Niederrheiner because they are less aggressive, but the Kraienköppe seem
to have a slightly higher egg-laying performance. Is it really advisable
to choose Kraienköppe because of this tendency?</p>
<p><strong>1: Definition of the A-priori-probability
distribution</strong></p>
<p>We inquire about the egg production of the two breeds and learn that
Niederrheiners lay between 190 and 210 eggs per year, while Kraienkoppes
lay between 200 and 220. Accordingly, we formulate our prior probability
distributions using the <code>brms</code> package:</p>
<p><code>library(brms)</code></p>
<p>To get the <code>brms</code> library to work as expected you may need
the latest <code>rstan</code> and <code>StanHeaders</code>. Run
<code>install.packages("rstan")</code>.
<code>install.packages("StanHeaders")</code>. You may also need to set
up the connection with these libraries with
<code>options(mc.cores = parallel::detectCores())</code> and
<code>rstan_options(auto_write = TRUE)</code>.</p>
<p><em>We define 2 normal distributions using the function set_prior,
one with a mean of 200 and a standard deviation of 1.5, and another with
a mean of 210 and a standard deviation of 1.5. We specify under ‘coef’
which parameters in the model that we later formulate these priors
belong to.</em></p>
<p><code>priors &lt;- c(set_prior("normal(200, 5)", coef = "rasseN"), set_prior("normal(210, 5)", coef = "rasseK"))</code></p>
<p><em>Plot them, to get a feeling of the priors:</em></p>
<p><code>curve(dnorm(x, 200, 5), from = 170, to = 230, xlab="egg production", ylab="density")</code></p>
<p><strong>2. Collecting new data</strong></p>
<p>Now we report our own observations of the egg-laying performance of
the 3 Kraienköppe and 6 Niederrheiners from the previous year:</p>
<p><code>rasse &lt;- c("K", "K", "K", "N", "N", "N", "N", "N", "N")</code></p>
<p><code>ll &lt;- c(225, 222, 221, 219, 219, 216, 221, 218, 217)</code></p>
<p><code>daten &lt;- data.frame(rasse=rasse, ll=ll)</code></p>
<p><strong>3. Combining the prior distribution with the data to obtain
the posterior distribution</strong></p>
<p>To estimate the posterior distribution, we use the ‘brm’ function of
the <code>brms</code> package. As we know from other evaluations, we
first formulate our model, namely that the egg-laying performance
<code>ll</code> depends on the breed. The <code>-1</code> in the model
formula causes the model to estimate the mean egg-laying performance for
both breeds rather than just the mean for the first breed and the
difference to it. Under <code>data</code>, we enter our own collected
data and under <code>prior</code>, we define the above priors. The
<code>silent</code> argument determines how much information is output
to the console when the MCMC chains start running. Depending on the
complexity of the model, these simulations can take several seconds or
minutes.</p>
<p><em>Make the model</em></p>
<p><code>legeleistung &lt;- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)</code></p>
<p><strong>4. Interpretation</strong></p>
<p>The above code has performed the MCMC simulation and we can now
examine the posterior distributions for the laying performance of the
chicken breeds:</p>
<p><em>Print the summary</em> <code>summary(legeleistung)</code></p>
<p>The summary first shows us our inputs and some information about the
Markov chains. Most interesting to us are, of course, the estimates for
rasseK and rasseN and their credibility intervals. As you can see, the
confidence intervals overlap: the lower value of rasseK (l-95%) is about
218, which is smaller than the upper value (u-95%) of about 219 for
rasseN, which lays fewer eggs.</p>
<p>Sigma is the estimated standard deviation of the assumed normal
distribution and is less relevant to us here.</p>
<p><code>plot(legeleistung)</code></p>
<p>In the figure, the results are even easier to interpret. On the left,
you can see the a-posteriori distributions for both breeds (note that
the x-axes of the top two distributions are not aligned). To the right
of that are the dynamics of the Markov chains.</p>
<p>From the a-posteriori distributions, we could now also calculate the
exact probability that the egg-laying performance really is different.
However, since we have already seen that the credibility intervals
overlap, we stick to our preference for the Niederrheiners, even though
it is not ruled out that they lay a few eggs less.</p>
</div>
<div id="section-frequentist-versus-bayesian" class="section level3">
<h3>Frequentist versus Bayesian</h3>
<table>
<colgroup>
<col width="51%" />
<col width="48%" />
</colgroup>
<thead>
<tr class="header">
<th>Frequentist</th>
<th>Bayesian</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Probability of data, in relation to hypothesis</td>
<td>only yes/no answer</td>
</tr>
<tr class="even">
<td>Confidence interval: in which interval do we expect 95% of the means
of further random samples of the same sample size</td>
<td>Credibility interval: in which range of values does the true
population mean lie with a probability of 95%</td>
</tr>
<tr class="odd">
<td>Assumption that there is <strong>one</strong> ‘true’ value, but
observations lead to a distribution</td>
<td>Assumption that the observed values are true and have an intrinsic
variance</td>
</tr>
</tbody>
</table>
<p>The easier interpretability of Bayesian analyses is best illustrated
by the following figure:</p>
<div class="float">
<img src="images/effektgroesse.png"
alt="Source: Korner-Nievergelt und Hüppop (2016). Five possible results of estimating an effect, such as the difference in yield with different fertilization. The dots indicate the estimated differences, the vertical bars indicate the 95% uncertainty intervals (confidence interval or credible interval). The results of the corresponding null hypothesis test are shown in the first row. The second row shows the posterior probability for the hypothesis that the effect is “economically relevant”. The background color distinguishes “economically relevant” (orange) from “economically not relevant” (light blue) effect sizes schematically." />
<div class="figcaption">Source: Korner-Nievergelt und Hüppop (2016).
Five possible results of estimating an effect, such as the difference in
yield with different fertilization. The dots indicate the estimated
differences, the vertical bars indicate the 95% uncertainty intervals
(confidence interval or credible interval). The results of the
corresponding null hypothesis test are shown in the first row. The
second row shows the posterior probability for the hypothesis that the
effect is “economically relevant”. The background color distinguishes
“economically relevant” (orange) from “economically not relevant” (light
blue) effect sizes schematically.</div>
</div>
<p>An uncritical frequentist approach would result in: “The effect in
group/treatment A and E is significant, so we will use the tested
fertilizer for those groups. There seems to be no effect in the other
groups.”</p>
<p>However, there is an important effect in group B as well, and even
though the effect in group E is statistically significant, the effect
size on yield is so small that it probably does not make economic sense
to fertilize additionally.</p>
<p>The results of the Bayesian analysis (i.e., the probabilities for the
hypothesis that there is an effect) much more directly reflect these
interpretations.</p>
</div>
</div>
<div id="section-bayes" class="section level2">
<h2>Lecture 8.1: Bayesian Thinking</h2>
<!-- reference with [Bayesian thinking](#bayes) -->
<p>Welcome to <strong>Decision Analysis and Forecasting for Agricultural
Development</strong>. Feel free to bring up any questions or concerns in
the Slack or to <a
href="mailto:cory.whitney@uni-bonn.de?subject=%5BLecture_6%5D%20Decision%20Analysis%20Lecture">Dr. Cory
Whitney</a> or the course tutor.</p>
<p>Please watch the video and answer the multiple choice questions
below.</p>
<!-- https://youtu.be/_Hf7tYwTEZw -->
<iframe width="560" height="315" src="https://www.youtube.com/embed/_Hf7tYwTEZw" frameborder="0" allowfullscreen>
</iframe>
<div class="panel panel-default tutorial-question-container">
<div data-label="bayesian-thinking-question-1" class="tutorial-question panel-body">
<div id="bayesian-thinking-question-1-answer_container" class="shiny-html-output"></div>
<div id="bayesian-thinking-question-1-message_container" class="shiny-html-output"></div>
<div id="bayesian-thinking-question-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="bayesian-thinking-question-2" class="tutorial-question panel-body">
<div id="bayesian-thinking-question-2-answer_container" class="shiny-html-output"></div>
<div id="bayesian-thinking-question-2-message_container" class="shiny-html-output"></div>
<div id="bayesian-thinking-question-2-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="bayesian-thinking-question-3" class="tutorial-question panel-body">
<div id="bayesian-thinking-question-3-answer_container" class="shiny-html-output"></div>
<div id="bayesian-thinking-question-3-message_container" class="shiny-html-output"></div>
<div id="bayesian-thinking-question-3-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="bayesian-thinking-question-4" class="tutorial-question panel-body">
<div id="bayesian-thinking-question-4-answer_container" class="shiny-html-output"></div>
<div id="bayesian-thinking-question-4-message_container" class="shiny-html-output"></div>
<div id="bayesian-thinking-question-4-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="bayesian-thinking-question-5" class="tutorial-question panel-body">
<div id="bayesian-thinking-question-5-answer_container" class="shiny-html-output"></div>
<div id="bayesian-thinking-question-5-message_container" class="shiny-html-output"></div>
<div id="bayesian-thinking-question-5-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<p><img src="images/bayesian-hypothesis-testing.jpg"
style="width:2in" /></p>
<p>Summarize for yourself the difference between the frequentist and the
Bayesian approach to knowledge generation. Which one do you feel more
comfortable about? Are you ready to become a Bayesian?</p>
<div id="section-group-discussion-reading-5" class="section level3">
<h3>Group discussion reading:</h3>
<ul>
<li>Bertsch McGrayne (2011) `The theory that would not die’ (Chapter 1.
Causes in the Air)</li>
</ul>
</div>
</div>
<div id="section-calibration_lecture" class="section level2">
<h2>Lecture 9: Calibrating experts</h2>
<!-- reference with [Calibrating experts](#calibration_lecture) -->
<p>Welcome to lecture 9 of <strong>Decision Analysis and Forecasting for
Agricultural Development</strong>. Feel free to bring up any questions
or concerns in the Slack or to <a
href="mailto:cory.whitney@uni-bonn.de?subject=%5BLecture_4%5D%Calibrating%Experts%20Lecture">Dr. Cory
Whitney</a> or the course tutor.</p>
<p>The following videos tell you something about a method which is
frequently used in our group to get reliable values for the input tables
from our stakeholders. Please watch the videos and answer the questions
that follow.</p>
<div id="section-what-is-calibration-training" class="section level3">
<h3>What is calibration training?</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/DYAv-LBZaIU" frameborder="0" allowfullscreen>
</iframe>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-explaining-calibration-training-part-01-01" class="tutorial-question panel-body">
<div id="question-explaining-calibration-training-part-01-01-answer_container" class="shiny-html-output"></div>
<div id="question-explaining-calibration-training-part-01-01-message_container" class="shiny-html-output"></div>
<div id="question-explaining-calibration-training-part-01-01-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-explaining-calibration-training-part-01-02" class="tutorial-question panel-body">
<div id="question-explaining-calibration-training-part-01-02-answer_container" class="shiny-html-output"></div>
<div id="question-explaining-calibration-training-part-01-02-message_container" class="shiny-html-output"></div>
<div id="question-explaining-calibration-training-part-01-02-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
<div id="section-why-do-we-apply-calibration-training"
class="section level3">
<h3>Why do we apply calibration training?</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/JqOX3cHa8AI" title="Calibration Training Part 2" frameborder="0" allowfullscreen>
</iframe>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-explaining-calibration-training-part-02-01" class="tutorial-question panel-body">
<div id="question-explaining-calibration-training-part-02-01-answer_container" class="shiny-html-output"></div>
<div id="question-explaining-calibration-training-part-02-01-message_container" class="shiny-html-output"></div>
<div id="question-explaining-calibration-training-part-02-01-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="question-explaining-calibration-training-part-02-02" class="tutorial-question panel-body">
<div id="question-explaining-calibration-training-part-02-02-answer_container" class="shiny-html-output"></div>
<div id="question-explaining-calibration-training-part-02-02-message_container" class="shiny-html-output"></div>
<div id="question-explaining-calibration-training-part-02-02-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
<div id="section-group-discussion-reading-6" class="section level3">
<h3>Group discussion reading:</h3>
<ul>
<li><strong>Chapter 1.</strong> Kahneman, Daniel, and Patrick Egan.
Thinking, Fast and Slow. Vol. 1. New York: Farrar, Straus and Giroux,
2011.</li>
</ul>
</div>
<div id="section-bonus-material" class="section level3">
<h3>Bonus Material</h3>
<p>Watch the video and do the awareness test!</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/UfA3ivLK_tE" frameborder="0" allowfullscreen>
</iframe>
<p>Have a look at Terry Heick’s <a
href="https://www.teachthought.com/critical-thinking/the-cognitive-bias-codex-a-visual-of-180-cognitive-biases/">Cognitive
Bias codex</a>.</p>
</div>
</div>
<div id="section-analyst_profile" class="section level2">
<h2>Lecture 10: Profile of a Decision Analyst</h2>
<!-- reference with [Profile of a decision analyst](#analyst_profile) -->
<!-- https://youtu.be/XG0R9ViQm0E -->
<p>Welcome to lecture 10 of <strong>Decision Analysis and Forecasting
for Agricultural Development</strong>. Feel free to bring up any
questions or concerns in the Slack or to <a
href="mailto:cory.whitney@uni-bonn.de?subject=%5BLecture_6%5D%20Decision%20Analysis%20Lecture">Dr. Cory
Whitney</a> or the course tutor.</p>
<p>Those who work in Decision Analysis must be able to do a number of
diverse jobs from the facilitation and integration of ideas into models
and also in programming these models. In the following short lecture you
will learn about the skills that are particularly important for
<em>integration</em> of knowledge, <em>facilitation</em> of knowledge
gathering processes and for <em>programming</em> decision models. Please
watch the video and answer the multiple choice questions below.</p>
<!-- https://youtu.be/XG0R9ViQm0E -->
<iframe width="560" height="315" src="https://www.youtube.com/embed/XG0R9ViQm0E" frameborder="0" allowfullscreen>
</iframe>
<div class="panel panel-default tutorial-question-container">
<div data-label="analyst-profile-question-1" class="tutorial-question panel-body">
<div id="analyst-profile-question-1-answer_container" class="shiny-html-output"></div>
<div id="analyst-profile-question-1-message_container" class="shiny-html-output"></div>
<div id="analyst-profile-question-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="analyst-profile-question-2" class="tutorial-question panel-body">
<div id="analyst-profile-question-2-answer_container" class="shiny-html-output"></div>
<div id="analyst-profile-question-2-message_container" class="shiny-html-output"></div>
<div id="analyst-profile-question-2-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="analyst-profile-question-3" class="tutorial-question panel-body">
<div id="analyst-profile-question-3-answer_container" class="shiny-html-output"></div>
<div id="analyst-profile-question-3-message_container" class="shiny-html-output"></div>
<div id="analyst-profile-question-3-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div id="section-reading" class="section level3">
<h3>Reading</h3>
<p>This week we will read and discuss Chapter 1 of ‘The Flaw of
Averages’ by <span class="citation">Savage and Markowitz
(2009)</span>.</p>
<p>-Savage, Sam L., and Harry M. Markowitz. The Flaw of Averages: Why We
Underestimate Risk in the Face of Uncertainty. John Wiley &amp; Sons,
2009.</p>
</div>
<div id="section-bonus-reading" class="section level3">
<h3>Bonus reading</h3>
<p>Sam Savage’s article <a
href="https://hbr.org/2002/11/the-flaw-of-averages">The Flaw of
Averages</a> in the Harvard Business Review.</p>
</div>
</div>
<div id="section-r_rstudio" class="section level2">
<h2>Seminar 1: Using R and RStudio</h2>
<!-- [Using R and RStudio](#r_rstudio) -->
<p>Welcome to <strong>Decision Analysis and Forecasting for Agricultural
Development</strong>. Feel free to bring up any questions or concerns in
the Slack or to <a
href="mailto:cory.whitney@uni-bonn.de?subject=%5BSeminar_4%5D%20Decision%20Analysis%20Lecture">Dr. Cory
Whitney</a> or the course tutor.</p>
<p>Remember that this is an experiential course and will be based
largely on work from your side that is supported by us, rather than
passive learning where we deliver content. In order to work with us in
this course you will need to have some basic tools.</p>
<p>The first step in getting ready for the work of this course is to
install and run <a href="https://www.r-project.org/">R</a> <span
class="citation">(R Core Team 2024)</span> and <a
href="https://rstudio.com/">RStudio</a>.</p>
<p>If you already have R and RStudio loaded then you should be able to
follow parts our R tutorial. Please follow <a
href="https://agtools.app/learning_r/#section-data-wrangling-part-1">Data
Wrangling Part one</a> and <a
href="https://agtools.app/learning_r/#section-data-wrangling-part-2">Data
Wrangling Part two</a> portions of the tutorial. Share the results of
your work with the ‘ggplot2’ ‘diamonds’ data <span
class="citation">(Wickham et al. 2024)</span> after you have worked
through these materials.</p>
<!-- remake and embed R course materials -->
<!-- world cafe in zoom? a kind of 'speed dating' app... get people to converse-->
<div id="section-further-reading-1" class="section level3">
<h3>Further Reading</h3>
<ul>
<li>Check out the <a href="https://style.tidyverse.org/index.html">R
Studio Tidyverse style guide</a></li>
</ul>
</div>
</div>
<div id="section-rstudio_continued" class="section level2">
<h2>Seminar 2: Using R and RStudio Continued</h2>
<!-- [Using R and RStudio Continued](#rstudio_continued) -->
<p>You should already have installed R and RStudio. If not, please check
out the <a href="#section-tools">tools we use</a> in this course. If you
already have R and RStudio loaded then you should be able to follow this
<a
href="https://agtools.app/learning_r/#section-data-visualization">Data
Visualization</a> section of the R tutorial. Share the results of your
work with a data set of your choice (i.e. <code>ggplot2</code>
<code>diamonds</code> data <span class="citation">(Wickham et al.
2024)</span>) after you have worked through these materials.</p>
<div id="section-lifestyle-choices" class="section level3">
<h3>Lifestyle choices</h3>
<p>If you run the code <code>usethis::use_blank_slate()</code> in your
console it will set your RStudio preference to <strong>NEVER</strong>
save or restore <code>.RData</code> on exit or on startup, which is a
lifestyle choice endorsed by many excellent researchers like <a
href="https://twitter.com/JennyBryan">Jenny Bryan</a>.</p>
</div>
</div>
<div id="section-seminar-3-model-updates" class="section level2">
<h2>Seminar 3: Model Updates</h2>
<p>Participants shared conceptual models and recieved feedback.</p>
<p>See Slack</p>
<div id="section-useful-graphical-model-tools" class="section level4">
<h4>Useful graphical model tools</h4>
<p><a href="https://app.diagrams.net/">draw.io</a></p>
<p><a href="https://ncase.me/loopy/">loopy</a></p>
<p><a href="https://miro.com/">miro</a></p>
<p><a href="https://www.lucidchart.com/pages/">Lucid</a></p>
</div>
</div>
<div id="section-rmarkdown" class="section level2">
<h2>Seminar 4: Using RMarkdown</h2>
<!-- [Using RMarkdown](#rmarkdown) -->
<div id="section-using-rmarkdown" class="section level3">
<h3>Using RMarkdown</h3>
<p>RMarkdown: overview</p>
<p><img src="images/RMarkdown.png" style="width:2in" /></p>
<p>Now let’s check out <a
href="https://rmarkdown.rstudio.com/">Rmarkdown</a>, a powerful tool
that allows making fancy reports, websites etc. out of our R code (<span
class="citation">Allaire et al. (2024)</span>). You’re already looking
at an example, by the way. This website was produced with Rmarkdown (and
it wasn’t hard at all)!</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/hh4wyP8tvkI" frameborder="0" allowfullscreen>
</iframe>
<!-- ![](https://youtu.be/hh4wyP8tvkI) -->
<p>Here are <a
href="http://htmlpreview.github.io/?https://github.com/CWWhitney/teaching_R//blob/master/RMarkdown/RMarkdown.html">the
slides</a> and <a
href="http://htmlpreview.github.io/?https://github.com/CWWhitney/teaching_R//blob/master/RMarkdown/RMarkdown_example.html">the
html file</a> generated in the video.</p>
<p>To run this you will need to load <code>library(rmarkdown)</code></p>
<p><img src="images/hex-rmarkdown.png" style="width:1in" /></p>
<p>and library(<code>knitr</code>)</p>
<p><img src="images/knitrhex.png" style="width:1in" /></p>
<ul>
<li>Use <a href="https://rmarkdown.rstudio.com/">RMarkdown</a>!</li>
<li>You will thank yourself</li>
<li>Save often with new version (or use git)</li>
</ul>
</div>
<div id="section-rmarkdown-getting-stuck" class="section level3">
<h3>RMarkdown: getting stuck</h3>
<ul>
<li>Use a ‘?’ with function, package, data name in the R console</li>
<li>If you get stuck, use Google: just add “R” to a search e.g. a copy
of an error message</li>
<li>Someone else has also been confused by it and has written about
it</li>
<li>Thousands of talented programmers scan the web and answer these
problems</li>
</ul>
<div class="footer">
<p></small><a href="https://stackoverflow.com/"
class="uri">https://stackoverflow.com/</a> </small></p>
</div>
</div>
<div id="section-rmarkdown-basics" class="section level3">
<h3>RMarkdown: basics</h3>
<p><small><a href="https://rmarkdown.rstudio.com/authoring_basics.html"
class="uri">https://rmarkdown.rstudio.com/authoring_basics.html</a></small></p>
<p><small><a href="https://bookdown.org/yihui/rmarkdown/r-code.html"
class="uri">https://bookdown.org/yihui/rmarkdown/r-code.html</a></small></p>
<ul>
<li>Open RStudio</li>
</ul>
<p><img src="images/rstudio-hex.png" style="width:1in" /> - Open an
Rmarkdown file and knit.</p>
<p><img src="images/open_markdown_file.jpg" /></p>
<p><img src="images/knit-logo.png" /></p>
<p>Now we’re equipped with all the basic tools for this course. We’ll
start using them pretty soon. Throughout the course you’ll find
occasional references to your RMarkdown file. This is supposed to be
produced with Rmarkdown, with subsequent versions of it stored on
Github.</p>
</div>
</div>
<div id="section-github_git" class="section level2">
<h2>Seminar 5: Using git and Github</h2>
<!-- [Using git and Github](#github_git) -->
<p>Welcome to the fourth seminar of <strong>Decision Analysis and
Forecasting for Agricultural Development</strong>. All your programming
and project work for this course should take place in the git
environment and this seminar is intended to show you how to make that
happen. Feel free to bring up any questions or concerns in the Slack or
to <a
href="mailto:cory.whitney@uni-bonn.de?subject=%5BSeminar_4%5D%20Decision%20Analysis%20Lecture">Dr. Cory
Whitney</a> or the course tutor.</p>
<div id="section-git-and-github" class="section level3">
<h3>Git and Github</h3>
<p>Now we look at the programming version control environment <a
href="https://git-scm.com/">git</a> and the interface <a
href="https://github.com/">github</a>, which we use to share our scripts
and changes to our work.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/S98XJTyIVaY" frameborder="0" allowfullscreen>
</iframe>
<p>Install Git &amp; join Github (if you have not already):</p>
<ul>
<li>install Git <small><a href="https://git-scm.com/downloads"
class="uri">https://git-scm.com/downloads</a></small></li>
</ul>
<p><strong>Important note for Windows users</strong>: when you download
Git, it may be installed into your <code>Program Files</code> directory
by default. This often causes issues later. The general recommendation
is to choose a different directory for installing,
i.e. <code>C:/Users/username/bin/</code>. Once Git is installed, open
RStudio, and go to <code>Tools &gt; Global Options</code>, select
<code>Git/SVN</code>, and then enter or select the path for your Git
executable.</p>
<ul>
<li><strong>join Github</strong> <small><a href="https://github.com/"
class="uri">https://github.com/</a></small></li>
</ul>
<p>Some useful tips on getting these running from our friends</p>
<ul>
<li><p><strong>University of Zurich</strong> <small><a
href="http://www.geo.uzh.ch/microsite/reproducible_research/post/rr-rstudio-git/"
class="uri">http://www.geo.uzh.ch/microsite/reproducible_research/post/rr-rstudio-git/</a></small></p></li>
<li><p><strong>Nathan Stephens</strong>, a very helpful R blogger<br />
<small><a
href="https://support.rstudio.com/hc/en-us/articles/200532077-Version-Control-with-Git-and-SVN"
class="uri">https://support.rstudio.com/hc/en-us/articles/200532077-Version-Control-with-Git-and-SVN</a></small></p></li>
<li><p><strong>R For the Rest of us</strong> Learn the essentials of
using Git and GitHub with RStudio. This guide explains how to integrate
version control into your R projects for better collaboration. <a
href="https://rfortherestofus.com/2021/02/how-to-use-git-github-with-r/"
class="uri">https://rfortherestofus.com/2021/02/how-to-use-git-github-with-r/</a></p></li>
</ul>
<p>Start simple with your own repository only and work on it alone.
Share your profile and link to a repository you made in the Slack
channel for this seminar. Soon you will start to collaborate on
something in git. For the project part of this course your team will
work in a collective repository and work together to generate the final
working project model and report.</p>
</div>
<div id="section-bonus-sharing-html-files" class="section level3">
<h3>Bonus: Sharing html files</h3>
<p>We can use the options from <code>htmlpreview.github.io</code> to
show the results of any of our html output work that is stored in our
git repository.</p>
<p>To do that just preface the path for the html file with
<code>http://htmlpreview.github.io/?</code>.</p>
<p>For example the slides for this seminar can be found in the
<code>CWWhitney/teaching_git</code> repository.</p>
<p>The full path is:
<code>https://github.com/CWWhitney/teaching_git/blob/master/R_Git_GitHub.html</code></p>
<p>and the link to this to be viewed directly as a web page is: <a
href="http://htmlpreview.github.io/?https://github.com/CWWhitney/teaching_git/blob/master/R_Git_GitHub.html"
class="uri">http://htmlpreview.github.io/?https://github.com/CWWhitney/teaching_git/blob/master/R_Git_GitHub.html</a></p>
</div>
<div id="section-bonus-further-reading-1" class="section level3">
<h3>Bonus: Further Reading</h3>
<ul>
<li><p><a href="https://happygitwithr.com/">Happy Git with R by Jenny
Bryan</a></p></li>
<li><p><a
href="https://www.datree.io/resources/github-best-practices">Best
practices in git from datree.io</a></p></li>
<li><p><a href="https://deepsource.io/blog/git-best-practices/">Best
practices for using Git from deepsource.io</a>. Note that we break rule
number five when we share the html files in the Git repository. That can
be our secret.</p></li>
<li><p><a href="https://learngitbranching.js.org/">Git game for learning
about branch management</a></p></li>
</ul>
<p>Watch the ‘What is GitHub’ video from the GitHub developers</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/w3jLJU7DT5E" frameborder="0" allowfullscreen>
</iframe>
</div>
</div>
<div id="section-model_programming" class="section level2">
<h2>Seminar 6: Model Programming</h2>
<!-- reference with [Model programming](#model_programming) -->
<p>Welcome to the model programming seminar of <strong>Decision Analysis
and Forecasting for Agricultural Development</strong>. In this seminar
we will look into different options for model programming in the
<code>R</code> programming environment <span class="citation">(R Core
Team 2024)</span>. In case you have not already installed <code>R</code>
and <code>RStudio</code> you may want to go back to the <a
href="#section-r_rstudio">Using R and Rstudio</a> seminar and follow the
instructions there. Feel free to bring up any questions or concerns in
the Slack or to <a
href="mailto:cory.whitney@uni-bonn.de?subject=%5BSeminar_4%5D%20Decision%20Analysis%20Lecture">Dr. Cory
Whitney</a> or the course tutor.</p>
<p>Remember to start simple then move on to other steps, make sure that
you always have a working model at each of the steps in the process,
i.e. starting with a skateboard rather than a car part as in this
example from <a href="https://twitter.com/metalab">MetaLab</a>.</p>
<div class="float">
<img src="images/Model_stages_car_analogy.png"
alt="‘Skateboard, Bike, Car’" />
<div class="figcaption">‘Skateboard, Bike, Car’</div>
</div>
<div
id="section-monte-carlo-simulation-of-apples-and-sheep-agroforestry"
class="section level3">
<h3>Monte Carlo Simulation of Apples and Sheep Agroforestry</h3>
<p>Follow this hypothetical example of a silvopastoral system as your
first Monte Carlo simulation in base R.</p>
<p><img src="images/MC_apples_sheep.png" style="width:50.0%" /></p>
<p>In this video we walk you through the process of running this model.
Please follow along and write your own R script. If you ask nicely we
might also share the R script.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Wj49RrvjQ5M" frameborder="0" allowfullscreen>
</iframe>
</div>
</div>
<div id="section-model_programming_cont" class="section level2">
<h2>Seminar 7: Model Programming continued</h2>
<!-- reference with [Model programming](#model_programming_cont) -->
<p>Welcome to the second seminar on model programming <strong>Decision
Analysis and Forecasting for Agricultural Development</strong>. In this
seminar we will look into different options for model programming in the
<code>R</code> programming environment <span class="citation">(R Core
Team 2024)</span>. In case you have not already installed <code>R</code>
and <code>RStudio</code> you may want to go back to the <a
href="#section-r_rstudio">Using R and Rstudio</a> seminar and follow the
instructions there. Feel free to bring up any questions or concerns in
the Slack or to <a
href="mailto:cory.whitney@uni-bonn.de?subject=%5BSeminar_4%5D%20Decision%20Analysis%20Lecture">Dr. Cory
Whitney</a> or the course tutor.</p>
<div id="section-decision-analysis-with-the-decisionsupport-package"
class="section level3">
<h3>Decision analysis with the decisionSupport package</h3>
<p>As we have discussed in previous lectures, when deciding on
intervention in complex systems, many of the variables decision makers
need to consider are difficult or impossible to precisely quantify. The
<code>decisionSupport</code> package <span class="citation">(Luedeling
et al. 2024)</span> can make use of uncertainty around these
relationships and implement a Monte Carlo simulation, which generates a
large number of plausible system outcomes. The model procedure draws
random numbers for each input variable, which are drawn from specified
probability distributions. The method requires two inputs to the
<code>mcSimulation</code> function:</p>
<ol style="list-style-type: decimal">
<li><p>an R function that predicts decision outcomes based on the
variables named in a separate data table. This R function is customized
by the user to address a particular decision problem.</p></li>
<li><p>an input table (normally in <code>comma separated values</code>
format, ending in <code>.csv</code>) specifying the names and
probability distributions for all variables used in the decision model.
These distributions aim to represent the full range of possible values
for each component of the model.</p></li>
</ol>
<p>The <code>mcSimulation</code> function from the
<code>decisionSupport</code> package conducts a Monte Carlo analysis
with repeated model runs based on probability distributions for all
uncertain variables. The data table and model are customized to fit the
particulars of a specific decision.</p>
</div>
<div id="section-building-a-decision-model-as-an-r-function"
class="section level3">
<h3>Building a decision model as an R function</h3>
<p>We have already built some simple models in the <a
href="#section-decision_models">Decision Models</a> lecture and the <a
href="#section-model_programming">Model programming</a> seminar.</p>
<p>First we generate a model as a function. We use the
<code>decisionSupport</code> functions <code>vv()</code> to produce time
series with variation from a pre-defined mean and coefficient of
variation, <code>chance_event()</code> to simulate whether events occur
and <code>discount()</code> to discount values along a time series.</p>
</div>
<div id="section-decisionsupport-package-in-r" class="section level3">
<h3>decisionSupport package in R</h3>
<p>We have just learned about the processes and methods of generating <a
href="#section-decision_models">Decision Models</a>. Now we can explore
some of the packages that we commonly use in <code>R</code>. The main
package that our team uses for simulations is the
<code>decisionSupport</code>. In order to use the standard tools for
running these models in the R environment you will need to load the
<code>decisionSupport</code> library. Use the
<code>install.packages</code> function,
i.e. <code>install.packages("decisionSupport")</code>.</p>
<pre class="r"><code>library(decisionSupport)</code></pre>
</div>
<div id="section-building-the-model" class="section level3">
<h3>Building the model</h3>
<div class="float">
<img src="images/model_simple.png" style="width:50.0%"
alt="A simple model costs and benefits of sweet cherry production" />
<div class="figcaption">A simple model costs and benefits of sweet
cherry production</div>
</div>
<p>Here we generate an input table to feed the model function. Update
this to include the management cost variable in the graphical impact
pathway above. Call your new variable <code>"Management_cost"</code>,
make the lower bound <code>100</code> and the upper bound
<code>2000</code>, make the distribution <code>"posnorm"</code>, make
the label <code>"Management cost (USD/ha)"</code> and make the
description <code>"Management costs in a normal season"</code>.</p>
<div class="tutorial-exercise" data-label="input_table"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>input_estimates &lt;- data.frame(variable = c(&quot;Yield&quot;, &quot;Market_price&quot;, &quot;Labor_cost&quot;),
                    lower = c(6000, 3, 500),
                    median = NA,
                    upper = c(14000, 8, 1000),
                    distribution = c(&quot;posnorm&quot;, &quot;posnorm&quot;, &quot;posnorm&quot;),
                    label = c(&quot;Yield (kg/ha)&quot;, &quot;Price (USD/kg)&quot;, &quot;Labor cost (USD/ha)&quot;),
                    Description = c(&quot;Yield in a sweet cherry farm under normal conditions&quot;,
                                    &quot;Price of sweet cherry in a normal season&quot;,
                                    &quot;Labor costs in a normal season&quot;))

input_estimates</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="input_table-solution"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>input_estimates &lt;- data.frame(variable = c(&quot;Yield&quot;, &quot;Market_price&quot;, &quot;Labor_cost&quot;, &quot;Management_cost&quot;),
                    lower = c(6000, 3, 500, 100),
                    median = NA,
                    upper = c(14000, 8, 1000, 2000),
                    distribution = c(&quot;posnorm&quot;, &quot;posnorm&quot;, &quot;posnorm&quot;, &quot;posnorm&quot;),
                    label = c(&quot;Yield (kg/ha)&quot;, &quot;Price (USD/kg)&quot;, &quot;Labor cost (USD/ha)&quot;, &quot;Management cost (USD/ha)&quot;),
                    Description = c(&quot;Yield in a sweet cherry farm under normal conditions&quot;,
                                    &quot;Price of sweet cherry in a normal season&quot;,
                                    &quot;Labor costs in a normal season&quot;, 
                                    &quot;Management costs in a normal season&quot;))

input_estimates</code></pre>
</div>
<p>Here we use the <code>mcSimulation</code> function from the
<code>decisionSupport</code> package to implement a model <span
class="citation">(Luedeling et al. 2024)</span>. The model function that
describes the graphical impact pathway. Add a new line of code that
summarizes the <code>Labor_cost</code> and <code>Management_cost</code>
into <code>overall_costs</code>, then subtract these from the
<code>income</code> to calculate <code>final_result</code>.</p>
<div class="tutorial-exercise" data-label="chile-model"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>model_function &lt;- function(){
  
  # Estimate the income in a normal season
  income &lt;- Yield * Market_price
  
  # Estimate the final results from the model
  final_result &lt;- income - Labor_cost
  
  # Generate the list of outputs from the Monte Carlo simulation
  return(list(final_result = final_result))
}

# Run the Monte Carlo simulation using the model function
example_mc_simulation &lt;- mcSimulation(estimate = as.estimate(input_estimates),
                              model_function = model_function,
                              numberOfModelRuns = 800,
                              functionSyntax = &quot;plainNames&quot;)

example_mc_simulation</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="chile-model-solution"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>model_function &lt;- function(){
  
  # Estimate the income in a normal season
  income &lt;- Yield * Market_price
  
  overall_costs &lt;- Labor_cost + Management_cost
    
  # Estimate the final results from the model
  final_result &lt;- income - overall_costs
  
  # Generate the list of outputs from the Monte Carlo simulation
  return(list(final_result = final_result))
}

# Run the Monte Carlo simulation using the model function
example_mc_simulation &lt;- mcSimulation(estimate = as.estimate(input_estimates),
                              model_function = model_function,
                              numberOfModelRuns = 800,
                              functionSyntax = &quot;plainNames&quot;)

example_mc_simulation</code></pre>
</div>
<p>Here we show the results of a Monte Carlo simulation (800 model runs)
for estimating the profits in sweet cherry orchards.</p>
<p>Change the plot to a histogram by using the <code>method</code>
argument in the <code>plot_distributions</code> function.</p>
<div class="tutorial-exercise" data-label="plot_distribution"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>plot_distributions(mcSimulation_object = example_mc_simulation,
                   vars = &quot;final_result&quot;,
                   method = &quot;boxplot_density&quot;,
                   old_names = &quot;final_result&quot;,
                   new_names = &quot;Outcome distribution for profits&quot;)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support"
data-label="plot_distribution-solution" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>plot_distributions(mcSimulation_object = example_mc_simulation,
                   vars = &quot;final_result&quot;,
                   method = &quot;hist_simple_overlay&quot;,
                   old_names = &quot;final_result&quot;,
                   new_names = &quot;Outcome distribution for profits&quot;)</code></pre>
</div>
</div>
<div id="section-testing-with-make_variables" class="section level3">
<h3>Testing with <code>make_variables</code></h3>
<p>You could simply start further developing the decision model now, but
since the model function will be designed to make use of variables
provided to it externally (random numbers drawn according to the
information in the data table), you will need to define sample values
for all variables, if you want to test pieces of the function code
during the development process. This can be done manually, but it’s more
easily accomplished with the following helper function
<code>make_variables</code>:</p>
<div class="tutorial-exercise" data-label="make_variables_function"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>make_variables &lt;- function(est,n=1)
{ x&lt;-random(rho=est, n=n)
    for(i in colnames(x)) assign(i,
     as.numeric(x[1,i]),envir=.GlobalEnv)
}</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<p>This function is not included in the <code>decisionSupport</code>
package, because it places the desired variables in the global
environment. This is not allowed for functions included in packages on
R’s download servers.</p>
<p>Applying <code>make_variables</code> and <code>as.estimate</code> to
the data table (with default setting <code>n=1</code>) generates one
random number for each variable, which then allows you to easily test
the code you are developing. Try running this function on your code as
you build the decision function. This allows for testing the values
within a model rather than running the full model.</p>
<p>Run the <code>make_variables</code> and <code>as.estimate</code> on
the <code>input_estimates</code> input table that we created and then
calculate the result of <code>Labor_cost + Management_cost</code> given
a single random value for these variables. <strong>Note that each time
you run this code it generates a new random draw and produces a
different number from within the range for the variables in the input
table.</strong></p>
<div class="tutorial-exercise" data-label="make_variables"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>make_variables(as.estimate(input_estimates))

Market_price</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support"
data-label="make_variables-solution" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>make_variables(as.estimate(input_estimates))

Labor_cost + Management_cost</code></pre>
</div>
</div>
<div id="section-next-steps" class="section level3">
<h3>Next steps</h3>
<p>Once you have followed and run the code above on your machine it is a
good time to look through the outline of these procedures in the
<code>decisionSupport</code> vignette on the CRAN called <a
href="https://cran.r-project.org/web/packages/decisionSupport/vignettes/example_decision_function.html">‘Applying
the mcSimulation function in decisionSupport’</a> <span
class="citation">(Fernandez, Whitney, and Luedeling 2021)</span>. This
will show you how the tools can be applied for comparing decision
outcomes. It runs a Monte-Carlo-based selection of sedimentation
management strategies for a reservoir in the Upper Volta River Basin of
Burkina Faso <span class="citation">(Lanzanova et al. 2019)</span>. Tip:
If you want to play with this code you can find the <a
href="https://raw.githubusercontent.com/eikeluedeling/decisionSupport/master/vignettes/example_decision_function.Rmd">Rmarkdown
file</a> and the <a
href="https://raw.githubusercontent.com/eikeluedeling/decisionSupport/master/vignettes/example_input_table.csv">estimate
table</a> in the <code>decisionSupport</code> GitHub repository.</p>
<p>Taken together, all these outputs allow an evaluation of the
plausible range of net benefits that can be expected to arise from the
decision. They provide a recommendation on which decision option should
be preferred, and an appraisal of which input variables are responsible
for most of the variation in the output distribution.</p>
</div>
<div id="section-bonus-bayesian-modeling-application"
class="section level3">
<h3>Bonus: Bayesian modeling application</h3>
<p>Listen to this interview on Alex Andorra’s podcast ‘Learning Bayesian
Statistics’, <a
href="https://www.learnbayesstats.com/episode/3-2-how-to-use-bayes-in-industry-with-colin-carroll">How
to use Bayes in industry, with Colin Carroll</a></p>
<!-- -  RSTAN, Other modeling programs - Betancourt’s work (selected blogs, talks, git repos, Stan, HCMC) -->
<!-- -  Yihui (markdown etc.) -->
<!-- -  Assignments:  -->
<!-- -  Rainforth, Tom. “Automating Inference, Learning, and Design Using Probabilistic Programming.” Doctor of Philosophy, University of Oxford, 2017. -->
</div>
<div id="section-causal-model-diagram-impact-pathway-theory-of-change"
class="section level3">
<h3>Causal model / diagram / Impact pathway / Theory of change</h3>
<p>Before you start developing the decision model (an R function), open
R and download and load the <code>decisionSupport</code> package.</p>
<pre><code>install.packages(&quot;decisionSupport&quot;)
library(decisionSupport)</code></pre>
</div>
<div id="section-creating-a-model" class="section level3">
<h3>Creating a model</h3>
<p>The <code>mcSimulation</code> function from the
<code>decisionSupport</code> package can be applied to conduct decision
analysis <span class="citation">(Luedeling et al. 2024)</span>. The
function requires three inputs:</p>
<ol style="list-style-type: decimal">
<li>an <code>estimate</code> of the joint probability distribution of
the input variables. These specify the names and probability
distributions for all variables used in the decision model. These
distributions aim to represent the full range of possible values for
each component of the model.</li>
<li>a <code>model_function</code> that predicts decision outcomes based
on the variables named in a separate data table. This R function is
customized by the user to address a particular decision problem to
provide the decision analysis model.</li>
<li><code>numberOfModelRuns</code> indicating the number of times to run
the model function.</li>
</ol>
<p>These inputs are provided as arguments to the
<code>mcSimulation</code> function, which conducts a Monte Carlo
analysis with repeated model runs based on probability distributions for
all uncertain variables. The data table and model are customized to fit
the particulars of a specific decision.</p>
</div>
<div id="section-the-estimate" class="section level3">
<h3>The <code>estimate</code></h3>
<p>To support the model building process we design an input table to
store the <code>estimate</code> values. The table is stored locally as
<code>example_decision_inputs.csv</code> and contains many of the basic
values for the analysis. This table contains all the input variables
used in the model. Their distributions are described by 90% confidence
intervals, which are specified by lower (5% quantile) and upper (95%
quantile) bounds, as well as the shape of the distribution. This example
uses four different distributions:</p>
<ol style="list-style-type: decimal">
<li><code>const</code> – a constant value</li>
<li><code>norm</code> – a normal distribution</li>
<li><code>tnorm_0_1</code> – a truncated normal distribution that can
only have values between 0 and 1 (useful for probabilities; note that 0
and 1, as well as numbers outside this interval are not permitted as
inputs)</li>
<li><code>posnorm</code> – a normal distribution truncated at 0 (only
positive values allowed)</li>
</ol>
<p>For a full list of possible distributions, type
<code>?random.estimate1d</code> in your R console. When specifying
confidence intervals for truncated distributions, note that
approximately 5% of the random values should ‘fit’ within the truncation
interval on either side. If there is not enough space, the function will
generate a warning (usually it will still work, but the inputs may not
look like you intended them to).</p>
<p>We have provided default distributions for all the variables used
here, but feel free to make adjustments by editing the .csv file in a
spreadsheet program. You can download the <a
href="https://raw.githubusercontent.com/CWWhitney/Decision_Analysis_Course/main/data/example_decision_inputs.csv">‘example_decision_inputs.csv’</a>
here and save it as a .csv file locally (from your web browser try: File
&gt; Save page as). In this example it is stored in the ‘data’ folder.
Once you have downloaded the data you can run
<code>example_decision_inputs &lt;- read.csv("data/example_decision_inputs.csv")</code>
in your console to make the following code work on your machine. Note
that the input table that can be written or read from a .csv file and
calculated with the <code>estimate_read_csv</code> function or converted
to the correct format with the <code>as.estimate</code> function.</p>
</div>
<div id="section-the-model_function" class="section level3">
<h3>The <code>model_function</code></h3>
<p>The decision model is coded as an R function which takes in the
variables provided in the data table and generates a model output, such
as the Net Present Value.</p>
</div>
<div id="section-create-a-simple-function" class="section level3">
<h3>Create a simple function</h3>
<p>Here we define a simple model function that we call
<code>example_decision_model</code>. It calculates profits as benefits
minus costs and arbitrarily adds 500 to the result to arrive at
<code>final_profits</code>. This simple example shows us how to use
<code>function</code>, the results of which can be applied elsewhere.
The most basic way to apply the library is to use the
<code>mcSimulation</code> function to run our
<code>example_decision_model</code>. Here we run it 100 times using
inputs from the <code>example_decision_inputs.csv</code> table.</p>
<p>Update this model by adding <code>additional_benefits</code>, one of
the variables from the <code>example_decision_inputs</code> data, to
replace the 500 that was arbitrarily added to the profit and changing
the number of model runs to 700.</p>
<div class="tutorial-exercise" data-label="example_decision_model"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>example_decision_model &lt;- function(x, varnames){
  profit &lt;- benefits-costs

  final_profits &lt;- profit + 500

  return(final_profits)

}

mcSimulation(estimate = as.estimate(example_decision_inputs),
                              model_function = example_decision_model,
                              numberOfModelRuns = 100,
                              functionSyntax = &quot;plainNames&quot;)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support"
data-label="example_decision_model-solution" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>example_decision_model &lt;- function(x, varnames){

  profit &lt;- benefits-costs

  final_profits &lt;- profit + additional_benefits

  return(final_profits)

}

mcSimulation(estimate = as.estimate(example_decision_inputs),
                              model_function = example_decision_model,
                              numberOfModelRuns = 700,
                              functionSyntax = &quot;plainNames&quot;)</code></pre>
</div>
<p>Now we have a simulation of possible outcomes. In the <a
href="#section-model_programming">model programming seminar</a> this
week we will go into more detail on the options for assessment of the
results of simulations and on visualization of the results.</p>
<p>Note that this example was constructed for clarity and not for speed.
Speed considerations are not very important when we only run a process
once, but since in the Monte Carlo simulation all delays are multiplied
by <code>numberOfModelRuns</code> (e.g. 10,000), they can sometimes add
up to substantial time losses. Even with highly efficient coding, Monte
Carlo simulations can take a while when dealing with complex
decisions.</p>
<p>The objective of the procedures used in the
<code>decisionSupport</code> package is to make it easier for analysts
to produce decision-relevant information that adequately reflects the
imperfect nature of the information we usually have. Adding
probabilistic elements to a simulation adds substantial value to an
analysis. Mostly, it avoids making spurious assumptions, replacing
uncertainty with ‘best bets’ and producing results that do not reflect
the knowledge limitations that make decision-making so challenging. More
information on all this is contained in the <a
href="https://cran.r-project.org/web/packages/decisionSupport/decisionSupport.pdf">decisionSupport
manual</a>, especially under <code>welfareDecisionAnalysis</code>.</p>
<!-- ### Bonus Burkina model -->
<!-- Now let's look at a slightly more comprehensive decision model of sedimentation management strategies for a reservoir in the Upper Volta River Basin of Burkina Faso [@lanzanova_improving_2019]. The reservoirs in the Upper Volta have multiple benefits for rural communities and are important for food security and livelihoods. Sedimentation is a major issue, requiring efficient sedimentation management for which there are many options each fraught with uncertainty and risk. We will walk through a simplified version of the model by @lanzanova_improving_2019. We will use various functions from the `decisionSupport` library.  -->
<!-- ```{r models-seminar-burkina-model, exercise=TRUE} -->
<!-- example_decision_function <- function(x, varnames){ -->
<!--   # calculate ex-ante risks: impact the implementation of interventions #### -->
<!--   intervention_NonPopInvolvEvent <- -->
<!--     chance_event(intervention_NonPopInvolv, 1, 0, n = 1) -->
<!--   # pre-calculate common random draws for all intervention model runs #### -->
<!--   # profits from Tropical Livestock Units (TLU) -->
<!--   TLU <- vv(TLU_no_intervention, var_CV, n_years) -->
<!--   TLU_profit <- vv(profit_per_TLU, var_CV, n_years) -->
<!--   # benefits of fruit -->
<!--   precalc_intervention_fruit_benefits <- -->
<!--     vv(intervention_fruit_area_ha, var_CV, n_years) * -->
<!--     vv(intervention_fruit_yield_t_ha, var_CV, n_years) * -->
<!--     vv(intervention_fruit_profit_USD_t, var_CV, n_years) -->
<!--   # benefits of vegetables -->
<!--   precalc_intervention_vegetable_benefits <- -->
<!--     vv(intervention_vegetable_area_ha, var_CV, n_years) * -->
<!--     vv(intervention_vegetable_yield_t_ha, var_CV, n_years) * -->
<!--     vv(intervention_vegetable_profit_USD_t, var_CV, n_years) -->
<!--   # benefits of rain-fed crops -->
<!--   precalc_intervention_rainfed_crop_benefits <- -->
<!--     vv(intervention_rainfed_crop_area_ha, var_CV, n_years) * -->
<!--     vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) * -->
<!--     vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years) -->
<!--   #  Intervention #### -->
<!--   for (decision_intervention_strips in c(FALSE,TRUE)){ -->
<!--   if (decision_intervention_strips){ -->
<!--     intervention_strips <- TRUE -->
<!--     intervention_strips_PlanningCost <- TRUE -->
<!--     intervention_strips_cost <- TRUE -->
<!--   } else -->
<!--   { -->
<!--     intervention_strips <- FALSE -->
<!--     intervention_strips_PlanningCost <- FALSE -->
<!--     intervention_strips_cost <- FALSE -->
<!--   } -->
<!--   if (intervention_NonPopInvolvEvent) { -->
<!--     intervention_strips <- FALSE -->
<!--     intervention_strips_cost <- FALSE -->
<!--   } -->
<!--   # Costs #### -->
<!--   if (intervention_strips_cost) { -->
<!--     cost_intervention_strips <- -->
<!--       intervention_adaptation_cost +  -->
<!--       intervention_tech_devices_cost +  -->
<!--       intervention_nursery_cost + -->
<!--       intervention_wells_cost + -->
<!--       intervention_training_cost +  -->
<!--       intervention_mngmt_oprt_cost +  -->
<!--       intervention_mngmt_follow_cost + -->
<!--       intervention_mngmt_audit_cost -->
<!--   } else -->
<!--     cost_intervention_strips <- 0 -->
<!--   if (intervention_strips_PlanningCost) { -->
<!--     plan_cost_intervention_strips <- -->
<!--       intervention_communication_cost + intervention_zoning_cost -->
<!--   } else -->
<!--     plan_cost_intervention_strips <- 0 -->
<!--   maintenance_cost <- rep(0, n_years) -->
<!--   if (intervention_strips) -->
<!--     maintenance_cost <- -->
<!--     maintenance_cost + vv(maintenance_intervention_strips,  -->
<!--                           var_CV, n_years) -->
<!--   intervention_cost <- maintenance_cost -->
<!--   intervention_cost[1] <- -->
<!--     intervention_cost[1] +  -->
<!--     cost_intervention_strips +  -->
<!--     plan_cost_intervention_strips -->
<!--   # Benefits from  cultivation in the intervention strips #### -->
<!--   intervention_fruit_benefits <- -->
<!--     as.numeric(intervention_strips) * precalc_intervention_fruit_benefits -->
<!--   intervention_vegetable_benefits <- -->
<!--     as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits -->
<!--   intervention_rainfed_crop_benefits <- -->
<!--     as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits -->
<!--   # Total benefits from crop production (agricultural development and riparian zone) #### -->
<!--   crop_production <- -->
<!--     intervention_fruit_benefits + -->
<!--     intervention_vegetable_benefits + -->
<!--     intervention_rainfed_crop_benefits -->
<!--   # Benefits from livestock #### -->
<!--   # The following allows considering that intervention strips may -->
<!--   # restrict access to the reservoir for livestock. -->
<!--   if (intervention_strips) -->
<!--     TLU_intervention <- -->
<!--     TLU * (1 + change_TLU_intervention_perc / 100) -->
<!--   else -->
<!--     TLU_intervention <- TLU -->
<!--   if (decision_intervention_strips){ -->
<!--     livestock_benefits <- TLU_intervention * TLU_profit -->
<!--     total_benefits <- crop_production + livestock_benefits -->
<!--     net_benefits <- total_benefits - intervention_cost -->
<!--     result_interv <- net_benefits} -->
<!--   if (!decision_intervention_strips){ -->
<!--     livestock_benefits <- TLU_no_intervention * TLU_profit -->
<!--     total_benefits <- livestock_benefits -->
<!--     net_benefits <- total_benefits - intervention_cost -->
<!--     result_n_interv <- net_benefits} -->
<!--     } #close intervention loop bracket -->
<!-- NPV_interv <- -->
<!--   discount(result_interv, discount_rate, calculate_NPV = TRUE) -->
<!-- NPV_n_interv <- -->
<!--   discount(result_n_interv, discount_rate, calculate_NPV = TRUE) -->
<!-- # Beware, if you do not name your outputs  -->
<!-- # (left-hand side of the equal sign) in the return section,  -->
<!-- # the variables will be called output_1, _2, etc. -->
<!-- return(list(Interv_NPV = NPV_interv, -->
<!--             NO_Interv_NPV = NPV_n_interv, -->
<!--             NPV_decision_do = NPV_interv - NPV_n_interv, -->
<!--             Cashflow_decision_do = result_interv - result_n_interv)) -->
<!-- } -->
<!-- ``` -->
<!-- ### The input table -->
<!-- The second thing we need for the model is the input table describing the uncertainty in our variables. A draft of this has been generated for you already. You can get the input table from this Github repository by using the `read_csv` function from the `readr` library [@R-readr] and `url` function from base R. You can also download [the file](https://raw.githubusercontent.com/CWWhitney/Decision_Analysis_Course/main/data/example_input_table.csv) directly from GitHub if you want. You will need to use the 'save as' option for the webpage so that you can have it stored locally as a `.csv` file on your machine. -->
<!-- ```{r models-seminar-getdata, exercise=TRUE} -->
<!-- library(readr) -->
<!-- example_input_table = "https://raw.githubusercontent.com/CWWhitney/Decision_Analysis_Course/main/data/example_input_table.csv" -->
<!-- input_table <- read_csv(url(example_input_table)) -->
<!-- ``` -->
<!-- Want to have a look? Load the data using the `read.csv` function.  -->
<!-- ``` -->
<!-- example_data <- read.csv("example_input_table.csv") -->
<!-- ``` -->
<!-- Notice that the data has seven columns. Looking at the file it should be clear from the 'Description' column what each variable is about and in which units it is in. Ideally this is also mostly clear form the name of the variable.  -->
<!-- ```{r models-head, exercise=TRUE} -->
<!-- names(input_table) -->
<!-- ``` -->
<!-- ### Perform a Monte Carlo simulation -->
<!-- Using the model function above, we can perform a Monte Carlo simulation with the `mcSimulation()` function from `decisionSupport`. This function generates distributions of all variables in the input table as well as the specified model outputs (see `return()` function above) by calculating random draws in our defined `example_decision_function()`. Make sure that all the variables in the input table are included in the model (erroneous variables listed there can cause issues with some of the post-hoc analyses).  -->
<!-- The `numberOfModelRuns` argument is an integer indicating the number of model runs for the Monte Carlo simulation. Unless the model function is very complex, 10,000 runs is a reasonable choice (for complex models, 10,000 model runs can take a while, so especially when the model is still under development, it often makes sense to use a lower number). -->
<!-- ```{r models-seminar-mcSimulation, exercise=TRUE} -->
<!-- mcSimulation_results <- decisionSupport::mcSimulation( -->
<!--   estimate = decisionSupport::estimate_read_csv("data/example_input_table.csv"), -->
<!--   model_function = example_decision_function, -->
<!--   numberOfModelRuns = 200, -->
<!--   functionSyntax = "plainNames" -->
<!-- ) -->
<!-- ``` -->
<!-- ### Model assessment -->
<!-- For the assessment of the results we will use the `decisionSupport` and many `tidyverse` libraries [@tidyverse2019] including `ggplot2` [@R-ggplot2], `plyr` [@R-plyr] and `dplyr` [@R-dplyr] among others in the [R programming language](https://www.r-project.org/) [@R-base].  -->
<!-- ### Plot Net Present Value (NPV) distributions  -->
<!-- We can use the `plot_distributions()` function to produce one of the several plotting options for distribution outputs. This shows us an overlay of the full results of the Monte Carlo model of the decision options, i.e. the expected NPV if we choose to do the intervention `Interv_NPV` or not do the intervention `NO_Interv_NPV`. -->
<!-- ```{r models-seminar-plot_distributions, exercise=TRUE} -->
<!-- decisionSupport::plot_distributions(mcSimulation_object = mcSimulation_results,  -->
<!--                                     vars = c("Interv_NPV", "NO_Interv_NPV"), -->
<!--                                     method = 'smooth_simple_overlay',  -->
<!--                                     base_size = 7) -->
<!-- ``` -->
<!-- We can use the same function to show the distributions of the 'do' `Interv_NPV` and 'do not do' `NO_Interv_NPV` decision scenarios as boxplots. This can be useful when comparing multiple outputs by illustrating the spread of the data resulting from the decision model. Boxplots show the median (central line), the 25^th^ and 75^th^ percentiles (sides of boxes) and any outliers (light circles outside of boxes).  -->
<!-- ```{r models-seminar-plot_distributions_boxplot, exercise=TRUE} -->
<!-- decisionSupport::plot_distributions(mcSimulation_object = mcSimulation_results,  -->
<!--                                     vars = c("Interv_NPV", -->
<!--                                     "NO_Interv_NPV"), -->
<!--                                     method = 'boxplot') -->
<!-- ``` -->
<!-- We can use the same function for the value of the decision (difference in NPV between do and do not do). This can be quite helpful for us since it shows us the outcome distribution of the decision itself.  -->
<!-- ```{r models-seminar-plot_distributions_box_dens, exercise=TRUE} -->
<!-- decisionSupport::plot_distributions(mcSimulation_object = mcSimulation_results,  -->
<!--                                     vars = "NPV_decision_do", -->
<!--                                     method = 'boxplot_density') -->
<!-- ``` -->
<!-- #### Cashflow analysis -->
<!-- Here we plot the distribution of annual cashflow over the entire simulated period for the intervention (`n_years`). For this we use the `plot_cashflow()` function which uses the specified cashflow outputs from the `mcSimulation()` function (in our case `Cashflow_decision_do`) to show cashflow over time. -->
<!-- ```{r models-seminar-plot_cashflow, exercise=TRUE} -->
<!-- plot_cashflow(mcSimulation_object = mcSimulation_results, cashflow_var_name = "Cashflow_decision_do") -->
<!-- ``` -->
<!-- #### Value of Information (VoI) analysis -->
<!-- We calculate Value of Information (VoI) analysis with the Expected Value of Perfect Information (EVPI). As we learned in [Lecture 8 on forecasts](#forecasts), EVPI measures the expected opportunity loss that is incurred when the decision-maker does not have perfect information about a particular variable. EVPI is determined by examining the influence of that variable on the output value of a decision model.  -->
<!-- We use the function `data.frame()` to transform the x and y outputs of the `mcSimulation()` function for EVPI calculation. We use the `multi_EVPI()` function to calculate the EVPI for multiple independent variables. For the `first_out_var` argument we choose `intervention_mngmt_audit_cost` from the input table since this is the first variable after the `NPV` and `cashflow` model outputs, which we would like to exclude from the EVPI analysis. -->
<!-- ```{r models-seminar-evpi, exercise=TRUE} -->
<!-- #here we subset the outputs from the mcSimulation function (y) by selecting the correct variables -->
<!-- # choose this carefully and be sure to run the multi_EVPI only on the variables that the you want -->
<!-- mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3]) -->
<!-- evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = "Interv_NPV") -->
<!-- ``` -->
<!-- We use the function `plot_evpi()` on the results from `multi_EVPI()` to plot the Expected Value of Perfect Information (EVPI). Here we show the results with the standard settings. The length of the bars is equal to EVPI. -->
<!-- ```{r models-seminar-evpi_plot, exercise=TRUE} -->
<!-- plot_evpi(evpi, decision_vars = "NPV_decision_do") -->
<!-- ``` -->
<!-- Finally, we can use the `compound_figure()` function to provide a single figure for a quick assessment. The can be used to run the full decision assessment for a simple binary decision ('do' or 'do not do'). -->
<!-- ```{r models-seminar-compound_figure, exercise=TRUE} -->
<!-- compound_figure(mcSimulation_object = mcSimulation_results,  -->
<!--                 input_table = input_table, plsrResults = pls_result,  -->
<!--                 EVPIresults = evpi, decision_var_name = "NPV_decision_do",  -->
<!--                 cashflow_var_name = "Cashflow_decision_do",  -->
<!--                 base_size = 7) -->
<!-- ``` -->
<!-- #### Projection to Latent Structures (PLS) analysis -->
<!-- We can apply another post-hoc analysis to the `mcSimulation()` outputs with `plsr.mcSimulation()` to determine the Variable Importance in the Projection (VIP) score and coefficients of a Projection to Latent Structures (PLS) regression model. This function uses the outputs of the `mcSimulation()` selecting all the input variables from the decision analysis function in the parameter `object` and then runs a PLS regression with an outcome variable defined in the parameter `resultName`. We use the code `names(mcSimulation_results$y)[3]` to select the outcome variable NPV_decision_do, which is the third element of the list `y` in our `mcSimulation_results` outputs (this must be a character element).  -->
<!-- ```{r models-seminar-pls, exercise=TRUE} -->
<!-- pls_result <- plsr.mcSimulation(object = mcSimulation_results, -->
<!--                   resultName = names(mcSimulation_results$y)[3], ncomp = 1) -->
<!-- ``` -->
<!-- We run the `plot_pls()` on the results from `plsr.mcSimulation()` with a number of standard settings. The length of the bars is equal to VIP with a vertical line at '1' on the x-axis indicating a standard cut-off for VIP used for variable selection. The overall plot only shows those variables with a VIP > 0.8, which is the common threshold for variable selection. The colors of the bars represent the positive or negative coefficient of the given input variable with the output variable. -->
<!-- Here we import the input table again to replace the labels for the variables on the y-axis. The input table can include a `label` and `variable` column. The standard labels (from the `variable` column) are usually computer readable and not very nice for a plot. The `plot_pls()` function uses the text in the `label` column as replacement for the default text in the `variable` column.   -->
<!-- ```{r models-seminar-plot_pls, exercise=TRUE} -->
<!-- plot_pls(pls_result, input_table = input_table, threshold = 0) -->
<!-- ``` -->
</div>
<div id="section-tasks" class="section level3">
<h3>Tasks</h3>
<p>See the model section of the talk by Hoa Do in the <a
href="#section-forecasts">Lecture 8 on forecasts</a> (from around 4:40-6
minutes in) for an example of how to present a model overview in
succinct and clear way. The model is presented in the first three
minutes of <a href="https://youtu.be/MlIetFhu87U">the talk</a>.</p>
<!-- make a list of groups in Slack -->
</div>
</div>
<div id="section-model_functions" class="section level2">
<h2>Seminar 8: Model functions</h2>
<!-- [Model functions](#model_functions) -->
<p>Welcome to the 8th seminar of <strong>Decision Analysis and
Forecasting for Agricultural Development</strong>.Feel free to bring up
any questions or concerns in the Slack or to <a
href="mailto:cory.whitney@uni-bonn.de?subject=%5BSeminar_08%5D%20Decision%20Analysis%20Lecture">Dr. Cory
Whitney</a> or the course tutor.</p>
<p>In this seminar we will go over some of the functions that are useful
for building parts of our models in the <code>decisionSupport</code>
package.</p>
<div id="section-the-value-varier-function" class="section level3">
<h3>The value varier function</h3>
<p>Many variables vary over time and it may not be desirable to ignore
this variation in time series analyses. The <code>vv</code> function
produces time series that contain variation from a specified mean and a
desired coefficient of variation. A trend can be added to this time
series.</p>
<p>The arguments for the <code>vv</code> function include:</p>
<ul>
<li><code>var_mean</code>, which is the mean of the variable to be
varied</li>
<li><code>var_CV</code>, which is the desired coefficient of variation
(in percent)</li>
<li><code>n</code>, which is the integer; number of values to
produce</li>
<li><code>distribution</code>, which is the probability distribution for
the introducing variation. This is currently only implemented for normal
distributions</li>
<li><code>absolute_trend</code>, which is the absolute increment in the
<code>var_mean</code> in each time step. Defaults to <code>NA</code>,
which means no such absolute value trend is present. If both absolute
and relative trends are specified, only original means are used</li>
<li><code>relative_trend</code>, which is the relative trend in the
<code>var_mean</code> in each time step (in percent). Defaults to
<code>NA</code>, which means no such relative value trend is present. If
both absolute and relative trends are specified, only original means are
used</li>
<li><code>lower_limit</code>, which is the lowest possible value for
elements of the resulting vector</li>
<li><code>upper_limit</code>, which is the upper possible value for
elements of the resulting vector</li>
</ul>
<p>Note that only one type of trend can be specified. If neither of the
trend parameters are NA, the function uses only the original means</p>
<p>The function produces a vector of <code>n</code> numeric values,
representing a variable time series, which initially has the mean
<code>var_mean</code>, and then increases according to the specified
trends. Variation is determined by the given coefficient of variation
<code>var_CV</code>.</p>
<p>Create a vector with the <code>vv</code> function and plot with the
base R <code>plot</code> function.</p>
<div class="tutorial-exercise" data-label="reports-seminar-vv"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code># reduce var_CV to 5 and change n to 40. Name the output &#39;valvar&#39; and plot with base R  
vv(var_mean = 100, 
   var_CV = 10, 
   n = 30)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support"
data-label="reports-seminar-vv-solution" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>valvar &lt;- vv(var_mean = 100, 
             var_CV = 5, 
             n = 40)

plot(valvar)</code></pre>
</div>
<p>Use the <code>absolute_trend</code> argument and plot with the base R
<code>plot</code> function. The absolute trend is a raw number added
each year, i.e. we add <code>5</code> to each time step in the following
example.</p>
<div class="tutorial-exercise"
data-label="reports-seminar-absolute_trend" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code># reduce var_mean to 50 and make absolute_trend 10. Name the output &#39;valvar&#39; and plot with base R 
vv(var_mean = 100, 
           var_CV = 10, 
           n = 30, 
           absolute_trend = 5)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support"
data-label="reports-seminar-absolute_trend-solution" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>valvar &lt;- vv(var_mean = 50, 
           var_CV = 10, 
           n = 30, 
           absolute_trend = 10)

plot(valvar)</code></pre>
</div>
<p>Use the <code>relative_trend</code> argument and plot with the base R
<code>plot</code> function.</p>
<div class="tutorial-exercise"
data-label="reports-seminar-relative_trend" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code># reduce var_CV to 5 and change n to 40. Name the output &#39;valvar&#39; and plot with base R 
vv(var_mean = 100, 
             var_CV = 10, 
             n = 30, 
             relative_trend = 5)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support"
data-label="reports-seminar-relative_trend-solution" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>valvar &lt;- vv(var_mean = 100, 
             var_CV = 5, 
             n = 40, 
             relative_trend = 5)

plot(valvar)</code></pre>
</div>
</div>
<div id="section-simulate-occurrence-of-random-events"
class="section level3">
<h3>Simulate occurrence of random events</h3>
<p>In many simulations, certain events can either occur or not, and
values for dependent variables can depend on which of the cases occurs.
This function randomly simulates whether events occur and returns output
values accordingly. The outputs can be single values or series of
values, with the option of introducing artificial variation into this
dataset.</p>
<p>The arguments for the <code>chance_event</code> function include:</p>
<ul>
<li><code>chance</code>, which is the probability that the risky event
will occur (between 0 and 1)</li>
<li><code>value_if</code>, which is the output value in case the event
occurs. This can be either a single numeric value or a numeric vector.
Defaults to 1.</li>
<li><code>value_if_not</code>, which is the output value in case the
event does not occur. This can be either a single numeric value or a
numeric vector. If it is a vector, it must have the same length as
<code>value_if</code></li>
<li><code>n</code>, which is the number of times the risky event is
simulated. This is ignored if <code>length(value_if)&gt;1</code>.</li>
<li><code>CV_if</code>, which is the coefficient of variation for
introducing randomness into the value_if data set. This defaults to 0
for no artificial variation. See documentation for the <code>vv</code>
function for details. <code>CV_if_not</code>, which is the coefficient
of variation for introducing randomness into the value_if_not data set.
This defaults to the value for <code>CV_if.</code> See documentation for
the <code>vv</code> function for details.</li>
<li><code>one_draw</code>, which is the boolean coefficient indicating
if event occurrence is determined only once (<code>TRUE</code>) with
results applying to all elements of the results vector, or if event
occurrence is determined independently for each element
(<code>FALSE</code> is the default).</li>
</ul>
<p>The <code>chance_event</code> function provides a numeric vector of
length <code>n</code>, containing outputs of a probabilistic simulation
that assigns <code>value_if</code> if the event occurs, or
<code>value_if_not</code> if is does not occur (both optionally with
artificial variation).</p>
<div class="tutorial-exercise" data-label="reports-seminar-chance-event"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code># decrease the chance and value_if by half and repeat 20 times. Name the output &#39;chancevar&#39; and plot with base R 
chance_event(chance = 0.5, 
             value_if = 6, 
             n = 10)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support"
data-label="reports-seminar-chance-event-solution" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>chancevar &lt;- chance_event(chance = 0.25, 
             value_if = 3, 
             n = 20)

plot(chancevar)</code></pre>
</div>
<p>Use the <code>value_if_not</code> and <code>CV_if</code>
arguments.</p>
<div class="tutorial-exercise"
data-label="reports-seminar-chance-event-2" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code># make the chance 10 percent, the value_if 5 and the value_if_not 20, repeat 100 times and reduce the coefficient of variation by half. Name the output &#39;chancevar&#39; and plot with base R.
chance_event(chance = 0.5,
             value_if = 1,
             value_if_not = 5,
             n = 10,
             CV_if = 20)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support"
data-label="reports-seminar-chance-event-2-solution" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>chancevar &lt;- chance_event(chance = 0.1,
             value_if = 5,
             value_if_not = 20,
             n = 100,
             CV_if = 10)

plot(chancevar)</code></pre>
</div>
</div>
<div id="section-gompertz-function-yield-prediction-for-perennials"
class="section level3">
<h3>Gompertz function yield prediction for perennials</h3>
<p>Yields of trees or other perennial plants have to be simulated in
order to predict the outcomes of many interventions. Unlike annual
crops, however, trees normally yield nothing for a few years after
planting, following which yields gradually increase until they reach a
tree-specific maximum. This is simulated with this function, which
assumes that a Gompertz function is a good way to describe this (based
on the general shape of the curve, not on extensive research…). The
function assumes that yields remain at the maximum level, once this is
reached. For long simulations, this may not be a valid assumption! The
function parameters are estimated based on yield estimates for two
points in time, which the user can specify. They are described by a year
number and by a percentage of the maximum yield that is attained at that
time.</p>
<p>The arguments for the <code>gompertz_yield</code> function
include:</p>
<ul>
<li><code>max_harvest</code>, which is the maximum harvest from the tree
(in number of fruits, kg or other units)</li>
<li><code>time_to_first_yield_estimate</code>, which is the year (or
other time unit) number, for which the first yield estimate is provided
by <code>first_yield_estimate_percent</code></li>
<li><code>time_to_second_yield_estimate</code>, which is the year (or
other time unit) number, for which the second yield estimate is provided
by <code>second_yield_estimate_percent</code></li>
<li><code>first_yield_estimate_percent</code> percentage of the maximum
yield that is attained in the year (or other time unit) given by
<code>time_to_first_yield_estimate</code></li>
<li><code>second_yield_estimate_percent</code> percentage of the maximum
yield that is attained in the year (or other time unit) given by
<code>time_to_second_yield_estimate</code></li>
<li><code>n_years</code>, which is the number of years to run the
simulation</li>
<li><code>var_CV</code>, which is the coefficient indicating how much
variation should be introduced into the time series. If this is one
numeric value, then this value is used for all variables. The default is
0, for a time series with no artificially introduced variation. See
description of the <code>vv</code> function for more details on
this.</li>
<li><code>no_yield_before_first_estimate</code>, which is the boolean
variable indicating whether yields before the time unit indicated by
<code>time_to_first_yield_estimate</code>should be 0.</li>
</ul>
<p>The function provides a vector of <code>n_years</code> numeric
values, useful for describing the simulated yield of perennial crops.
This starts at 0 and, if the simulation runs for a sufficient number of
years, approaches <code>max_harvest.</code> If <code>var_CV&gt;0</code>,
this time series includes artificial variation.</p>
<div class="tutorial-exercise"
data-label="reports-seminar-gompertz_yield" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code># create a vector where the maximum harvest is 500, which is achieved in 10 years (i.e. 100% by the second yield estimate)
gompertz_yield(max_harvest = 1000,
               time_to_first_yield_estimate = 5,
               first_yield_estimate_percent = 10,
               time_to_second_yield_estimate = 15,
               second_yield_estimate_percent = 90,
               n_years = 30)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support"
data-label="reports-seminar-gompertz_yield-solution" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>gompertz_yield(max_harvest = 500,
               time_to_first_yield_estimate = 5,
               first_yield_estimate_percent = 10,
               time_to_second_yield_estimate = 10,
               second_yield_estimate_percent = 100,
               n_years = 30)</code></pre>
</div>
<p>In the seminar you will provide the updated version of your decision
model.</p>
</div>
<div id="section-correlation" class="section level3">
<h3>Bonus: Adding correlation to the model</h3>
<p>To add correlation to your model visit the <a
href="http://htmlpreview.github.io/?https://github.com/CWWhitney/Decision_Analysis_Course/blob/main/correlations/correlations_example.html">Adding
correlations to Decision Analysis models</a> vignette.</p>
<!-- # ```{r child="Seminar_07_calibration_seminar.Rmd"} -->
<!-- # ``` -->
</div>
</div>
<div id="section-voi" class="section level2">
<h2>Seminar 9: Value of Information</h2>
<!-- reference with [Models](#model_share_seminar) -->
<p>Welcome to the Value of Information seminar for the course
<strong>Decision Analysis and Forecasting for Agricultural
Development</strong>.Feel free to bring up any questions or concerns in
the Slack or to <a
href="mailto:cory.whitney@uni-bonn.de?subject=%5BSeminar_4%5D%20Decision%20Analysis%20Lecture">Dr. Cory
Whitney</a> or the course tutor.</p>
<p>In this seminar we will build on what we learned in the <a
href="#section-decision_models">Decision Models</a> lecture and the <a
href="#section-model_programming">Model programming part 1</a> seminar
to learn more about how to generate useful forecasts for communicating
model results. We will implement another Monte Carlo simulation.</p>
<p>In the <a href="#section-model_programming_cont">Model programming
part 2</a> seminar we generated a model called
<code>example_mc_simulation</code>. As a quick refresher change the plot
of the results of that model from <code>boxplot_density</code> to
<code>smooth_simple_overlay</code> by using the <code>method</code>
argument in the <code>plot_distributions</code> function.</p>
<div class="tutorial-exercise" data-label="forecasts_plot_distribution"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>plot_distributions(mcSimulation_object = example_mc_simulation,
                   vars = &quot;final_result&quot;,
                   method = &quot;boxplot_density&quot;,
                   old_names = &quot;final_result&quot;,
                   new_names = &quot;Outcome distribution for profits&quot;)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support"
data-label="forecasts_plot_distribution-solution" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>plot_distributions(mcSimulation_object = example_mc_simulation,
                   vars = &quot;final_result&quot;,
                   method = &quot;smooth_simple_overlay&quot;,
                   old_names = &quot;final_result&quot;,
                   new_names = &quot;Outcome distribution for profits&quot;)</code></pre>
</div>
<div id="section-making-forecasts" class="section level3">
<h3>Making forecasts</h3>
<p>First let’s look at a case study on agroforestry interventions in
Northwest Vietnam <span class="citation">(Do, Luedeling, and Whitney
2020)</span>.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/FZfACcoX4O0" frameborder="0" allowfullscreen>
</iframe>
<div class="panel panel-default tutorial-question-container">
<div data-label="do-forecasts-question-1" class="tutorial-question panel-body">
<div id="do-forecasts-question-1-answer_container" class="shiny-html-output"></div>
<div id="do-forecasts-question-1-message_container" class="shiny-html-output"></div>
<div id="do-forecasts-question-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="do-forecasts-question-2" class="tutorial-question panel-body">
<div id="do-forecasts-question-2-answer_container" class="shiny-html-output"></div>
<div id="do-forecasts-question-2-message_container" class="shiny-html-output"></div>
<div id="do-forecasts-question-2-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="do-forecasts-question-3" class="tutorial-question panel-body">
<div id="do-forecasts-question-3-answer_container" class="shiny-html-output"></div>
<div id="do-forecasts-question-3-message_container" class="shiny-html-output"></div>
<div id="do-forecasts-question-3-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
<div id="section-value-of-information-and-value-of-control"
class="section level3">
<h3>Value of information and value of control</h3>
<!-- Cory's EVPI video -->
<p>Since the model inputs are uncertain variables, there is always a
chance that the decision turns out to be wrong. Gathering new data to
inform the decision, will lead to (on average) better decisions. But how
much better? Is it worth the measuring effort? What if we not only
<em>measure</em> but even <em>manipulate</em> the model inputs? These
concepts are informally known as “value of clairvoyance” and “value of
wizardry”. Please watch the following lecture by Johannes Kopton and
enter the magical world of decision analysis:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/g-MxM_2rWJg" frameborder="0" allowfullscreen>
</iframe>
<div class="panel panel-default tutorial-question-container">
<div data-label="johannes-forecasts-question-1" class="tutorial-question panel-body">
<div id="johannes-forecasts-question-1-answer_container" class="shiny-html-output"></div>
<div id="johannes-forecasts-question-1-message_container" class="shiny-html-output"></div>
<div id="johannes-forecasts-question-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="johannes-forecasts-question-2" class="tutorial-question panel-body">
<div id="johannes-forecasts-question-2-answer_container" class="shiny-html-output"></div>
<div id="johannes-forecasts-question-2-message_container" class="shiny-html-output"></div>
<div id="johannes-forecasts-question-2-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="schiffers-forecasts-question-2" class="tutorial-question panel-body">
<div id="schiffers-forecasts-question-2-answer_container" class="shiny-html-output"></div>
<div id="schiffers-forecasts-question-2-message_container" class="shiny-html-output"></div>
<div id="schiffers-forecasts-question-2-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel panel-default tutorial-question-container">
<div data-label="schiffers-forecasts-question-3" class="tutorial-question panel-body">
<div id="schiffers-forecasts-question-3-answer_container" class="shiny-html-output"></div>
<div id="schiffers-forecasts-question-3-message_container" class="shiny-html-output"></div>
<div id="schiffers-forecasts-question-3-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<p>Technically we assess the possibility of making the wrong decision
with a payoff matrix <span class="math inline">\(Rij\)</span> with the
row index <span class="math inline">\(i\)</span> describing a choice and
the column index <span class="math inline">\(j\)</span> describing a
random variable that the decision maker does not yet have knowledge of,
that has probability <span class="math inline">\(pj\)</span> of being in
state <span class="math inline">\(j\)</span>. If the decision maker has
to choose <span class="math inline">\(i\)</span> without knowing the
value of <span class="math inline">\(j\)</span>, the best choice is the
one that maximizes the expected value:</p>
<p><span class="math inline">\({\mbox{EMV}}=\max _{i}\sum
_{j}p_{j}R_{ij}\)</span></p>
<p>where <span class="math inline">\(\sum _{j}p_{j}R_{ij}\)</span> is
the expected payoff for action <span class="math inline">\(i\)</span>
i.e. the expectation value, and <span
class="math inline">\({\mbox{EMV}}=\max _{i}\)</span> is choosing the
maximum of these expectations for all available actions.</p>
<p>However, with perfect knowledge of <span
class="math inline">\(j\)</span>, the decision maker would choose a
value of <span class="math inline">\(i\)</span> that optimizes the
expectation for that specific <span class="math inline">\(j\)</span>.
Therefore, the expected value given perfect information is</p>
<p><span class="math inline">\({\mbox{EV}}|{\mbox{PI}}=\sum
_{j}p_{j}(\max _{i}R_{ij})\)</span></p>
<p>where <span class="math inline">\(p_{j}\)</span> is the probability
that the system is in state <span class="math inline">\(j\)</span>, and
<span class="math inline">\(R_{ij}\)</span> is the pay-off if one
follows action <span class="math inline">\(i\)</span> while the system
is in state <span class="math inline">\(j\)</span>. Here <span
class="math inline">\((\max_{i}R_{ij})\)</span> indicates the best
choice of action <span class="math inline">\(i\)</span> for each state
<span class="math inline">\(j\)</span>.</p>
<p>The expected value of perfect information is the difference between
these two quantities,</p>
<p><span
class="math inline">\({\mbox{EVPI}}={\mbox{EV}}|{\mbox{PI}}-{\mbox{EMV}}\)</span></p>
<p>This difference describes, in expectation, how much larger a value
the decision maker can hope to obtain by knowing <span
class="math inline">\(j\)</span> and picking the best <span
class="math inline">\(i\)</span> for that <span
class="math inline">\(j\)</span>, as compared to picking a value of
<span class="math inline">\(i\)</span> before <span
class="math inline">\(j\)</span> is known. Since <span
class="math inline">\(EV|PI\)</span> is necessarily greater than or
equal to <span class="math inline">\(EMV\)</span>, <span
class="math inline">\(EVPI\)</span> is always non-negative.</p>
</div>
<div id="section-projection-to-latent-structures"
class="section level3">
<h3>Projection to Latent Structures</h3>
<p>Projection to Latent Structures (PLS), also sometimes known as
Partial Least Squares regression is a multivariate statistical technique
that can deal with multiple collinear dependent and independent
variables <span class="citation">(Wold, Sjöström, and Eriksson
2001)</span>. It can be used as another means to assess the outcomes of
a Monte Carlo model. Read more in <a
href="http://users.cecs.anu.edu.au/~kee/pls.pdf">‘A Simple Explanation
of Partial Least Squares’ by Kee Siong Ng</a>.</p>
<p>Variable Importance in Projection (VIP) scores estimate the
importance of each variable in the projection used in a PLS mode. VIP is
a parameter used for calculating the cumulative measure of the influence
of individual <span class="math inline">\(X\)</span>-variables on the
model. For a given PLS dimension, <span
class="math inline">\(a\)</span>, the squared PLS weight <span
class="math inline">\((W_a^2\)</span> of that term is multiplied by the
explained sum of squares (<span class="math inline">\(SS\)</span>) of
that <span class="math inline">\(PLS\)</span> dimension; and the value
obtained is then divided by the total explained <span
class="math inline">\(SS\)</span> by the PLS model and multiplied by the
number of terms in the model. The final <span
class="math inline">\(VIP\)</span> is the square root of that
number.</p>
<p><span class="math inline">\(VIP_{PLS} = K\times
(\frac{[\sum_{a=1}^{A}(W_{a}^{2} \times
SSY_{comp,a})]}{SSY_{cum}})\)</span></p>
<p>Technically, VIP is a weighted combination overall components of the
squared PLS weights (<span class="math inline">\(Wa\)</span>), where
<span class="math inline">\(SSY_{comp,a}\)</span> is the sum of squares
of <span class="math inline">\(Y\)</span> explained by component <span
class="math inline">\(a\)</span>, <span class="math inline">\(A\)</span>
is the total number of components, and <span
class="math inline">\(K\)</span> is the total number of variables. The
average VIP is equal to 1 because the <span
class="math inline">\(SS\)</span> of all VIP values is equal to the
number of variables in <span class="math inline">\(X\)</span>. A
variable with a VIP Score close to or greater than 1 (one) can be
considered important in given model. The input is a PLS model and the
output is a set of column vectors equal in length to the number of
variables included in the model. See <span
class="citation">Galindo-Prieto, Eriksson, and Trygg (2014)</span> for a
detailed description of variations of VIP analysis.</p>
<p>In the seminar we will go into detail abut how to calculate PLS and
the VIP with the built-in functions of the <code>decisionSupport</code>
package.</p>
</div>
</div>
<div id="section-communicating" class="section level2">
<h2>Seminar 10: Communicating Decision Support</h2>
<p>Welcome to seminar 10 of <strong>Decision Analysis and Forecasting
for Agricultural Development</strong>. Feel free to bring up any
questions or concerns in the Slack or to <a
href="mailto:cory.whitney@uni-bonn.de?subject=%5BLecture_6%5D%20Decision%20Analysis%20Lecture">Dr. Cory
Whitney</a> or the course tutor.</p>
<div id="section-communicating-results-of-decision-analysis-models"
class="section level3">
<h3>Communicating results of Decision Analysis models</h3>
<p>The results of a Monte Carlo model are not always easy to interpret
and to communicate about. One important step in communicating these
often very large data sets is with good visualization. In previous
lectures and seminars we have covered the basics of plotting the
distributions of model results for comparisons between decision options.
In this lecture we will build on what we learned in the <a
href="#section-decision_models">Decision Models</a> lecture and the <a
href="#section-model_programming">Model programming</a> seminar to learn
more about how to generate useful plots for communicating model
results.</p>
<p>In the <a href="#section-model_programming">Model programming</a>
seminar we generated a model called <code>example_mc_simulation</code>.
As a quick refresher change the plot of the results of that model from
<code>hist_simple_overlay</code> to <code>boxplot_density</code> by
using the <code>method</code> argument in the
<code>plot_distributions</code> function.</p>
<!-- Add reminders about this data and these steps later :) 

input_estimates <- read.csv("data/input_estimates.csv")

model_function <- function(){
  income <- Yield * Market_price
  overall_costs <- Labor_cost + Management_cost
  final_result <- income - overall_costs
  return(list(final_result = final_result))
}

example_mc_simulation <- decisionSupport::mcSimulation(estimate = decisionSupport::as.estimate(input_estimates),
                                      model_function = model_function,
                                      numberOfModelRuns = 10000,
                                      functionSyntax = "plainNames")

-->
<div class="tutorial-exercise"
data-label="communicating-plot_distribution" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>plot_distributions(mcSimulation_object = example_mc_simulation,
                   vars = &quot;final_result&quot;,
                   method = &quot;hist_simple_overlay&quot;,
                   old_names = &quot;final_result&quot;,
                   new_names = &quot;Outcome distribution for profits&quot;)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support"
data-label="communicating-plot_distribution-solution"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>plot_distributions(mcSimulation_object = example_mc_simulation,
                   vars = &quot;final_result&quot;,
                   method = &quot;boxplot_density&quot;,
                   old_names = &quot;final_result&quot;,
                   new_names = &quot;Outcome distribution for profits&quot;)</code></pre>
</div>
</div>
<div id="section-plot-many-results-together" class="section level3">
<h3>Plot many results together</h3>
<p>We can use the <code>compound_figure</code> function to create a
simple compound figure of model results and analyses of a binary
decision (do or do not do). The figure includes the distribution of the
expected outcome, the expected cashflow, as well as the variable
importance and the value of information.</p>
<div class="tutorial-exercise"
data-label="communicating-compound_figure" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code># Create the estimate object:

cost_benefit_table &lt;- data.frame(label = c(&quot;Revenue&quot;, &quot;Costs&quot;),
                                  variable = c(&quot;revenue&quot;, &quot;costs&quot;),
                                  distribution = c(&quot;norm&quot;, &quot;norm&quot;),
                                  lower = c(100,  500),
                                  median = c(NA, NA),
                                  upper = c(10000, 5000))

# (a) Define the model function without name for the return value:

profit1 &lt;- function() {
  Decision &lt;- revenue - costs
  cashflow &lt;- rnorm(rep(revenue, 20))
  return(list(Revenues = revenue,
              Costs = costs, 
              cashflow = cashflow, 
              Decision = Decision))
}

compound_figure(model = profit1, 
input_table = cost_benefit_table, 
decision_var_name = &quot;Decision&quot;,
cashflow_var_name = &quot;cashflow&quot;,
model_runs = 1e2, 
distribution_method = &#39;smooth_simple_overlay&#39;)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
</div>
<div id="section-other-visualization-options" class="section level3">
<h3>Other visualization options</h3>
<p>Here we demonstrate a few more various graphical options to visualize
uncertainty intervals of outcomes of Monte Carlo simulations. We create
a data set of yield distributions of three different farming practices
and use the function <code>mcmc_intervals()</code> from the
<code>bayesplot</code> library to plot the data set <span
class="citation">(Gabry and Mahr 2024)</span>.</p>
<div class="tutorial-exercise"
data-label="communicating-bayes_plot-mcmc_intervals" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>test &lt;- data.frame(&quot;practice 1&quot; = rnorm(n = 1000, mean = 8, sd = 1.5), 
                   &quot;practice 2&quot; = rnorm(n = 1000, mean = 7, sd = 1), 
                   &quot;practice 3&quot; = rnorm(n = 1000, mean = 5, sd = 0.5))


color_scheme_set(&quot;red&quot;)
mcmc_intervals(test,prob = 0.5,prob_outer = 0.9,point_est = &quot;median&quot;)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<p>Do the same with the with <code>mcmc_areas()</code> function from the
<code>bayesplot</code> library <span class="citation">(Gabry and Mahr
2024)</span>.</p>
<div class="tutorial-exercise"
data-label="communicating-bayes_plot-mcmc_areas" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>test &lt;- data.frame(&quot;practice 1&quot; = rnorm(n = 1000, mean = 8, sd = 1.5), 
                   &quot;practice 2&quot; = rnorm(n = 1000, mean = 7, sd = 1), 
                   &quot;practice 3&quot; = rnorm(n = 1000, mean = 5, sd = 0.5))

color_scheme_set(&quot;blue&quot;)

mcmc_areas(test,prob = 0.9,point_est = &quot;median&quot;)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
</div>
<div id="section-comparative-density-curves" class="section level3">
<h3>Comparative density curves</h3>
<p>We can also use <code>geom_density()</code>in <code>ggplot2</code> to
compare the spread of different distributions <span
class="citation">(Wickham et al. 2024)</span>:</p>
<div class="tutorial-exercise" data-label="communicating-geom_density"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>test &lt;- data.frame(&quot;practice 1&quot; = rnorm(n = 1000, mean = 8, sd = 1.5), 
                   &quot;practice 2&quot; = rnorm(n = 1000, mean = 7, sd = 1), 
                   &quot;practice 3&quot; = rnorm(n = 1000, mean = 5, sd = 0.5))

stacked_test &lt;- stack(test)

ggplot(stacked_test, 
       aes(x=values,group=ind,fill=ind )) +
        geom_density(colour=NA,alpha=.5) +
        ylab(&quot;Probability density&quot;) +
        xlab(&quot;Yield&quot;)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
</div>
<div id="section-comparative-histogram" class="section level3">
<h3>Comparative histogram</h3>
<p>Use <code>ggplot2</code> <code>geom_histogram()</code>function to
show the histogram of the data in comparison:</p>
<div class="tutorial-exercise" data-label="communicating-geom_histogram"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>test &lt;- data.frame(&quot;practice 1&quot; = rnorm(n = 1000, mean = 8, sd = 1.5), 
                   &quot;practice 2&quot; = rnorm(n = 1000, mean = 7, sd = 1), 
                   &quot;practice 3&quot; = rnorm(n = 1000, mean = 5, sd = 0.5))

stacked_test &lt;- stack(test)

ggplot(stacked_test,aes(x=values))+ 
  geom_histogram(data=subset(stacked_test,ind ==&#39;practice.1&#39;),
                 aes(fill = ind), alpha = 0.5, bins = 150) + 
  geom_histogram(data=subset(stacked_test,ind == &#39;practice.2&#39;),
                 aes(fill = ind), alpha = 0.5, bins = 150) +
  geom_histogram(data=subset(stacked_test,ind == &#39;practice.3&#39;),
                 aes(fill = ind), alpha = 0.5, bins = 150) </code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
</div>
<div id="section-plot-cashflow" class="section level3">
<h3>Plot cashflow</h3>
<p>The <code>plot_cashflow</code> function from the
<code>decisionSupport</code> package <span class="citation">(Luedeling
et al. 2024)</span> creates a cashflow plot of the returned list of
related outputs from the <code>mcSimulation</code> function using
ggplot2 <span class="citation">(Wickham et al. 2024)</span>. The
function automatically defines quantiles (5 to 95% and 25 to 75%) as
well as a value for the median.</p>
<div class="tutorial-exercise" data-label="communicating-plot_cashflow"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code># Plotting the cashflow:

# Create the estimate object (for multiple options):

variable = c(&quot;revenue_option1&quot;, &quot;costs_option1&quot;, &quot;n_years&quot;, 
             &quot;revenue_option2&quot;, &quot;costs_option2&quot;)
distribution = c(&quot;norm&quot;, &quot;norm&quot;, &quot;const&quot;, &quot;norm&quot;, &quot;norm&quot;)
lower = c(10000,  5000, 20, 8000,  500)
upper = c(100000, 50000, 20, 80000,  30000)

costBenefitEstimate &lt;- as.estimate(variable, distribution, lower, upper)

# Define the model function without name for the return value:

profit1 &lt;- function(x) {
  
cashflow_option1 &lt;- vv(revenue_option1 - costs_option1, n = n_years, var_CV = 100)
cashflow_option2 &lt;- vv(revenue_option2 - costs_option2, n = n_years, var_CV = 100)

return(list(Revenues_option1 = revenue_option1,
            Revenues_option2 = revenue_option2,
            Costs_option1 = costs_option1,
            Costs_option2 = costs_option2,
            Cashflow_option_one = cashflow_option1,
            Cashflow_option_two = cashflow_option2))
}

# Perform the Monte Carlo simulation:

predictionProfit1 &lt;- mcSimulation(estimate = costBenefitEstimate,
                                  model_function = profit1,
                                  numberOfModelRuns = 10000,
                                  functionSyntax = &quot;plainNames&quot;)


# Plot the cashflow distribution over time

plot_cashflow(mcSimulation_object = predictionProfit1, cashflow_var_name = &quot;Cashflow_option_one&quot;,
              x_axis_name = &quot;Years with intervention&quot;,
              y_axis_name = &quot;Annual cashflow in USD&quot;,
              color_25_75 = &quot;green4&quot;, color_5_95 = &quot;green1&quot;,
              color_median = &quot;red&quot;)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<p>Plot the cashflow with panels to compare the cashflow distribution
over time for multiple decision options:</p>
<div class="tutorial-exercise"
data-label="communicating-plot_cashflow-panels" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code># Plotting the cashflow:

# Create the estimate object (for multiple options):

variable = c(&quot;revenue_option1&quot;, &quot;costs_option1&quot;, &quot;n_years&quot;, 
             &quot;revenue_option2&quot;, &quot;costs_option2&quot;)
distribution = c(&quot;norm&quot;, &quot;norm&quot;, &quot;const&quot;, &quot;norm&quot;, &quot;norm&quot;)
lower = c(10000,  5000, 10, 8000,  500)
upper = c(100000, 50000, 10, 80000,  30000)

costBenefitEstimate &lt;- as.estimate(variable, distribution, lower, upper)

# Define the model function without name for the return value:

profit1 &lt;- function(x) {
  
cashflow_option1 &lt;- vv(revenue_option1 - costs_option1, n = n_years, var_CV = 100)
cashflow_option2 &lt;- vv(revenue_option2 - costs_option2, n = n_years, var_CV = 100)

return(list(Revenues_option1 = revenue_option1,
            Revenues_option2 = revenue_option2,
            Costs_option1 = costs_option1,
            Costs_option2 = costs_option2,
            Cashflow_option_one = cashflow_option1,
            Cashflow_option_two = cashflow_option2))
}

# Perform the Monte Carlo simulation:

predictionProfit1 &lt;- mcSimulation(estimate = costBenefitEstimate,
                                  model_function = profit1,
                                  numberOfModelRuns = 10000,
                                  functionSyntax = &quot;plainNames&quot;)

plot_cashflow(mcSimulation_object = predictionProfit1, 
              cashflow_var_name = c(&quot;Cashflow_option_one&quot;, &quot;Cashflow_option_two&quot;),
              x_axis_name = &quot;Years with intervention&quot;,
              y_axis_name = &quot;Annual cashflow in USD&quot;,
              color_25_75 = &quot;green4&quot;, color_5_95 = &quot;green1&quot;,
              color_median = &quot;red&quot;, 
              facet_labels = c(&quot;Option 1&quot;, &quot;Option 2&quot;))</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
</div>
<div id="section-reading-1" class="section level3">
<h3>Reading</h3>
<!-- ?NEXT YEAR ADD THIS HERE AND REMOVE FROM other CHAPTER?-->
<!-- This week we will read and discuss 'Decision Analysis of Agroforestry Options Reveals Adoption Risks for Resource-Poor Farmers' by @do_decision_2020. -->
<!-- Do, Hoa, Eike Luedeling, and Cory Whitney. “Decision Analysis of Agroforestry Options Reveals Adoption Risks for Resource-Poor Farmers.” Agronomy for Sustainable Development 40, no. 3 (June 2020): 20. https://doi.org/10.1007/s13593-020-00624-5. -->
<p>This week we will read and discuss chapter four of Hubbard’s ‘How To
Measure Anything’.</p>
<p>Hubbard, Douglas W. How To Measure Anything: Finding the Value of
Intangibles in Business. 2nd ed. Vol. Second Edition. Hoboken, New
Jersey: John Wiley &amp; Sons, 2014.</p>
</div>
<div id="section-bonus-more-plotting-options" class="section level3">
<h3>Bonus, More plotting options</h3>
</div>
<div id="section-violin-box-plot-overlays" class="section level3">
<h3>Violin &amp; box plot overlays</h3>
<p>Here we use R’s built in <code>OrchardSprays</code> data to run the
example from the <code>tidyverse</code> <a
href="https://ggplot2.tidyverse.org/reference/geom_violin.html">Violin
plot</a> examples <span class="citation">(Wickham 2023)</span>.</p>
<div class="tutorial-exercise" data-label="communicating-violin"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>ggplot(OrchardSprays, aes(y = decrease, x = treatment, fill = treatment))+
  geom_violin() +
  geom_boxplot(width = 0.1) +
  theme(legend.position = &quot;none&quot;)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
</div>
<div id="section-ridge-line-plot" class="section level3">
<h3>Ridge line plot</h3>
<p>A variation on the example from <a
href="https://edav.info/ridgeline.html">edav</a> using the
<code>ggridges</code> library <span class="citation">(Wilke
2024)</span>.</p>
<div class="tutorial-exercise" data-label="communicating-ggridges"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>ggplot(OrchardSprays, 
       aes(x=decrease,y = treatment,fill = treatment)) +
  geom_density_ridges_gradient(scale=2) + 
  theme_ridges() +
  theme(legend.position = &quot;none&quot;)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<p>More examples on the <code>rdrr.io</code> <a
href="https://rdrr.io/cran/ggridges/man/geom_ridgeline_gradient.html">CRAN</a>
website.</p>
<p>To see more options for plotting high dimensional data visit the <a
href="http://htmlpreview.github.io/?https://github.com/hortibonn/Plotting-High-Dimensional-Data/blob/master/HighDimensionalData.html">High
Domensional Data</a> vignette.</p>
<!-- ```{r child="Seminar_08_models_seminar.Rmd"} -->
<!-- ``` -->
<!-- ```{r child="Seminar_09_forecast_seminar.Rmd"} -->
<!-- ``` -->
<!-- ```{r child="Seminar_11_Writing.Rmd"} -->
<!-- ``` -->
</div>
</div>
<div id="section-impressum-und-datenschutzerklärung"
class="section level2">
<h2><a href="https://www.inres.uni-bonn.de/en/impressum">Impressum und
Datenschutzerklärung</a></h2>
</div>
<div id="section-references" class="section level2">
<h2>References</h2>
<p>
<script type="application/shiny-prerendered" data-context="server-start">
knitr::opts_chunk$set(echo = TRUE)
# library(devtools)
# install.packages(c("bayesplot", "DiagrammeR", "ggcorrplot", "ggplot2", "ggrepel", "ggridges", "ggthemes", "igraph", "knitr", "learnr", "pander", "plyr", "rmarkdown", "tidyverse"))
# devtools::install_github("eikeluedeling/decisionSupport")
# library(brms)
library(bayesplot)
library(decisionSupport)
library(DiagrammeR)
library(ggcorrplot)
library(ggplot2)
library(ggrepel)
library(ggridges)
library(ggthemes)
library(igraph)
library(knitr)
library(learnr)
library(pander)
library(plyr)
library(rmarkdown)
library(tidyverse)

# load the data (use write.csv for data created in RMD)
stakeholder <- read.csv("data/stakeholder.csv")
input_estimates <- read.csv("data/input_estimates.csv")
example_decision_inputs <- read.csv("data/example_decision_inputs.csv")
input_table <- read.csv("data/example_input_table.csv")
hail_estimates <- read.csv("data/hail_estimates.csv")

###### Chile function #######

# create the model function
model_function <- function(){
  income <- Yield * Market_price
  overall_costs <- Labor_cost + Management_cost
  final_result <- income - overall_costs
  return(list(final_result = final_result))
}

# Run the Monte Carlo simulation using the model function ####
example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),
                              model_function = model_function,
                              numberOfModelRuns = 100,
                              functionSyntax = "plainNames")
###### make variables function #######
# make variables
make_variables <- function(est,n=1)
{ x<-random(rho=est, n=n)
    for(i in colnames(x)) assign(i,
     as.numeric(x[1,i]),envir=.GlobalEnv)
}

# suppress warnings
options(warn = - 1)

###### burkina function #######
# second decision function
example_decision_function <- function(x, varnames){

  # calculate ex-ante risks: impact the implementation of interventions ####
  intervention_NonPopInvolvEvent <-
    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)

  # pre-calculate common random draws for all intervention model runs ####

  # profits from Tropical Livestock Units (TLU)
  TLU <- vv(TLU_no_intervention, var_CV, n_years)
  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)

  # benefits of fruit
  precalc_intervention_fruit_benefits <-
    vv(intervention_fruit_area_ha, var_CV, n_years) *
    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *
    vv(intervention_fruit_profit_USD_t, var_CV, n_years)

  # benefits of vegetables
  precalc_intervention_vegetable_benefits <-
    vv(intervention_vegetable_area_ha, var_CV, n_years) *
    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *
    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)

  # benefits of rain-fed crops
  precalc_intervention_rainfed_crop_benefits <-
    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *
    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *
    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)

  #  Intervention ####

  for (decision_intervention_strips in c(FALSE,TRUE))
      {

  if (decision_intervention_strips)
  {
    intervention_strips <- TRUE
    intervention_strips_PlanningCost <- TRUE
    intervention_strips_cost <- TRUE
  } else
  {
    intervention_strips <- FALSE
    intervention_strips_PlanningCost <- FALSE
    intervention_strips_cost <- FALSE
  }

  if (intervention_NonPopInvolvEvent) {
    intervention_strips <- FALSE
    intervention_strips_cost <- FALSE
  }

  # Costs ####
  if (intervention_strips_cost) {
    cost_intervention_strips <-
      intervention_adaptation_cost +
      intervention_tech_devices_cost +
      intervention_nursery_cost +
      intervention_wells_cost +
      intervention_training_cost +
      intervention_mngmt_oprt_cost +
      intervention_mngmt_follow_cost +
      intervention_mngmt_audit_cost
  } else
    cost_intervention_strips <- 0

  if (intervention_strips_PlanningCost) {
    plan_cost_intervention_strips <-
      intervention_communication_cost + intervention_zoning_cost
  } else
    plan_cost_intervention_strips <- 0

  maintenance_cost <- rep(0, n_years)

  if (intervention_strips)
    maintenance_cost <-
    maintenance_cost + vv(maintenance_intervention_strips,
                          var_CV, n_years)

  intervention_cost <- maintenance_cost
  intervention_cost[1] <-
    intervention_cost[1] +
    cost_intervention_strips +
    plan_cost_intervention_strips


  # Benefits from  cultivation in the intervention strips ####

  intervention_fruit_benefits <-
    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits
  intervention_vegetable_benefits <-
    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits
  intervention_rainfed_crop_benefits <-
    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits

  # Total benefits from crop production (agricultural development and riparian zone) ####
  crop_production <-
    intervention_fruit_benefits +
    intervention_vegetable_benefits +
    intervention_rainfed_crop_benefits

  # Benefits from livestock ####
  # The following allows considering that intervention strips may
  # restrict access to the reservoir for livestock.

  if (intervention_strips)
    TLU_intervention <-
    TLU * (1 + change_TLU_intervention_perc / 100)
  else
    TLU_intervention <- TLU

  if (decision_intervention_strips){
    livestock_benefits <- TLU_intervention * TLU_profit
    total_benefits <- crop_production + livestock_benefits
    net_benefits <- total_benefits - intervention_cost
    result_interv <- net_benefits}


  if (!decision_intervention_strips){
    livestock_benefits <- TLU_no_intervention * TLU_profit
    total_benefits <- livestock_benefits
    net_benefits <- total_benefits - intervention_cost
    result_n_interv <- net_benefits}

    } #close intervention loop bracket

NPV_interv <-
  discount(result_interv, discount_rate, calculate_NPV = TRUE)

NPV_n_interv <-
  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)

# Beware, if you do not name your outputs
# (left-hand side of the equal sign) in the return section,
# the variables will be called output_1, _2, etc.

return(list(Interv_NPV = NPV_interv,
            NO_Interv_NPV = NPV_n_interv,
            NPV_decision_do = NPV_interv - NPV_n_interv,
            Cashflow_decision_do = result_interv - result_n_interv))
}
###### run burkina model #######
# second simulation
mcSimulation_results <- decisionSupport::mcSimulation(
  estimate = decisionSupport::estimate_read_csv("data/example_input_table.csv"),
  model_function = example_decision_function,
  numberOfModelRuns = 100,
  functionSyntax = "plainNames"
)

###### burkina evpi #####
mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])

evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = "Interv_NPV")
###### Burkina pls ########
pls_result <- plsr.mcSimulation(object = mcSimulation_results,
                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)
###### HAIL Risk #######
hail_function <- function(){

yields <- vv(var_mean = yield,
             var_CV = var_CV,
             n = 20)

prices <- vv(var_mean = price,
             var_CV = var_CV,
             n = 20)

# use 'rep' to simulate the investment
# only in the first year (assuming the net lasts 20 years)
invest_costs <- c(initial_investment, rep(0, 19))

# use 'chance_event' to adjust yield for potential hail
hail_adjusted_yield <- chance_event(chance = p_hail,
                                    value_if = 0,
                                    value_if_not = yield,
                                    n = 20)

# calculate profit without net
profit_no_net <- hail_adjusted_yield*prices

# calculate profit with the net
profit_with_net <- (yields*prices)-invest_costs

# use 'discount' to calculate net present value
# 'discount_rate' is expressed in percent
NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)
NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)

# calculate the overall NPV of the decision (do - don't do)
NPV_decision <- NPV_net-NPV_no_net

return(list(NPV_no_net =  NPV_no_net,
            NPV_net =  NPV_net,
            NPV_decision = NPV_decision))
}

###### Run HAIL Risk model #######
hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),
                              model_function = hail_function,
                              numberOfModelRuns = 100,
                              functionSyntax = "plainNames")

######  HAIL Risk evpi #######

mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,
                                 hail_mc_simulation$y[3])

evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,
                   first_out_var = "NPV_decision")


# brms stuff with Schiffers
# library(brms, warn.conflicts=F, quietly=T)
# priors <- c(set_prior("normal(200, 5)", coef = "rasseN"), set_prior("normal(210, 5)", coef = "rasseK"))
# rasse <- c("K", "K", "K", "N", "N", "N", "N", "N", "N")
# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)
# daten <- data.frame(rasse=rasse, ll=ll)
# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::register_http_handlers(session, metadata = NULL)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::prepare_tutorial_state(session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::i18n_observe_tutorial_language(input, session)
</script>


<script type="application/shiny-prerendered" data-context="server">
session$onSessionEnded(function() {
        learnr:::event_trigger(session, "session_stop")
      })
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "question-ken-robinson", 
    question = structure("What is the premise of Sir Ken Robinson’s TED Talk?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_5e70838", 
        option = "We need more sciences and maths in education.", 
        value = "We need more sciences and maths in education.", 
        label = structure("We need more sciences and maths in education.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_6066001", 
        option = "Creativity is as important as literacy in education.", 
        value = "Creativity is as important as literacy in education.", 
        label = structure("Creativity is as important as literacy in education.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_ac82355", 
        option = "We are educating people out of their creative capacities.", 
        value = "We are educating people out of their creative capacities.", 
        label = structure("We are educating people out of their creative capacities.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_5aa20a4", 
        option = "Teachers are often invited to dinner parties.", 
        value = "Teachers are often invited to dinner parties.", 
        label = structure("Teachers are often invited to dinner parties.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://www.ted.com/talks/sir_ken_robinson_do_schools_kill_creativity\">the TED talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-ken-robinson-answer", question = "question-ken-robinson"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 494941843.269525, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "question-1", question = structure("What is the main concern of Decision Analysis for agricultural development?", html = TRUE, class = c("html", 
"character")), answers = list(structure(list(id = "lnr_ans_7fb6546", 
    option = "How do people make decisions?", value = "How do people make decisions?", 
    label = structure("How do people make decisions?", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_974336b", 
    option = "What does the data tell us about development?", 
    value = "What does the data tell us about development?", 
    label = structure("What does the data tell us about development?", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_cf12d5e", 
    option = "How will decisions influence future sustainability?", 
    value = "How will decisions influence future sustainability?", 
    label = structure("How will decisions influence future sustainability?", html = TRUE, class = c("html", 
    "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_2bcae53", 
    option = "How can we perform analyses of big data for policy advice?", 
    value = "How can we perform analyses of big data for policy advice?", 
    label = structure("How can we perform analyses of big data for policy advice?", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
"character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
"character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
"character")), try_again = structure("Watch <a href=\"https://youtu.be/7P2YI9-smfU\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
"character")), incorrect = structure("Watch <a href=\"https://youtu.be/7P2YI9-smfU\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
"character")), message = NULL, post_message = NULL), ids = list(
    answer = "question-1-answer", question = "question-1"), loading = NULL, 
    random_answer_order = FALSE, allow_retry = TRUE, seed = 460348187.785634, 
    options = list()), class = c("learnr_radio", "tutorial_question"
)), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "question-2", question = structure("Why do we apply Decision Analysis in agricultural development research?", html = TRUE, class = c("html", 
"character")), answers = list(structure(list(id = "lnr_ans_9dc8cac", 
    option = "To make sense of large data sets.", value = "To make sense of large data sets.", 
    label = structure("To make sense of large data sets.", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_e357171", 
    option = "To better understand how decisions are made.", 
    value = "To better understand how decisions are made.", label = structure("To better understand how decisions are made.", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_45755a5", 
    option = "To offer support in decision making under uncertainty.", 
    value = "To offer support in decision making under uncertainty.", 
    label = structure("To offer support in decision making under uncertainty.", html = TRUE, class = c("html", 
    "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_e9f766f", 
    option = "To generate new data sets.", value = "To generate new data sets.", 
    label = structure("To generate new data sets.", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
"character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
"character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
"character")), try_again = structure("Watch <a href=\"https://youtu.be/7P2YI9-smfU\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
"character")), incorrect = structure("Watch <a href=\"https://youtu.be/7P2YI9-smfU\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
"character")), message = NULL, post_message = NULL), ids = list(
    answer = "question-2-answer", question = "question-2"), loading = NULL, 
    random_answer_order = FALSE, allow_retry = TRUE, seed = 666557940.68961, 
    options = list()), class = c("learnr_radio", "tutorial_question"
)), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "question-3", question = structure("What is one of the main benefits of Decision Analysis approaches?", html = TRUE, class = c("html", 
"character")), answers = list(structure(list(id = "lnr_ans_53c0041", 
    option = "Making use of existing knowledge to build forecasts.", 
    value = "Making use of existing knowledge to build forecasts.", 
    label = structure("Making use of existing knowledge to build forecasts.", html = TRUE, class = c("html", 
    "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_6e66873", 
    option = "Helping to better understand how and why decisions are made.", 
    value = "Helping to better understand how and why decisions are made.", 
    label = structure("Helping to better understand how and why decisions are made.", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_15f34be", 
    option = "Making use of big data to generate models.", value = "Making use of big data to generate models.", 
    label = structure("Making use of big data to generate models.", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_cb3ea71", 
    option = "Support decisions by using existing measurements and evidence for which we have high certainty.", 
    value = "Support decisions by using existing measurements and evidence for which we have high certainty.", 
    label = structure("Support decisions by using existing measurements and evidence for which we have high certainty.", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
"character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
"character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
"character")), try_again = structure("Watch <a href=\"https://youtu.be/7P2YI9-smfU\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
"character")), incorrect = structure("Watch <a href=\"https://youtu.be/7P2YI9-smfU\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
"character")), message = NULL, post_message = NULL), ids = list(
    answer = "question-3-answer", question = "question-3"), loading = NULL, 
    random_answer_order = FALSE, allow_retry = TRUE, seed = 1743419974.18816, 
    options = list()), class = c("learnr_radio", "tutorial_question"
)), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "question-DA-approaches_define", 
    question = structure("How do we define a decision in the context of Decision Analysis?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_530e998", 
        option = "An irrevocable allocation of resources.", value = "An irrevocable allocation of resources.", 
        label = structure("An irrevocable allocation of resources.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_9f6b074", 
        option = "Something that can be reversed.", value = "Something that can be reversed.", 
        label = structure("Something that can be reversed.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_a18f604", 
        option = "A logical choice between different options", 
        value = "A logical choice between different options", 
        label = structure("A logical choice between different options", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/IRZZokPD3GU\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-DA-approaches_define-answer", question = "question-DA-approaches_define"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 600606955.720321, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "question-DA-approaches_impact-pathway", 
    question = structure("Why do we use impact pathways?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_84b3d55", 
        option = "To think beforehand what might occur and what the outcomes might be, to expose weak links.", 
        value = "To think beforehand what might occur and what the outcomes might be, to expose weak links.", 
        label = structure("To think beforehand what might occur and what the outcomes might be, to expose weak links.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_d008c54", 
        option = "To make sense of the processes that we have already carried out.", 
        value = "To make sense of the processes that we have already carried out.", 
        label = structure("To make sense of the processes that we have already carried out.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_ec1f7c6", 
        option = "To generate new data sets.", value = "To generate new data sets.", 
        label = structure("To generate new data sets.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Watch <a href=\"https://youtu.be/IRZZokPD3GU\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/IRZZokPD3GU\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-DA-approaches_impact-pathway-answer", 
        question = "question-DA-approaches_impact-pathway"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1187049417.44724, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "question-DA-approaches_trans-research", 
    question = structure("What is the underlying idea in transdisciplinary approaches for agricultural development?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_4e8a6f6", 
        option = "Farmers should be part of the research process.", 
        value = "Farmers should be part of the research process.", 
        label = structure("Farmers should be part of the research process.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_32ac294", 
        option = "Getting academics from different fields to work together.", 
        value = "Getting academics from different fields to work together.", 
        label = structure("Getting academics from different fields to work together.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_319a0ef", 
        option = "Making use of big data to generate models.", 
        value = "Making use of big data to generate models.", 
        label = structure("Making use of big data to generate models.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Watch <a href=\"https://youtu.be/IRZZokPD3GU\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/IRZZokPD3GU\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-DA-approaches_trans-research-answer", 
        question = "question-DA-approaches_trans-research"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 2052845181.54407, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "question-karl-claxton", 
    question = structure("What is the premise of Karl Claxton’s Talk?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_52324a0", 
        option = "We need to use all available evidence.", value = "We need to use all available evidence.", 
        label = structure("We need to use all available evidence.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_9d039ac", 
        option = "We can assign distributions to the parameters and sample randomly with Monte Carlo.", 
        value = "We can assign distributions to the parameters and sample randomly with Monte Carlo.", 
        label = structure("We can assign distributions to the parameters and sample randomly with Monte Carlo.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_afc76f0", 
        option = "We need to characterize decision uncertainty.", 
        value = "We need to characterize decision uncertainty.", 
        label = structure("We need to characterize decision uncertainty.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_39c5e78", 
        option = "We need to get a lot of data and do analysis of these data sets.", 
        value = "We need to get a lot of data and do analysis of these data sets.", 
        label = structure("We need to get a lot of data and do analysis of these data sets.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://www.youtube.com/watch?v=f1E3Iv8juC0\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-karl-claxton-answer", question = "question-karl-claxton"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 280376267.86944, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "question-define-decision-part-01-01", 
    question = structure("Who do you think came up with these topics?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_2ca07ce", 
        option = "Local government.", value = "Local government.", 
        label = structure("Local government.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_583fd8b", 
        option = "Development NGO.", value = "Development NGO.", 
        label = structure("Development NGO.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_85ace9e", 
        option = "Researchers.", value = "Researchers.", label = structure("Researchers.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_11bdcdd", 
        option = "Farmers.", value = "Farmers.", label = structure("Farmers.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Watch <a href=\"https://youtu.be/pPIs7MwgMe0\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/pPIs7MwgMe0\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-define-decision-part-01-01-answer", 
        question = "question-define-decision-part-01-01"), loading = NULL, 
    random_answer_order = FALSE, allow_retry = TRUE, seed = 783758708.135034, 
    options = list()), class = c("learnr_radio", "tutorial_question"
)), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "question-define-decision-part-01-02", 
    question = structure("What is missing?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_41ca763", 
        option = "Decision-maker", value = "Decision-maker", 
        label = structure("Decision-maker", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_a0a3658", 
        option = "Concrete options", value = "Concrete options", 
        label = structure("Concrete options", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_a6f5d86", 
        option = "Relevant issue in agricultural development", 
        value = "Relevant issue in agricultural development", 
        label = structure("Relevant issue in agricultural development", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_da66dab", 
        option = "Clear context", value = "Clear context", label = structure("Clear context", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/pPIs7MwgMe0\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-define-decision-part-01-02-answer", 
        question = "question-define-decision-part-01-02"), loading = NULL, 
    random_answer_order = FALSE, allow_retry = TRUE, seed = 62845220.4707354, 
    options = list()), class = c("learnr_checkbox", "tutorial_question"
)), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "question-define-decision-part-03-01", 
    question = structure("Which aspects of research should you pay attention to, if you want to maximize the <em>credibility<\u002fem> of your research?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_5eb6b99", 
        option = "Relationship with stakeholders", value = "Relationship with stakeholders", 
        label = structure("Relationship with stakeholders", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_88483f5", 
        option = "Robust statistics", value = "Robust statistics", 
        label = structure("Robust statistics", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_c275b02", 
        option = "Inclusive, participatory research", value = "Inclusive, participatory research", 
        label = structure("Inclusive, participatory research", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_2226797", 
        option = "Clear experimental design", value = "Clear experimental design", 
        label = structure("Clear experimental design", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_97e347", 
        option = "Alignment with policies and plans", value = "Alignment with policies and plans", 
        label = structure("Alignment with policies and plans", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_c9783c0", 
        option = "Choices actually considered by local actors", 
        value = "Choices actually considered by local actors", 
        label = structure("Choices actually considered by local actors", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/pPIs7MwgMe0\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-define-decision-part-03-01-answer", 
        question = "question-define-decision-part-03-01"), loading = NULL, 
    random_answer_order = FALSE, allow_retry = TRUE, seed = 699189839.674414, 
    options = list()), class = c("learnr_checkbox", "tutorial_question"
)), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "question-define-decision-part-03-02", 
    question = structure("Which aspects of research should you pay attention to, if you want to maximize the <em>salience<\u002fem> of your research?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_ff9af6f", 
        option = "Relationship with stakeholders", value = "Relationship with stakeholders", 
        label = structure("Relationship with stakeholders", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_a2a1a10", 
        option = "Robust statistics", value = "Robust statistics", 
        label = structure("Robust statistics", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_7c5db85", 
        option = "Inclusive, participatory research", value = "Inclusive, participatory research", 
        label = structure("Inclusive, participatory research", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_f53e16c", 
        option = "Clear experimental design", value = "Clear experimental design", 
        label = structure("Clear experimental design", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_f986b6f", 
        option = "Alignment with policies and plans", value = "Alignment with policies and plans", 
        label = structure("Alignment with policies and plans", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_55fa5e9", 
        option = "Choices actually considered by local actors", 
        value = "Choices actually considered by local actors", 
        label = structure("Choices actually considered by local actors", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/pPIs7MwgMe0\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-define-decision-part-03-02-answer", 
        question = "question-define-decision-part-03-02"), loading = NULL, 
    random_answer_order = FALSE, allow_retry = TRUE, seed = 1051408998.5104, 
    options = list()), class = c("learnr_checkbox", "tutorial_question"
)), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "question-define-decision-part-03-03", 
    question = structure("Which aspects of research should you pay attention to, if you want to maximize the <em>legitimacy<\u002fem> of your research?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_3cf2461", 
        option = "Relationship with stakeholders", value = "Relationship with stakeholders", 
        label = structure("Relationship with stakeholders", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_b8635d8", 
        option = "Robust statistics", value = "Robust statistics", 
        label = structure("Robust statistics", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_c76d90a", 
        option = "Inclusive, participatory research", value = "Inclusive, participatory research", 
        label = structure("Inclusive, participatory research", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_e4e7404", 
        option = "Involvement of local leaders", value = "Involvement of local leaders", 
        label = structure("Involvement of local leaders", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_19641ca", 
        option = "Clear experimental design", value = "Clear experimental design", 
        label = structure("Clear experimental design", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_e9a9615", 
        option = "Alignment with policies and plans", value = "Alignment with policies and plans", 
        label = structure("Alignment with policies and plans", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_b72b5e5", 
        option = "Choices actually considered by local actors", 
        value = "Choices actually considered by local actors", 
        label = structure("Choices actually considered by local actors", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/pPIs7MwgMe0\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-define-decision-part-03-03-answer", 
        question = "question-define-decision-part-03-03"), loading = NULL, 
    random_answer_order = FALSE, allow_retry = TRUE, seed = 461235129.285221, 
    options = list()), class = c("learnr_checkbox", "tutorial_question"
)), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "question-quality-decision", 
    question = structure("The criteria for decision quality include:", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_63f6768", 
        option = "Large datasets with empirical evidence and measurements of expected outcomes.", 
        value = "Large datasets with empirical evidence and measurements of expected outcomes.", 
        label = structure("Large datasets with empirical evidence and measurements of expected outcomes.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_afc848a", 
        option = "Preferences about decision outcomes.", value = "Preferences about decision outcomes.", 
        label = structure("Preferences about decision outcomes.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_7757fd6", 
        option = "Certainty about what the decision outcome will be.", 
        value = "Certainty about what the decision outcome will be.", 
        label = structure("Certainty about what the decision outcome will be.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_f6eedfd", 
        option = "Clear framing of decision alternatives.", value = "Clear framing of decision alternatives.", 
        label = structure("Clear framing of decision alternatives.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/r_BbXfMbfe0\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-quality-decision-answer", question = "question-quality-decision"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 248901664.384096, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "question-howard", 
    question = structure("According to the Howard and Abbas reading, which of the following represents a decision?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_c206ad8", 
        option = "I have decided that I do not like vanilla ice cream.", 
        value = "I have decided that I do not like vanilla ice cream.", 
        label = structure("I have decided that I do not like vanilla ice cream.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_615a459", 
        option = "I have decided that the stock market will go up.", 
        value = "I have decided that the stock market will go up.", 
        label = structure("I have decided that the stock market will go up.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_5475aa9", 
        option = "I have decided to ace the test.", value = "I have decided to ace the test.", 
        label = structure("I have decided to ace the test.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_db1f0d9", 
        option = "I have decided to diet, and I have thrown away the ice cream in the freezer.", 
        value = "I have decided to diet, and I have thrown away the ice cream in the freezer.", 
        label = structure("I have decided to diet, and I have thrown away the ice cream in the freezer.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Look at page 31 ‘What is a Decision’ and try again.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Look at page 31 ‘What is a Decision’ and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-howard-answer", question = "question-howard"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 453770790.288697, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "question-1-Decision-analysis-case-Water-for-Wajir", 
    question = structure("What was the purpose of the inception workshop?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_a7e222e", 
        option = "Elicit information about specific variables", 
        value = "Elicit information about specific variables", 
        label = structure("Elicit information about specific variables", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_eb8ae9a", 
        option = "Secure political buy-in", value = "Secure political buy-in", 
        label = structure("Secure political buy-in", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_fc42e18", 
        option = "Develop a conceptual model of the decision", 
        value = "Develop a conceptual model of the decision", 
        label = structure("Develop a conceptual model of the decision", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_6f3dbc1", 
        option = "Allow stakeholders to state their expectations of the project", 
        value = "Allow stakeholders to state their expectations of the project", 
        label = structure("Allow stakeholders to state their expectations of the project", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/imQ1Gn-E7wQ\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-1-Decision-analysis-case-Water-for-Wajir-answer", 
        question = "question-1-Decision-analysis-case-Water-for-Wajir"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1329745507.38079, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "question-2-Decision-analysis-case-Water-for-Wajir", 
    question = structure("What impacts are likely to arise from the freshwater pipeline?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_4b261fb", 
        option = "Improved sanitation and public health in Wajir", 
        value = "Improved sanitation and public health in Wajir", 
        label = structure("Improved sanitation and public health in Wajir", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_db1457c", 
        option = "Irrigated agriculture in Wajir", value = "Irrigated agriculture in Wajir", 
        label = structure("Irrigated agriculture in Wajir", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_70ed817", 
        option = "Acceleration of economic development in Wajir", 
        value = "Acceleration of economic development in Wajir", 
        label = structure("Acceleration of economic development in Wajir", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_4d06bc6", 
        option = "Free water supply for residents of Wajir", 
        value = "Free water supply for residents of Wajir", label = structure("Free water supply for residents of Wajir", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/imQ1Gn-E7wQ\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-2-Decision-analysis-case-Water-for-Wajir-answer", 
        question = "question-2-Decision-analysis-case-Water-for-Wajir"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1756956851.68185, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "question-3-Decision-analysis-case-Water-for-Wajir", 
    question = structure("What are good strategies in consolidating range estimates by different people?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_4bc6b5c", 
        option = "Average lower and upper bounds of intervals across all participants", 
        value = "Average lower and upper bounds of intervals across all participants", 
        label = structure("Average lower and upper bounds of intervals across all participants", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_bea88c", 
        option = "For outliers, find out if experts understood the question correctly", 
        value = "For outliers, find out if experts understood the question correctly", 
        label = structure("For outliers, find out if experts understood the question correctly", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_df44e34", 
        option = "Consider which experts have are most knowledgeable on each estimated variable", 
        value = "Consider which experts have are most knowledgeable on each estimated variable", 
        label = structure("Consider which experts have are most knowledgeable on each estimated variable", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_8780a0e", 
        option = "Consider each expert's performance in previous estimation exercises", 
        value = "Consider each expert's performance in previous estimation exercises", 
        label = structure("Consider each expert’s performance in previous estimation exercises", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/imQ1Gn-E7wQ\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-3-Decision-analysis-case-Water-for-Wajir-answer", 
        question = "question-3-Decision-analysis-case-Water-for-Wajir"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1243519911.92094, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "question-sweet_cherry-1", 
    question = structure("How did the decision of implementing covers in sweet cherry orchards emerge in this study?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_ffa406d", 
        option = "From a thorough literature review.", value = "From a thorough literature review.", 
        label = structure("From a thorough literature review.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_e8d9ad0", 
        option = "Based on the previous knowledge of the researchers.", 
        value = "Based on the previous knowledge of the researchers.", 
        label = structure("Based on the previous knowledge of the researchers.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_eb0938f", 
        option = "From farmers' concerns regarding future weather scenarios.", 
        value = "From farmers' concerns regarding future weather scenarios.", 
        label = structure("From farmers’ concerns regarding future weather scenarios.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_a5a5c1c", 
        option = "From consumers asking for sweet cherries of good quality.", 
        value = "From consumers asking for sweet cherries of good quality.", 
        label = structure("From consumers asking for sweet cherries of good quality.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Watch <a href=\"https://youtu.be/kpsqzkeg53Y\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/kpsqzkeg53Y\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-sweet_cherry-1-answer", question = "question-sweet_cherry-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1536066557.28471, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "question-sweet_cherry-2", 
    question = structure("Based on the Net Present Value, what would be the best recommendation for farmers in northern Chile?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_1eeb3e6", 
        option = "Farmers should implement covers to improve yields.", 
        value = "Farmers should implement covers to improve yields.", 
        label = structure("Farmers should implement covers to improve yields.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_e60c78a", 
        option = "NPV values suggest that implementing covers in northern Chile may be not necessary.", 
        value = "NPV values suggest that implementing covers in northern Chile may be not necessary.", 
        label = structure("NPV values suggest that implementing covers in northern Chile may be not necessary.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_438fecd", 
        option = "The results do not allow making a clear recomendation.", 
        value = "The results do not allow making a clear recomendation.", 
        label = structure("The results do not allow making a clear recomendation.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Watch <a href=\"https://youtu.be/kpsqzkeg53Y\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/kpsqzkeg53Y\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-sweet_cherry-2-answer", question = "question-sweet_cherry-2"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1888254985.12071, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "questio-sweet_cherry-3", 
    question = structure("Considering the results of the EVPI analysis, farmers should spend more resources to gather additional information on:", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_ca47e7a", 
        option = "Yield", value = "Yield", label = structure("Yield", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_4070b7d", 
        option = "Market price", value = "Market price", label = structure("Market price", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_397162f", 
        option = "Yield lost to low firmness", value = "Yield lost to low firmness", 
        label = structure("Yield lost to low firmness", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Watch <a href=\"https://youtu.be/kpsqzkeg53Y\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/kpsqzkeg53Y\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "questio-sweet_cherry-3-answer", question = "questio-sweet_cherry-3"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1461443246.31946, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "participatory-methods-01", 
    question = structure("Which of these is considered a modeling principle in decision analysis?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_51f00f9", 
        option = "Incorporate all important aspects into models", 
        value = "Incorporate all important aspects into models", 
        label = structure("Incorporate all important aspects into models", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_a253b0a", 
        option = "Build models primarily based on data from expirements and measurements", 
        value = "Build models primarily based on data from expirements and measurements", 
        label = structure("Build models primarily based on data from expirements and measurements", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_4e4f16b", 
        option = "Model system using all sources of information, including local and expert knowledge", 
        value = "Model system using all sources of information, including local and expert knowledge", 
        label = structure("Model system using all sources of information, including local and expert knowledge", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_b83172b", 
        option = "Explicitly consider uncertainties about inputs, processes and outputs", 
        value = "Explicitly consider uncertainties about inputs, processes and outputs", 
        label = structure("Explicitly consider uncertainties about inputs, processes and outputs", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/X2ZjG6o7u3o\">the video<\u002fa>.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "participatory-methods-01-answer", question = "participatory-methods-01"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 415097346.306705, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "question-stakeholder-management-01", 
    question = structure("Which of these entities do you think could be a stakeholder?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_f9bb1e7", 
        option = "Individuals", value = "Individuals", label = structure("Individuals", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_9faa4a2", 
        option = "Groups", value = "Groups", label = structure("Groups", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_fdbde79", 
        option = "Non-human entities like forests", value = "Non-human entities like forests", 
        label = structure("Non-human entities like forests", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_5ebdb93", 
        option = "None of these could be a stakeholder", value = "None of these could be a stakeholder", 
        label = structure("None of these could be a stakeholder", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/Xax-JxlmQf0\">the video<\u002fa> at slide 6 and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-stakeholder-management-01-answer", 
        question = "question-stakeholder-management-01"), loading = NULL, 
    random_answer_order = FALSE, allow_retry = TRUE, seed = 575842416.731853, 
    options = list()), class = c("learnr_checkbox", "tutorial_question"
)), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "question-stakeholder-management-02", 
    question = structure("What could you do if there are too many experts identified?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_518025e", 
        option = "Keep them all", value = "Keep them all", label = structure("Keep them all", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_899f30", 
        option = "Randomly select a few", value = "Randomly select a few", 
        label = structure("Randomly select a few", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_bd67e5d", 
        option = "Use criteria to categorize them and select a  representative group", 
        value = "Use criteria to categorize them and select a  representative group", 
        label = structure("Use criteria to categorize them and select a  representative group", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Watch <a href=\"https://youtu.be/Xax-JxlmQf0\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/Xax-JxlmQf0\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-stakeholder-management-02-answer", 
        question = "question-stakeholder-management-02"), loading = NULL, 
    random_answer_order = FALSE, allow_retry = TRUE, seed = 1403560272.34642, 
    options = list()), class = c("learnr_radio", "tutorial_question"
)), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "bayesian-thinking-question-1", 
    question = structure("What are characteristics of the frequentist approach to science?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_65158dd", 
        option = "We should consider prior knowledge.", value = "We should consider prior knowledge.", 
        label = structure("We should consider prior knowledge.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_2689dcc", 
        option = "All knowledge should be derived objectively from data.", 
        value = "All knowledge should be derived objectively from data.", 
        label = structure("All knowledge should be derived objectively from data.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_8d6afa3", 
        option = "Research can not produce insights into causal relationships.", 
        value = "Research can not produce insights into causal relationships.", 
        label = structure("Research can not produce insights into causal relationships.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/_Hf7tYwTEZw\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "bayesian-thinking-question-1-answer", question = "bayesian-thinking-question-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 905531931.078329, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "bayesian-thinking-question-2", 
    question = structure("What are the main challenges to Bayesian science today?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_fb69a49", 
        option = "Lack of computational power.", value = "Lack of computational power.", 
        label = structure("Lack of computational power.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_33aad58", 
        option = "Reliable characterization of the state of knowledge, i.e. definition of good Bayesian priors", 
        value = "Reliable characterization of the state of knowledge, i.e. definition of good Bayesian priors", 
        label = structure("Reliable characterization of the state of knowledge, i.e. definition of good Bayesian priors", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_96cccf2", 
        option = "The scientific community does not accept Bayesian methods.", 
        value = "The scientific community does not accept Bayesian methods.", 
        label = structure("The scientific community does not accept Bayesian methods.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Watch <a href=\"https://youtu.be/_Hf7tYwTEZw\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/_Hf7tYwTEZw\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "bayesian-thinking-question-2-answer", question = "bayesian-thinking-question-2"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1658157547.22786, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "bayesian-thinking-question-3", 
    question = structure("What is a Bayesian Prior?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_75d7b81", 
        option = "A probability distribution that expresses beliefs about a quantity before some evidence is taken into account.", 
        value = "A probability distribution that expresses beliefs about a quantity before some evidence is taken into account.", 
        label = structure("A probability distribution that expresses beliefs about a quantity before some evidence is taken into account.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_9444fe5", 
        option = "The understanding about a phenomenon before any research or formal data collection.", 
        value = "The understanding about a phenomenon before any research or formal data collection.", 
        label = structure("The understanding about a phenomenon before any research or formal data collection.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_f67c548", 
        option = "An expression of the existing state of knowledge that takes into account all existing data and available knowledge.", 
        value = "An expression of the existing state of knowledge that takes into account all existing data and available knowledge.", 
        label = structure("An expression of the existing state of knowledge that takes into account all existing data and available knowledge.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_7c594d6", 
        option = "A good reflection of reality based on the existing state of knowledge.", 
        value = "A good reflection of reality based on the existing state of knowledge.", 
        label = structure("A good reflection of reality based on the existing state of knowledge.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/_Hf7tYwTEZw\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "bayesian-thinking-question-3-answer", question = "bayesian-thinking-question-3"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 286343522.866661, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "bayesian-thinking-question-4", 
    question = structure("What is a posterior belief?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_afec852", 
        option = "Revised or updated probability after taking into consideration new information.", 
        value = "Revised or updated probability after taking into consideration new information.", 
        label = structure("Revised or updated probability after taking into consideration new information.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_fbe34", 
        option = "Updated understanding after having applied some observations or research to our prior belief.", 
        value = "Updated understanding after having applied some observations or research to our prior belief.", 
        label = structure("Updated understanding after having applied some observations or research to our prior belief.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_f409db3", 
        option = "An expression of a belief that is the result of long term trials and investigations.", 
        value = "An expression of a belief that is the result of long term trials and investigations.", 
        label = structure("An expression of a belief that is the result of long term trials and investigations.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_58c5c4a", 
        option = "Updated beliefs about values and events after having seen additional information.", 
        value = "Updated beliefs about values and events after having seen additional information.", 
        label = structure("Updated beliefs about values and events after having seen additional information.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_3d4762c", 
        option = "It is the prior probability plus new evidence.", 
        value = "It is the prior probability plus new evidence.", 
        label = structure("It is the prior probability plus new evidence.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/_Hf7tYwTEZw\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "bayesian-thinking-question-4-answer", question = "bayesian-thinking-question-4"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1798982480.66228, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "bayesian-thinking-question-5", 
    question = structure("What are ways that we can define proper priors?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_cd4078a", 
        option = "Perform long term trials to generate a data set from which to generate reliable values.", 
        value = "Perform long term trials to generate a data set from which to generate reliable values.", 
        label = structure("Perform long term trials to generate a data set from which to generate reliable values.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_af8b5f2", 
        option = "Consider your prior beliefs about the distribution of the parameters.", 
        value = "Consider your prior beliefs about the distribution of the parameters.", 
        label = structure("Consider your prior beliefs about the distribution of the parameters.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_60c73", 
        option = "Calibrate ourselves and others who are expected to express knowledge.", 
        value = "Calibrate ourselves and others who are expected to express knowledge.", 
        label = structure("Calibrate ourselves and others who are expected to express knowledge.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_ea7bf1b", 
        option = "Use your intuitive understanding to generate a distribution.", 
        value = "Use your intuitive understanding to generate a distribution.", 
        label = structure("Use your intuitive understanding to generate a distribution.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/_Hf7tYwTEZw\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "bayesian-thinking-question-5-answer", question = "bayesian-thinking-question-5"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1433061866.83268, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "question-explaining-calibration-training-part-01-01", 
    question = structure("What is the intention of decision analysts in measuring things?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_932467", 
        option = "They want to get paid for it.", value = "They want to get paid for it.", 
        label = structure("They want to get paid for it.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_454d104", 
        option = "They want to get precise information.", value = "They want to get precise information.", 
        label = structure("They want to get precise information.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_3755241", 
        option = "They follow what the research project leader tells them to do.", 
        value = "They follow what the research project leader tells them to do.", 
        label = structure("They follow what the research project leader tells them to do.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_7de1d74", 
        option = "They want to reduce their uncertainty.", value = "They want to reduce their uncertainty.", 
        label = structure("They want to reduce their uncertainty.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_c0a6042", 
        option = "They are inspired by Douglas Hubbard to try and measure everything.", 
        value = "They are inspired by Douglas Hubbard to try and measure everything.", 
        label = structure("They are inspired by Douglas Hubbard to try and measure everything.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Watch <a href=\"https://youtu.be/DYAv-LBZaIU\">the video<\u002fa> especially the part\n4:30-5:30 and try again.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/DYAv-LBZaIU\">the video<\u002fa> especially the part\n4:30-5:30 and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-explaining-calibration-training-part-01-01-answer", 
        question = "question-explaining-calibration-training-part-01-01"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 2088417222.5275, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "question-explaining-calibration-training-part-01-02", 
    question = structure("What is calibration?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_32f367", 
        option = "Calibration is a measuring process.", value = "Calibration is a measuring process.", 
        label = structure("Calibration is a measuring process.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_3bebf01", 
        option = "Calibration is a test of measuring devices to make sure they are measuring accurately.", 
        value = "Calibration is a test of measuring devices to make sure they are measuring accurately.", 
        label = structure("Calibration is a test of measuring devices to make sure they are measuring accurately.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_c905170", 
        option = "Calibration tells us which measuring device not to use.", 
        value = "Calibration tells us which measuring device not to use.", 
        label = structure("Calibration tells us which measuring device not to use.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_3301ed1", 
        option = "Calibration tells us the deviation of a measuring device.", 
        value = "Calibration tells us the deviation of a measuring device.", 
        label = structure("Calibration tells us the deviation of a measuring device.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_b1272e7", 
        option = "Calibration helps our experts to get a feeling about their uncertainty.", 
        value = "Calibration helps our experts to get a feeling about their uncertainty.", 
        label = structure("Calibration helps our experts to get a feeling about their uncertainty.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/pPIs7MwgMe0\">the video<\u002fa> especially the part\n12:35-14:15 and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-explaining-calibration-training-part-01-02-answer", 
        question = "question-explaining-calibration-training-part-01-02"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1240038157.42256, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "question-explaining-calibration-training-part-02-01", 
    question = structure("Why do we apply the calibration training process with experts?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_b327f01", 
        option = "To tell them more about the desired field of expertise.", 
        value = "To tell them more about the desired field of expertise.", 
        label = structure("To tell them more about the desired field of expertise.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_62f663e", 
        option = "To train them about their own biases.", value = "To train them about their own biases.", 
        label = structure("To train them about their own biases.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_fb0a7e1", 
        option = "To get to know them better.", value = "To get to know them better.", 
        label = structure("To get to know them better.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_ec154cd", 
        option = "To teach them procedures how to improve the estimation performance.", 
        value = "To teach them procedures how to improve the estimation performance.", 
        label = structure("To teach them procedures how to improve the estimation performance.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_ddb5174", 
        option = "To let them interact with a wheel of fortune.", 
        value = "To let them interact with a wheel of fortune.", 
        label = structure("To let them interact with a wheel of fortune.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_8533c7d", 
        option = "To slow down their answering behaviour and reduce the impact of the affective system.", 
        value = "To slow down their answering behaviour and reduce the impact of the affective system.", 
        label = structure("To slow down their answering behaviour and reduce the impact of the affective system.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/pPIs7MwgMe0\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-explaining-calibration-training-part-02-01-answer", 
        question = "question-explaining-calibration-training-part-02-01"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1599072336.75537, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "question-explaining-calibration-training-part-02-02", 
    question = structure("What is the meaning of ‘Anchoring’?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_74ef6d8", 
        option = "Achoring is the influence of multicolored wheels on estimates.", 
        value = "Achoring is the influence of multicolored wheels on estimates.", 
        label = structure("Achoring is the influence of multicolored wheels on estimates.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_77b1684", 
        option = "Anchoring is specifically about ships and is unrelated to the calibration topic.", 
        value = "Anchoring is specifically about ships and is unrelated to the calibration topic.", 
        label = structure("Anchoring is specifically about ships and is unrelated to the calibration topic.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_416bada", 
        option = "Anchoring is a kind of bias that may influence you to give estimates around a value you have seen or heard, but is not necessarily related to the variable you are estimating.", 
        value = "Anchoring is a kind of bias that may influence you to give estimates around a value you have seen or heard, but is not necessarily related to the variable you are estimating.", 
        label = structure("Anchoring is a kind of bias that may influence you to give estimates around a value you have seen or heard, but is not necessarily related to the variable you are estimating.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Watch <a href=\"https://youtu.be/pPIs7MwgMe0\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/pPIs7MwgMe0\">the video<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "question-explaining-calibration-training-part-02-02-answer", 
        question = "question-explaining-calibration-training-part-02-02"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1993660468.57163, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "analyst-profile-question-1", 
    question = structure("Decision analysts must be able to facilitate, integrate and program. Which of the following skills are particularly important for <em>integration<\u002fem> of knowledge?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_4d7120b", 
        option = "Bring a holistic ambition.", value = "Bring a holistic ambition.", 
        label = structure("Bring a holistic ambition.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_56a6b53", 
        option = "Be nice and personable", value = "Be nice and personable", 
        label = structure("Be nice and personable", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_6d9fd0a", 
        option = "Be curious and inquisitive", value = "Be curious and inquisitive", 
        label = structure("Be curious and inquisitive", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_7a01b19", 
        option = "Able to communicate to diverse audiences", 
        value = "Able to communicate to diverse audiences", label = structure("Able to communicate to diverse audiences", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_fb27b82", 
        option = "Systems thinking", value = "Systems thinking", 
        label = structure("Systems thinking", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_cfbe9f3", 
        option = "Good judgement, good 'calibration'", value = "Good judgement, good 'calibration'", 
        label = structure("Good judgement, good ‘calibration’", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_851a816", 
        option = "Output-oriented", value = "Output-oriented", 
        label = structure("Output-oriented", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_7c665c9", 
        option = "(Ideally) have some experience in modeling", 
        value = "(Ideally) have some experience in modeling", 
        label = structure("(Ideally) have some experience in modeling", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_76eebcc", 
        option = "Be creative and open-minded", value = "Be creative and open-minded", 
        label = structure("Be creative and open-minded", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_682dc4d", 
        option = "Ability to run simulation models, produce decision analysis outputs and interpret results", 
        value = "Ability to run simulation models, produce decision analysis outputs and interpret results", 
        label = structure("Ability to run simulation models, produce decision analysis outputs and interpret results", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/XG0R9ViQm0E\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "analyst-profile-question-1-answer", question = "analyst-profile-question-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 462866069.784461, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "analyst-profile-question-2", 
    question = structure("Which of the following skills are particularly important for <em>facilitation<\u002fem> of knowledge gathering processes?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_5c8aa73", 
        option = "Be creative and open-minded.", value = "Be creative and open-minded.", 
        label = structure("Be creative and open-minded.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_72a18a9", 
        option = "Knowledgeable about decision analysis 'philosophy'.", 
        value = "Knowledgeable about decision analysis 'philosophy'.", 
        label = structure("Knowledgeable about decision analysis ‘philosophy’.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_3ae89a0", 
        option = "Able to communicate to diverse audiences.", 
        value = "Able to communicate to diverse audiences.", 
        label = structure("Able to communicate to diverse audiences.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_add874a", 
        option = "Good judgement, good 'calibration'.", value = "Good judgement, good 'calibration'.", 
        label = structure("Good judgement, good ‘calibration’.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_6e5005b", 
        option = "Knowledgeable about group work techniques", 
        value = "Knowledgeable about group work techniques", 
        label = structure("Knowledgeable about group work techniques", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_5a1164e", 
        option = "Systems thinking.", value = "Systems thinking.", 
        label = structure("Systems thinking.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_1d53aa0", 
        option = "Be nice and personable", value = "Be nice and personable", 
        label = structure("Be nice and personable", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_2b92fe8", 
        option = "Be inclusive", value = "Be inclusive", label = structure("Be inclusive", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_94911fb", 
        option = "Good understanding of how to integrate uncertainty in models", 
        value = "Good understanding of how to integrate uncertainty in models", 
        label = structure("Good understanding of how to integrate uncertainty in models", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_92d6565", 
        option = "Output oriented", value = "Output oriented", 
        label = structure("Output oriented", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_877c8bd", 
        option = "Ability to run simulation models, produce decision analysis outputs and interpret results", 
        value = "Ability to run simulation models, produce decision analysis outputs and interpret results", 
        label = structure("Ability to run simulation models, produce decision analysis outputs and interpret results", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/XG0R9ViQm0E\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "analyst-profile-question-2-answer", question = "analyst-profile-question-2"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1119875472.97852, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "analyst-profile-question-3", 
    question = structure("Which of the following skills are particularly important for <em>programming<\u002fem> decision models?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_55c3d3f", 
        option = "Be curious and inquisitive.", value = "Be curious and inquisitive.", 
        label = structure("Be curious and inquisitive.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_3cc9b3f", 
        option = "Be creative and open-minded.", value = "Be creative and open-minded.", 
        label = structure("Be creative and open-minded.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_22eba6b", 
        option = "Systems thinking.", value = "Systems thinking.", 
        label = structure("Systems thinking.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_a53cd95", 
        option = "Be nice and personable", value = "Be nice and personable", 
        label = structure("Be nice and personable", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_3513a7c", 
        option = "Knowledgeable about decision analysis 'philosophy'.", 
        value = "Knowledgeable about decision analysis 'philosophy'.", 
        label = structure("Knowledgeable about decision analysis ‘philosophy’.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_b3a5c8", 
        option = "Be thorough and meticulous.", value = "Be thorough and meticulous.", 
        label = structure("Be thorough and meticulous.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_9c69410", 
        option = "Be well-versed in using model-building tools.", 
        value = "Be well-versed in using model-building tools.", 
        label = structure("Be well-versed in using model-building tools.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_7872b31", 
        option = "(Ideally) have some experience in modeling", 
        value = "(Ideally) have some experience in modeling", 
        label = structure("(Ideally) have some experience in modeling", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_254fb56", 
        option = "Good understanding of how to integrate uncertainty in models", 
        value = "Good understanding of how to integrate uncertainty in models", 
        label = structure("Good understanding of how to integrate uncertainty in models", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_75d46db", 
        option = "Ability to run simulation models, produce decision analysis outputs and interpret results", 
        value = "Ability to run simulation models, produce decision analysis outputs and interpret results", 
        label = structure("Ability to run simulation models, produce decision analysis outputs and interpret results", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/XG0R9ViQm0E\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "analyst-profile-question-3-answer", question = "analyst-profile-question-3"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1561550828.27285, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-input_table-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-input_table-code-editor`)), session)
output$`tutorial-exercise-input_table-output` <- renderUI({
  `tutorial-exercise-input_table-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "input_table", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "input_table", code = "input_estimates <- data.frame(variable = c(\"Yield\", \"Market_price\", \"Labor_cost\"),\n                    lower = c(6000, 3, 500),\n                    median = NA,\n                    upper = c(14000, 8, 1000),\n                    distribution = c(\"posnorm\", \"posnorm\", \"posnorm\"),\n                    label = c(\"Yield (kg/ha)\", \"Price (USD/kg)\", \"Labor cost (USD/ha)\"),\n                    Description = c(\"Yield in a sweet cherry farm under normal conditions\",\n                                    \"Price of sweet cherry in a normal season\",\n                                    \"Labor costs in a normal season\"))\n\ninput_estimates", 
        opts = list(label = "\"input_table\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = structure(c("input_estimates <- data.frame(variable = c(\"Yield\", \"Market_price\", \"Labor_cost\", \"Management_cost\"),", 
    "                    lower = c(6000, 3, 500, 100),", "                    median = NA,", 
    "                    upper = c(14000, 8, 1000, 2000),", "                    distribution = c(\"posnorm\", \"posnorm\", \"posnorm\", \"posnorm\"),", 
    "                    label = c(\"Yield (kg/ha)\", \"Price (USD/kg)\", \"Labor cost (USD/ha)\", \"Management cost (USD/ha)\"),", 
    "                    Description = c(\"Yield in a sweet cherry farm under normal conditions\",", 
    "                                    \"Price of sweet cherry in a normal season\",", 
    "                                    \"Labor costs in a normal season\", ", 
    "                                    \"Management costs in a normal season\"))", 
    "", "input_estimates"), chunk_opts = list(label = "input_table-solution")), 
    tests = NULL, options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "input_table", exercise = TRUE, 
        code = c("input_estimates <- data.frame(variable = c(\"Yield\", \"Market_price\", \"Labor_cost\"),", 
        "                    lower = c(6000, 3, 500),", "                    median = NA,", 
        "                    upper = c(14000, 8, 1000),", "                    distribution = c(\"posnorm\", \"posnorm\", \"posnorm\"),", 
        "                    label = c(\"Yield (kg/ha)\", \"Price (USD/kg)\", \"Labor cost (USD/ha)\"),", 
        "                    Description = c(\"Yield in a sweet cherry farm under normal conditions\",", 
        "                                    \"Price of sweet cherry in a normal season\",", 
        "                                    \"Labor costs in a normal season\"))", 
        "", "input_estimates"), out.width.px = 624, out.height.px = 384, 
        params.src = "input_table, exercise=TRUE", fig.num = 0, 
        exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-chile-model-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-chile-model-code-editor`)), session)
output$`tutorial-exercise-chile-model-output` <- renderUI({
  `tutorial-exercise-chile-model-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "chile-model", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "chile-model", code = "\nmodel_function <- function(){\n  \n  # Estimate the income in a normal season\n  income <- Yield * Market_price\n  \n  # Estimate the final results from the model\n  final_result <- income - Labor_cost\n  \n  # Generate the list of outputs from the Monte Carlo simulation\n  return(list(final_result = final_result))\n}\n\n# Run the Monte Carlo simulation using the model function\nexample_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),\n                              model_function = model_function,\n                              numberOfModelRuns = 800,\n                              functionSyntax = \"plainNames\")\n\nexample_mc_simulation\n", 
        opts = list(label = "\"chile-model\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = structure(c("", "model_function <- function(){", 
    "  ", "  # Estimate the income in a normal season", "  income <- Yield * Market_price", 
    "  ", "  overall_costs <- Labor_cost + Management_cost", 
    "    ", "  # Estimate the final results from the model", 
    "  final_result <- income - overall_costs", "  ", "  # Generate the list of outputs from the Monte Carlo simulation", 
    "  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function", 
    "example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
    "                              model_function = model_function,", 
    "                              numberOfModelRuns = 800,", 
    "                              functionSyntax = \"plainNames\")", 
    "", "example_mc_simulation", ""), chunk_opts = list(label = "chile-model-solution")), 
    tests = NULL, options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "chile-model", exercise = TRUE, 
        code = c("", "model_function <- function(){", "  ", "  # Estimate the income in a normal season", 
        "  income <- Yield * Market_price", "  ", "  # Estimate the final results from the model", 
        "  final_result <- income - Labor_cost", "  ", "  # Generate the list of outputs from the Monte Carlo simulation", 
        "  return(list(final_result = final_result))", "}", "", 
        "# Run the Monte Carlo simulation using the model function", 
        "example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
        "                              model_function = model_function,", 
        "                              numberOfModelRuns = 800,", 
        "                              functionSyntax = \"plainNames\")", 
        "", "example_mc_simulation", ""), out.width.px = 624, 
        out.height.px = 384, params.src = "chile-model, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-plot_distribution-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-plot_distribution-code-editor`)), session)
output$`tutorial-exercise-plot_distribution-output` <- renderUI({
  `tutorial-exercise-plot_distribution-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "plot_distribution", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "plot_distribution", code = "\nplot_distributions(mcSimulation_object = example_mc_simulation,\n                   vars = \"final_result\",\n                   method = \"boxplot_density\",\n                   old_names = \"final_result\",\n                   new_names = \"Outcome distribution for profits\")\n", 
        opts = list(label = "\"plot_distribution\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = structure(c("", "plot_distributions(mcSimulation_object = example_mc_simulation,", 
    "                   vars = \"final_result\",", "                   method = \"hist_simple_overlay\",", 
    "                   old_names = \"final_result\",", "                   new_names = \"Outcome distribution for profits\")", 
    ""), chunk_opts = list(label = "plot_distribution-solution")), 
    tests = NULL, options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "plot_distribution", exercise = TRUE, 
        code = c("", "plot_distributions(mcSimulation_object = example_mc_simulation,", 
        "                   vars = \"final_result\",", "                   method = \"boxplot_density\",", 
        "                   old_names = \"final_result\",", "                   new_names = \"Outcome distribution for profits\")", 
        ""), out.width.px = 624, out.height.px = 384, params.src = "plot_distribution, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-make_variables_function-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-make_variables_function-code-editor`)), session)
output$`tutorial-exercise-make_variables_function-output` <- renderUI({
  `tutorial-exercise-make_variables_function-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "make_variables_function", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "make_variables_function", code = "make_variables <- function(est,n=1)\n{ x<-random(rho=est, n=n)\n    for(i in colnames(x)) assign(i,\n     as.numeric(x[1,i]),envir=.GlobalEnv)\n}", 
        opts = list(label = "\"make_variables_function\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, tests = NULL, options = list(
        eval = FALSE, echo = TRUE, results = "markup", tidy = FALSE, 
        tidy.opts = NULL, collapse = FALSE, prompt = FALSE, comment = NA, 
        highlight = FALSE, size = "normalsize", background = "#F7F7F7", 
        strip.white = TRUE, cache = 0, cache.path = "Index_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "make_variables_function", 
        exercise = TRUE, code = c("make_variables <- function(est,n=1)", 
        "{ x<-random(rho=est, n=n)", "    for(i in colnames(x)) assign(i,", 
        "     as.numeric(x[1,i]),envir=.GlobalEnv)", "}"), out.width.px = 624, 
        out.height.px = 384, params.src = "make_variables_function, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-make_variables-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-make_variables-code-editor`)), session)
output$`tutorial-exercise-make_variables-output` <- renderUI({
  `tutorial-exercise-make_variables-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "make_variables", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "make_variables", code = "\nmake_variables(as.estimate(input_estimates))\n\nMarket_price\n", 
        opts = list(label = "\"make_variables\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = structure(c("", "make_variables(as.estimate(input_estimates))", 
    "", "Labor_cost + Management_cost", ""), chunk_opts = list(
        label = "make_variables-solution")), tests = NULL, options = list(
        eval = FALSE, echo = TRUE, results = "markup", tidy = FALSE, 
        tidy.opts = NULL, collapse = FALSE, prompt = FALSE, comment = NA, 
        highlight = FALSE, size = "normalsize", background = "#F7F7F7", 
        strip.white = TRUE, cache = 0, cache.path = "Index_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "make_variables", exercise = TRUE, 
        code = c("", "make_variables(as.estimate(input_estimates))", 
        "", "Market_price", ""), out.width.px = 624, out.height.px = 384, 
        params.src = "make_variables, exercise=TRUE", fig.num = 0, 
        exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-example_decision_model-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-example_decision_model-code-editor`)), session)
output$`tutorial-exercise-example_decision_model-output` <- renderUI({
  `tutorial-exercise-example_decision_model-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "example_decision_model", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "example_decision_model", code = "\nexample_decision_model <- function(x, varnames){\n  profit <- benefits-costs\n\n  final_profits <- profit + 500\n\n  return(final_profits)\n\n}\n\nmcSimulation(estimate = as.estimate(example_decision_inputs),\n                              model_function = example_decision_model,\n                              numberOfModelRuns = 100,\n                              functionSyntax = \"plainNames\")\n", 
        opts = list(label = "\"example_decision_model\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = structure(c("", "example_decision_model <- function(x, varnames){", 
    "", "  profit <- benefits-costs", "", "  final_profits <- profit + additional_benefits", 
    "", "  return(final_profits)", "", "}", "", "mcSimulation(estimate = as.estimate(example_decision_inputs),", 
    "                              model_function = example_decision_model,", 
    "                              numberOfModelRuns = 700,", 
    "                              functionSyntax = \"plainNames\")", 
    ""), chunk_opts = list(label = "example_decision_model-solution")), 
    tests = NULL, options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "example_decision_model", exercise = TRUE, 
        code = c("", "example_decision_model <- function(x, varnames){", 
        "  profit <- benefits-costs", "", "  final_profits <- profit + 500", 
        "", "  return(final_profits)", "", "}", "", "mcSimulation(estimate = as.estimate(example_decision_inputs),", 
        "                              model_function = example_decision_model,", 
        "                              numberOfModelRuns = 100,", 
        "                              functionSyntax = \"plainNames\")", 
        ""), out.width.px = 624, out.height.px = 384, params.src = "example_decision_model, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-reports-seminar-vv-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-reports-seminar-vv-code-editor`)), session)
output$`tutorial-exercise-reports-seminar-vv-output` <- renderUI({
  `tutorial-exercise-reports-seminar-vv-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "reports-seminar-vv", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "reports-seminar-vv", code = "# reduce var_CV to 5 and change n to 40. Name the output 'valvar' and plot with base R  \nvv(var_mean = 100, \n   var_CV = 10, \n   n = 30)\n", 
        opts = list(label = "\"reports-seminar-vv\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = structure(c("valvar <- vv(var_mean = 100, ", 
    "             var_CV = 5, ", "             n = 40)", "", 
    "plot(valvar)"), chunk_opts = list(label = "reports-seminar-vv-solution")), 
    tests = NULL, options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "reports-seminar-vv", exercise = TRUE, 
        code = c("# reduce var_CV to 5 and change n to 40. Name the output 'valvar' and plot with base R  ", 
        "vv(var_mean = 100, ", "   var_CV = 10, ", "   n = 30)", 
        ""), out.width.px = 624, out.height.px = 384, params.src = "reports-seminar-vv, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-reports-seminar-absolute_trend-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-reports-seminar-absolute_trend-code-editor`)), session)
output$`tutorial-exercise-reports-seminar-absolute_trend-output` <- renderUI({
  `tutorial-exercise-reports-seminar-absolute_trend-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "reports-seminar-absolute_trend", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "reports-seminar-absolute_trend", 
        code = "# reduce var_mean to 50 and make absolute_trend 10. Name the output 'valvar' and plot with base R \nvv(var_mean = 100, \n           var_CV = 10, \n           n = 30, \n           absolute_trend = 5)\n", 
        opts = list(label = "\"reports-seminar-absolute_trend\"", 
            exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = structure(c("valvar <- vv(var_mean = 50, ", 
    "           var_CV = 10, ", "           n = 30, ", "           absolute_trend = 10)", 
    "", "plot(valvar)"), chunk_opts = list(label = "reports-seminar-absolute_trend-solution")), 
    tests = NULL, options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "reports-seminar-absolute_trend", 
        exercise = TRUE, code = c("# reduce var_mean to 50 and make absolute_trend 10. Name the output 'valvar' and plot with base R ", 
        "vv(var_mean = 100, ", "           var_CV = 10, ", "           n = 30, ", 
        "           absolute_trend = 5)", ""), out.width.px = 624, 
        out.height.px = 384, params.src = "reports-seminar-absolute_trend, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-reports-seminar-relative_trend-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-reports-seminar-relative_trend-code-editor`)), session)
output$`tutorial-exercise-reports-seminar-relative_trend-output` <- renderUI({
  `tutorial-exercise-reports-seminar-relative_trend-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "reports-seminar-relative_trend", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "reports-seminar-relative_trend", 
        code = "# reduce var_CV to 5 and change n to 40. Name the output 'valvar' and plot with base R \nvv(var_mean = 100, \n             var_CV = 10, \n             n = 30, \n             relative_trend = 5)\n", 
        opts = list(label = "\"reports-seminar-relative_trend\"", 
            exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = structure(c("valvar <- vv(var_mean = 100, ", 
    "             var_CV = 5, ", "             n = 40, ", "             relative_trend = 5)", 
    "", "plot(valvar)"), chunk_opts = list(label = "reports-seminar-relative_trend-solution")), 
    tests = NULL, options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "reports-seminar-relative_trend", 
        exercise = TRUE, code = c("# reduce var_CV to 5 and change n to 40. Name the output 'valvar' and plot with base R ", 
        "vv(var_mean = 100, ", "             var_CV = 10, ", 
        "             n = 30, ", "             relative_trend = 5)", 
        ""), out.width.px = 624, out.height.px = 384, params.src = "reports-seminar-relative_trend, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-reports-seminar-chance-event-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-reports-seminar-chance-event-code-editor`)), session)
output$`tutorial-exercise-reports-seminar-chance-event-output` <- renderUI({
  `tutorial-exercise-reports-seminar-chance-event-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "reports-seminar-chance-event", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "reports-seminar-chance-event", 
        code = "# decrease the chance and value_if by half and repeat 20 times. Name the output 'chancevar' and plot with base R \nchance_event(chance = 0.5, \n             value_if = 6, \n             n = 10)", 
        opts = list(label = "\"reports-seminar-chance-event\"", 
            exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = structure(c("chancevar <- chance_event(chance = 0.25, ", 
    "             value_if = 3, ", "             n = 20)", "", 
    "plot(chancevar)"), chunk_opts = list(label = "reports-seminar-chance-event-solution")), 
    tests = NULL, options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "reports-seminar-chance-event", 
        exercise = TRUE, code = c("# decrease the chance and value_if by half and repeat 20 times. Name the output 'chancevar' and plot with base R ", 
        "chance_event(chance = 0.5, ", "             value_if = 6, ", 
        "             n = 10)"), out.width.px = 624, out.height.px = 384, 
        params.src = "reports-seminar-chance-event, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-reports-seminar-chance-event-2-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-reports-seminar-chance-event-2-code-editor`)), session)
output$`tutorial-exercise-reports-seminar-chance-event-2-output` <- renderUI({
  `tutorial-exercise-reports-seminar-chance-event-2-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "reports-seminar-chance-event-2", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "reports-seminar-chance-event-2", 
        code = "# make the chance 10 percent, the value_if 5 and the value_if_not 20, repeat 100 times and reduce the coefficient of variation by half. Name the output 'chancevar' and plot with base R.\nchance_event(chance = 0.5,\n             value_if = 1,\n             value_if_not = 5,\n             n = 10,\n             CV_if = 20)", 
        opts = list(label = "\"reports-seminar-chance-event-2\"", 
            exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = structure(c("chancevar <- chance_event(chance = 0.1,", 
    "             value_if = 5,", "             value_if_not = 20,", 
    "             n = 100,", "             CV_if = 10)", "", 
    "plot(chancevar)"), chunk_opts = list(label = "reports-seminar-chance-event-2-solution")), 
    tests = NULL, options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "reports-seminar-chance-event-2", 
        exercise = TRUE, code = c("# make the chance 10 percent, the value_if 5 and the value_if_not 20, repeat 100 times and reduce the coefficient of variation by half. Name the output 'chancevar' and plot with base R.", 
        "chance_event(chance = 0.5,", "             value_if = 1,", 
        "             value_if_not = 5,", "             n = 10,", 
        "             CV_if = 20)"), out.width.px = 624, out.height.px = 384, 
        params.src = "reports-seminar-chance-event-2, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-reports-seminar-gompertz_yield-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-reports-seminar-gompertz_yield-code-editor`)), session)
output$`tutorial-exercise-reports-seminar-gompertz_yield-output` <- renderUI({
  `tutorial-exercise-reports-seminar-gompertz_yield-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "reports-seminar-gompertz_yield", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "reports-seminar-gompertz_yield", 
        code = "# create a vector where the maximum harvest is 500, which is achieved in 10 years (i.e. 100% by the second yield estimate)\ngompertz_yield(max_harvest = 1000,\n               time_to_first_yield_estimate = 5,\n               first_yield_estimate_percent = 10,\n               time_to_second_yield_estimate = 15,\n               second_yield_estimate_percent = 90,\n               n_years = 30)", 
        opts = list(label = "\"reports-seminar-gompertz_yield\"", 
            exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = structure(c("gompertz_yield(max_harvest = 500,", 
    "               time_to_first_yield_estimate = 5,", "               first_yield_estimate_percent = 10,", 
    "               time_to_second_yield_estimate = 10,", "               second_yield_estimate_percent = 100,", 
    "               n_years = 30)"), chunk_opts = list(label = "reports-seminar-gompertz_yield-solution")), 
    tests = NULL, options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "reports-seminar-gompertz_yield", 
        exercise = TRUE, code = c("# create a vector where the maximum harvest is 500, which is achieved in 10 years (i.e. 100% by the second yield estimate)", 
        "gompertz_yield(max_harvest = 1000,", "               time_to_first_yield_estimate = 5,", 
        "               first_yield_estimate_percent = 10,", 
        "               time_to_second_yield_estimate = 15,", 
        "               second_yield_estimate_percent = 90,", 
        "               n_years = 30)"), out.width.px = 624, 
        out.height.px = 384, params.src = "reports-seminar-gompertz_yield, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-forecasts_plot_distribution-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-forecasts_plot_distribution-code-editor`)), session)
output$`tutorial-exercise-forecasts_plot_distribution-output` <- renderUI({
  `tutorial-exercise-forecasts_plot_distribution-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "forecasts_plot_distribution", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "forecasts_plot_distribution", 
        code = "\nplot_distributions(mcSimulation_object = example_mc_simulation,\n                   vars = \"final_result\",\n                   method = \"boxplot_density\",\n                   old_names = \"final_result\",\n                   new_names = \"Outcome distribution for profits\")\n", 
        opts = list(label = "\"forecasts_plot_distribution\"", 
            exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = structure(c("", 
    "plot_distributions(mcSimulation_object = example_mc_simulation,", 
    "                   vars = \"final_result\",", "                   method = \"smooth_simple_overlay\",", 
    "                   old_names = \"final_result\",", "                   new_names = \"Outcome distribution for profits\")", 
    ""), chunk_opts = list(label = "forecasts_plot_distribution-solution")), 
    tests = NULL, options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "forecasts_plot_distribution", 
        exercise = TRUE, code = c("", "plot_distributions(mcSimulation_object = example_mc_simulation,", 
        "                   vars = \"final_result\",", "                   method = \"boxplot_density\",", 
        "                   old_names = \"final_result\",", "                   new_names = \"Outcome distribution for profits\")", 
        ""), out.width.px = 624, out.height.px = 384, params.src = "forecasts_plot_distribution, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "do-forecasts-question-1", 
    question = structure("How do probabilistic models differ from frequentist or deterministic models?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_2d397b2", 
        option = "They contain more variables.", value = "They contain more variables.", 
        label = structure("They contain more variables.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_e4c172a", 
        option = "They do not have as broad a range of applicability across different domains of science.", 
        value = "They do not have as broad a range of applicability across different domains of science.", 
        label = structure("They do not have as broad a range of applicability across different domains of science.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_19a1b01", 
        option = "Unlike deterministic models, probabilistic models can accept uncertainty as inputs.", 
        value = "Unlike deterministic models, probabilistic models can accept uncertainty as inputs.", 
        label = structure("Unlike deterministic models, probabilistic models can accept uncertainty as inputs.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_6d343a8", 
        option = "Unlike deterministic models, probabilistic models can produce uncertain distributions as outputs.", 
        value = "Unlike deterministic models, probabilistic models can produce uncertain distributions as outputs.", 
        label = structure("Unlike deterministic models, probabilistic models can produce uncertain distributions as outputs.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/FZfACcoX4O0\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "do-forecasts-question-1-answer", question = "do-forecasts-question-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 145103067.932431, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "do-forecasts-question-2", 
    question = structure("What are the steps in the proposed process for rational decision-making?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_6b12cc0", 
        option = "Gather empirical evidence and data and apply regression tools as part of an exploratory process to look for relationships. Then decide based on any relevant results.", 
        value = "Gather empirical evidence and data and apply regression tools as part of an exploratory process to look for relationships. Then decide based on any relevant results.", 
        label = structure("Gather empirical evidence and data and apply regression tools as part of an exploratory process to look for relationships. Then decide based on any relevant results.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_3dbfead", 
        option = "Perform interviews and then decide based on the suggestion of experts.", 
        value = "Perform interviews and then decide based on the suggestion of experts.", 
        label = structure("Perform interviews and then decide based on the suggestion of experts.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_543c3a3", 
        option = "Pool information, quantify uncertainty, produce assessments, then either measure where information value is high or take decision.", 
        value = "Pool information, quantify uncertainty, produce assessments, then either measure where information value is high or take decision.", 
        label = structure("Pool information, quantify uncertainty, produce assessments, then either measure where information value is high or take decision.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Watch <a href=\"https://youtu.be/FZfACcoX4O0\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/FZfACcoX4O0\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "do-forecasts-question-2-answer", question = "do-forecasts-question-2"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 100111874.453382, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "do-forecasts-question-3", 
    question = structure("Why was Projection to Latent Structure (PLS) analysis used in the study?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_d7ba6b4", 
        option = "To generate a p-value for the reliability of the model results.", 
        value = "To generate a p-value for the reliability of the model results.", 
        label = structure("To generate a p-value for the reliability of the model results.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_dd59fe4", 
        option = "To perform sensitivity analysis.", value = "To perform sensitivity analysis.", 
        label = structure("To perform sensitivity analysis.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_af66435", 
        option = "To assess the sensitivity of the output with the many collinear model inputs using the Varible Importance in the Projection (VIP) score.", 
        value = "To assess the sensitivity of the output with the many collinear model inputs using the Varible Importance in the Projection (VIP) score.", 
        label = structure("To assess the sensitivity of the output with the many collinear model inputs using the Varible Importance in the Projection (VIP) score.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/FZfACcoX4O0\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "do-forecasts-question-3-answer", question = "do-forecasts-question-3"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 120341899.443961, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "johannes-forecasts-question-1", 
    question = structure("A lottery has 200 tickets which costs 10€ each. The winner gets 1000€. The decision is, whether to buy a ticket or not. What is the value of information on whether a specific ticket will be a winner?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_d418176", 
        option = "0 €", value = "0 €", label = structure("0 €", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_211af14", 
        option = "4.95 €", value = "4.95 €", label = structure("4.95 €", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_beb5b3f", 
        option = "10 €", value = "10 €", label = structure("10 €", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_9ea85ae", 
        option = "990 €", value = "990 €", label = structure("990 €", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Watch <a href=\"https://youtu.be/g-MxM_2rWJg\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/g-MxM_2rWJg\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "johannes-forecasts-question-1-answer", question = "johannes-forecasts-question-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 920780901.071228, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "johannes-forecasts-question-2", 
    question = structure("What is the value of controlling whether a specific ticket will be a winner?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_36a0f44", 
        option = "0 €", value = "0 €", label = structure("0 €", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_41cb78a", 
        option = "4.95 €", value = "4.95 €", label = structure("4.95 €", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_edd3787", 
        option = "10 €", value = "10 €", label = structure("10 €", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_a2ed0b2", 
        option = "990 €", value = "990 €", label = structure("990 €", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Watch <a href=\"https://youtu.be/g-MxM_2rWJg\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/g-MxM_2rWJg\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "johannes-forecasts-question-2-answer", question = "johannes-forecasts-question-2"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 287544941.366101, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "schiffers-forecasts-question-2", 
    question = structure("Why do we calculate Expected Value of Perfect Information (EVPI)?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_4bf827", 
        option = "To help identify those variables for which more information would maximize the model output.", 
        value = "To help identify those variables for which more information would maximize the model output.", 
        label = structure("To help identify those variables for which more information would maximize the model output.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_1a5b3e4", 
        option = "To define potential research priorities.", 
        value = "To define potential research priorities.", label = structure("To define potential research priorities.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_9af67ed", 
        option = "It is more a hypothetical concept without any real application.", 
        value = "It is more a hypothetical concept without any real application.", 
        label = structure("It is more a hypothetical concept without any real application.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/g-MxM_2rWJg\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "schiffers-forecasts-question-2-answer", question = "schiffers-forecasts-question-2"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 119553581.444329, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "schiffers-forecasts-question-3", 
    question = structure("How is EVPI calculated?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_2abf7cc", 
        option = "It is the expected maximum value minus the expected value given perfect information.", 
        value = "It is the expected maximum value minus the expected value given perfect information.", 
        label = structure("It is the expected maximum value minus the expected value given perfect information.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_5b9bff8", 
        option = "It is the expected value given perfect information\nminus the best expected value without further information.", 
        value = "It is the expected value given perfect information\nminus the best expected value without further information.", 
        label = structure("It is the expected value given perfect information\nminus the best expected value without further information.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_eee2e6d", 
        option = "It is the Varible Importance in the Projection (VIP) score multiplied by the number of variables in the model.", 
        value = "It is the Varible Importance in the Projection (VIP) score multiplied by the number of variables in the model.", 
        label = structure("It is the Varible Importance in the Projection (VIP) score multiplied by the number of variables in the model.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Watch <a href=\"https://youtu.be/g-MxM_2rWJg\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Watch <a href=\"https://youtu.be/g-MxM_2rWJg\">the talk<\u002fa> and try again.", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "schiffers-forecasts-question-3-answer", question = "schiffers-forecasts-question-3"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = TRUE, 
    seed = 1523594125.29052, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-communicating-plot_distribution-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-communicating-plot_distribution-code-editor`)), session)
output$`tutorial-exercise-communicating-plot_distribution-output` <- renderUI({
  `tutorial-exercise-communicating-plot_distribution-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "communicating-plot_distribution", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "communicating-plot_distribution", 
        code = "\nplot_distributions(mcSimulation_object = example_mc_simulation,\n                   vars = \"final_result\",\n                   method = \"hist_simple_overlay\",\n                   old_names = \"final_result\",\n                   new_names = \"Outcome distribution for profits\")\n", 
        opts = list(label = "\"communicating-plot_distribution\"", 
            exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = structure(c("", 
    "plot_distributions(mcSimulation_object = example_mc_simulation,", 
    "                   vars = \"final_result\",", "                   method = \"boxplot_density\",", 
    "                   old_names = \"final_result\",", "                   new_names = \"Outcome distribution for profits\")", 
    ""), chunk_opts = list(label = "communicating-plot_distribution-solution")), 
    tests = NULL, options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "communicating-plot_distribution", 
        exercise = TRUE, code = c("", "plot_distributions(mcSimulation_object = example_mc_simulation,", 
        "                   vars = \"final_result\",", "                   method = \"hist_simple_overlay\",", 
        "                   old_names = \"final_result\",", "                   new_names = \"Outcome distribution for profits\")", 
        ""), out.width.px = 624, out.height.px = 384, params.src = "communicating-plot_distribution, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-communicating-compound_figure-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-communicating-compound_figure-code-editor`)), session)
output$`tutorial-exercise-communicating-compound_figure-output` <- renderUI({
  `tutorial-exercise-communicating-compound_figure-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "communicating-compound_figure", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "communicating-compound_figure", 
        code = "\n# Create the estimate object:\n\ncost_benefit_table <- data.frame(label = c(\"Revenue\", \"Costs\"),\n                                  variable = c(\"revenue\", \"costs\"),\n                                  distribution = c(\"norm\", \"norm\"),\n                                  lower = c(100,  500),\n                                  median = c(NA, NA),\n                                  upper = c(10000, 5000))\n\n# (a) Define the model function without name for the return value:\n\nprofit1 <- function() {\n  Decision <- revenue - costs\n  cashflow <- rnorm(rep(revenue, 20))\n  return(list(Revenues = revenue,\n              Costs = costs, \n              cashflow = cashflow, \n              Decision = Decision))\n}\n\ncompound_figure(model = profit1, \ninput_table = cost_benefit_table, \ndecision_var_name = \"Decision\",\ncashflow_var_name = \"cashflow\",\nmodel_runs = 1e2, \ndistribution_method = 'smooth_simple_overlay')\n\n", 
        opts = list(label = "\"communicating-compound_figure\"", 
            exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "communicating-compound_figure", 
        exercise = TRUE, code = c("", "# Create the estimate object:", 
        "", "cost_benefit_table <- data.frame(label = c(\"Revenue\", \"Costs\"),", 
        "                                  variable = c(\"revenue\", \"costs\"),", 
        "                                  distribution = c(\"norm\", \"norm\"),", 
        "                                  lower = c(100,  500),", 
        "                                  median = c(NA, NA),", 
        "                                  upper = c(10000, 5000))", 
        "", "# (a) Define the model function without name for the return value:", 
        "", "profit1 <- function() {", "  Decision <- revenue - costs", 
        "  cashflow <- rnorm(rep(revenue, 20))", "  return(list(Revenues = revenue,", 
        "              Costs = costs, ", "              cashflow = cashflow, ", 
        "              Decision = Decision))", "}", "", "compound_figure(model = profit1, ", 
        "input_table = cost_benefit_table, ", "decision_var_name = \"Decision\",", 
        "cashflow_var_name = \"cashflow\",", "model_runs = 1e2, ", 
        "distribution_method = 'smooth_simple_overlay')", "", 
        ""), out.width.px = 624, out.height.px = 384, params.src = "communicating-compound_figure, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-communicating-bayes_plot-mcmc_intervals-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-communicating-bayes_plot-mcmc_intervals-code-editor`)), session)
output$`tutorial-exercise-communicating-bayes_plot-mcmc_intervals-output` <- renderUI({
  `tutorial-exercise-communicating-bayes_plot-mcmc_intervals-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "communicating-bayes_plot-mcmc_intervals", 
    global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
    "# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
    "# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
    "# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
    "library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
    "library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
    "library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
    "library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
    "", "# load the data (use write.csv for data created in RMD)", 
    "stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
    "example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
    "input_table <- read.csv(\"data/example_input_table.csv\")", 
    "hail_estimates <- read.csv(\"data/hail_estimates.csv\")", 
    "", "###### Chile function #######", "", "# create the model function", 
    "model_function <- function(){", "  income <- Yield * Market_price", 
    "  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
    "  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
    "example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
    "                              model_function = model_function,", 
    "                              numberOfModelRuns = 100,", 
    "                              functionSyntax = \"plainNames\")", 
    "###### make variables function #######", "# make variables", 
    "make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
    "    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
    "}", "", "# suppress warnings", "options(warn = - 1)", "", 
    "###### burkina function #######", "# second decision function", 
    "example_decision_function <- function(x, varnames){", "", 
    "  # calculate ex-ante risks: impact the implementation of interventions ####", 
    "  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
    "", "  # pre-calculate common random draws for all intervention model runs ####", 
    "", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
    "  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", 
    "  # benefits of fruit", "  precalc_intervention_fruit_benefits <-", 
    "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
    "    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", 
    "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
    "", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
    "    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
    "    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
    "    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
    "", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
    "    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
    "    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
    "    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
    "", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
    "      {", "", "  if (decision_intervention_strips)", "  {", 
    "    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
    "    intervention_strips_cost <- TRUE", "  } else", "  {", 
    "    intervention_strips <- FALSE", "    intervention_strips_PlanningCost <- FALSE", 
    "    intervention_strips_cost <- FALSE", "  }", "", "  if (intervention_NonPopInvolvEvent) {", 
    "    intervention_strips <- FALSE", "    intervention_strips_cost <- FALSE", 
    "  }", "", "  # Costs ####", "  if (intervention_strips_cost) {", 
    "    cost_intervention_strips <-", "      intervention_adaptation_cost +", 
    "      intervention_tech_devices_cost +", "      intervention_nursery_cost +", 
    "      intervention_wells_cost +", "      intervention_training_cost +", 
    "      intervention_mngmt_oprt_cost +", "      intervention_mngmt_follow_cost +", 
    "      intervention_mngmt_audit_cost", "  } else", "    cost_intervention_strips <- 0", 
    "", "  if (intervention_strips_PlanningCost) {", "    plan_cost_intervention_strips <-", 
    "      intervention_communication_cost + intervention_zoning_cost", 
    "  } else", "    plan_cost_intervention_strips <- 0", "", 
    "  maintenance_cost <- rep(0, n_years)", "", "  if (intervention_strips)", 
    "    maintenance_cost <-", "    maintenance_cost + vv(maintenance_intervention_strips,", 
    "                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
    "  intervention_cost[1] <-", "    intervention_cost[1] +", 
    "    cost_intervention_strips +", "    plan_cost_intervention_strips", 
    "", "", "  # Benefits from  cultivation in the intervention strips ####", 
    "", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
    "  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
    "  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
    "", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
    "  crop_production <-", "    intervention_fruit_benefits +", 
    "    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
    "", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
    "  # restrict access to the reservoir for livestock.", "", 
    "  if (intervention_strips)", "    TLU_intervention <-", 
    "    TLU * (1 + change_TLU_intervention_perc / 100)", "  else", 
    "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
    "    livestock_benefits <- TLU_intervention * TLU_profit", 
    "    total_benefits <- crop_production + livestock_benefits", 
    "    net_benefits <- total_benefits - intervention_cost", 
    "    result_interv <- net_benefits}", "", "", "  if (!decision_intervention_strips){", 
    "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
    "    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
    "    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
    "", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
    "", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
    "", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
    "# the variables will be called output_1, _2, etc.", "", 
    "return(list(Interv_NPV = NPV_interv,", "            NO_Interv_NPV = NPV_n_interv,", 
    "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
    "            Cashflow_decision_do = result_interv - result_n_interv))", 
    "}", "###### run burkina model #######", "# second simulation", 
    "mcSimulation_results <- decisionSupport::mcSimulation(", 
    "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
    "  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
    "  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
    "mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
    "", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
    "###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
    "                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
    "###### HAIL Risk #######", "hail_function <- function(){", 
    "", "yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
    "             n = 20)", "", "prices <- vv(var_mean = price,", 
    "             var_CV = var_CV,", "             n = 20)", 
    "", "# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
    "invest_costs <- c(initial_investment, rep(0, 19))", "", 
    "# use 'chance_event' to adjust yield for potential hail", 
    "hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
    "                                    value_if_not = yield,", 
    "                                    n = 20)", "", "# calculate profit without net", 
    "profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
    "profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
    "# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
    "NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
    "", "# calculate the overall NPV of the decision (do - don't do)", 
    "NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
    "            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
    "}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
    "                              model_function = hail_function,", 
    "                              numberOfModelRuns = 100,", 
    "                              functionSyntax = \"plainNames\")", 
    "", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
    "                                 hail_mc_simulation$y[3])", 
    "", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
    "                   first_out_var = \"NPV_decision\")", "", 
    "", "# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
    "# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
    "# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
    "# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", 
    "# daten <- data.frame(rasse=rasse, ll=ll)", "# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
    ), chunk_opts = list(label = "setup", include = FALSE)), 
    setup = NULL, chunks = list(list(label = "communicating-bayes_plot-mcmc_intervals", 
        code = "test <- data.frame(\"practice 1\" = rnorm(n = 1000, mean = 8, sd = 1.5), \n                   \"practice 2\" = rnorm(n = 1000, mean = 7, sd = 1), \n                   \"practice 3\" = rnorm(n = 1000, mean = 5, sd = 0.5))\n\n\ncolor_scheme_set(\"red\")\nmcmc_intervals(test,prob = 0.5,prob_outer = 0.9,point_est = \"median\")", 
        opts = list(label = "\"communicating-bayes_plot-mcmc_intervals\"", 
            exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "communicating-bayes_plot-mcmc_intervals", 
        exercise = TRUE, code = c("test <- data.frame(\"practice 1\" = rnorm(n = 1000, mean = 8, sd = 1.5), ", 
        "                   \"practice 2\" = rnorm(n = 1000, mean = 7, sd = 1), ", 
        "                   \"practice 3\" = rnorm(n = 1000, mean = 5, sd = 0.5))", 
        "", "", "color_scheme_set(\"red\")", "mcmc_intervals(test,prob = 0.5,prob_outer = 0.9,point_est = \"median\")"
        ), out.width.px = 624, out.height.px = 384, params.src = "communicating-bayes_plot-mcmc_intervals, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-communicating-bayes_plot-mcmc_areas-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-communicating-bayes_plot-mcmc_areas-code-editor`)), session)
output$`tutorial-exercise-communicating-bayes_plot-mcmc_areas-output` <- renderUI({
  `tutorial-exercise-communicating-bayes_plot-mcmc_areas-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "communicating-bayes_plot-mcmc_areas", 
    global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
    "# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
    "# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
    "# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
    "library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
    "library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
    "library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
    "library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
    "", "# load the data (use write.csv for data created in RMD)", 
    "stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
    "example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
    "input_table <- read.csv(\"data/example_input_table.csv\")", 
    "hail_estimates <- read.csv(\"data/hail_estimates.csv\")", 
    "", "###### Chile function #######", "", "# create the model function", 
    "model_function <- function(){", "  income <- Yield * Market_price", 
    "  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
    "  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
    "example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
    "                              model_function = model_function,", 
    "                              numberOfModelRuns = 100,", 
    "                              functionSyntax = \"plainNames\")", 
    "###### make variables function #######", "# make variables", 
    "make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
    "    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
    "}", "", "# suppress warnings", "options(warn = - 1)", "", 
    "###### burkina function #######", "# second decision function", 
    "example_decision_function <- function(x, varnames){", "", 
    "  # calculate ex-ante risks: impact the implementation of interventions ####", 
    "  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
    "", "  # pre-calculate common random draws for all intervention model runs ####", 
    "", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
    "  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", 
    "  # benefits of fruit", "  precalc_intervention_fruit_benefits <-", 
    "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
    "    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", 
    "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
    "", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
    "    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
    "    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
    "    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
    "", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
    "    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
    "    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
    "    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
    "", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
    "      {", "", "  if (decision_intervention_strips)", "  {", 
    "    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
    "    intervention_strips_cost <- TRUE", "  } else", "  {", 
    "    intervention_strips <- FALSE", "    intervention_strips_PlanningCost <- FALSE", 
    "    intervention_strips_cost <- FALSE", "  }", "", "  if (intervention_NonPopInvolvEvent) {", 
    "    intervention_strips <- FALSE", "    intervention_strips_cost <- FALSE", 
    "  }", "", "  # Costs ####", "  if (intervention_strips_cost) {", 
    "    cost_intervention_strips <-", "      intervention_adaptation_cost +", 
    "      intervention_tech_devices_cost +", "      intervention_nursery_cost +", 
    "      intervention_wells_cost +", "      intervention_training_cost +", 
    "      intervention_mngmt_oprt_cost +", "      intervention_mngmt_follow_cost +", 
    "      intervention_mngmt_audit_cost", "  } else", "    cost_intervention_strips <- 0", 
    "", "  if (intervention_strips_PlanningCost) {", "    plan_cost_intervention_strips <-", 
    "      intervention_communication_cost + intervention_zoning_cost", 
    "  } else", "    plan_cost_intervention_strips <- 0", "", 
    "  maintenance_cost <- rep(0, n_years)", "", "  if (intervention_strips)", 
    "    maintenance_cost <-", "    maintenance_cost + vv(maintenance_intervention_strips,", 
    "                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
    "  intervention_cost[1] <-", "    intervention_cost[1] +", 
    "    cost_intervention_strips +", "    plan_cost_intervention_strips", 
    "", "", "  # Benefits from  cultivation in the intervention strips ####", 
    "", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
    "  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
    "  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
    "", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
    "  crop_production <-", "    intervention_fruit_benefits +", 
    "    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
    "", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
    "  # restrict access to the reservoir for livestock.", "", 
    "  if (intervention_strips)", "    TLU_intervention <-", 
    "    TLU * (1 + change_TLU_intervention_perc / 100)", "  else", 
    "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
    "    livestock_benefits <- TLU_intervention * TLU_profit", 
    "    total_benefits <- crop_production + livestock_benefits", 
    "    net_benefits <- total_benefits - intervention_cost", 
    "    result_interv <- net_benefits}", "", "", "  if (!decision_intervention_strips){", 
    "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
    "    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
    "    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
    "", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
    "", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
    "", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
    "# the variables will be called output_1, _2, etc.", "", 
    "return(list(Interv_NPV = NPV_interv,", "            NO_Interv_NPV = NPV_n_interv,", 
    "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
    "            Cashflow_decision_do = result_interv - result_n_interv))", 
    "}", "###### run burkina model #######", "# second simulation", 
    "mcSimulation_results <- decisionSupport::mcSimulation(", 
    "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
    "  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
    "  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
    "mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
    "", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
    "###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
    "                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
    "###### HAIL Risk #######", "hail_function <- function(){", 
    "", "yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
    "             n = 20)", "", "prices <- vv(var_mean = price,", 
    "             var_CV = var_CV,", "             n = 20)", 
    "", "# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
    "invest_costs <- c(initial_investment, rep(0, 19))", "", 
    "# use 'chance_event' to adjust yield for potential hail", 
    "hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
    "                                    value_if_not = yield,", 
    "                                    n = 20)", "", "# calculate profit without net", 
    "profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
    "profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
    "# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
    "NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
    "", "# calculate the overall NPV of the decision (do - don't do)", 
    "NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
    "            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
    "}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
    "                              model_function = hail_function,", 
    "                              numberOfModelRuns = 100,", 
    "                              functionSyntax = \"plainNames\")", 
    "", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
    "                                 hail_mc_simulation$y[3])", 
    "", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
    "                   first_out_var = \"NPV_decision\")", "", 
    "", "# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
    "# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
    "# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
    "# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", 
    "# daten <- data.frame(rasse=rasse, ll=ll)", "# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
    ), chunk_opts = list(label = "setup", include = FALSE)), 
    setup = NULL, chunks = list(list(label = "communicating-bayes_plot-mcmc_areas", 
        code = "test <- data.frame(\"practice 1\" = rnorm(n = 1000, mean = 8, sd = 1.5), \n                   \"practice 2\" = rnorm(n = 1000, mean = 7, sd = 1), \n                   \"practice 3\" = rnorm(n = 1000, mean = 5, sd = 0.5))\n\ncolor_scheme_set(\"blue\")\n\nmcmc_areas(test,prob = 0.9,point_est = \"median\")", 
        opts = list(label = "\"communicating-bayes_plot-mcmc_areas\"", 
            exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "communicating-bayes_plot-mcmc_areas", 
        exercise = TRUE, code = c("test <- data.frame(\"practice 1\" = rnorm(n = 1000, mean = 8, sd = 1.5), ", 
        "                   \"practice 2\" = rnorm(n = 1000, mean = 7, sd = 1), ", 
        "                   \"practice 3\" = rnorm(n = 1000, mean = 5, sd = 0.5))", 
        "", "color_scheme_set(\"blue\")", "", "mcmc_areas(test,prob = 0.9,point_est = \"median\")"
        ), out.width.px = 624, out.height.px = 384, params.src = "communicating-bayes_plot-mcmc_areas, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-communicating-geom_density-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-communicating-geom_density-code-editor`)), session)
output$`tutorial-exercise-communicating-geom_density-output` <- renderUI({
  `tutorial-exercise-communicating-geom_density-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "communicating-geom_density", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "communicating-geom_density", 
        code = "test <- data.frame(\"practice 1\" = rnorm(n = 1000, mean = 8, sd = 1.5), \n                   \"practice 2\" = rnorm(n = 1000, mean = 7, sd = 1), \n                   \"practice 3\" = rnorm(n = 1000, mean = 5, sd = 0.5))\n\nstacked_test <- stack(test)\n\nggplot(stacked_test, \n       aes(x=values,group=ind,fill=ind )) +\n        geom_density(colour=NA,alpha=.5) +\n        ylab(\"Probability density\") +\n        xlab(\"Yield\")", 
        opts = list(label = "\"communicating-geom_density\"", 
            exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "communicating-geom_density", 
        exercise = TRUE, code = c("test <- data.frame(\"practice 1\" = rnorm(n = 1000, mean = 8, sd = 1.5), ", 
        "                   \"practice 2\" = rnorm(n = 1000, mean = 7, sd = 1), ", 
        "                   \"practice 3\" = rnorm(n = 1000, mean = 5, sd = 0.5))", 
        "", "stacked_test <- stack(test)", "", "ggplot(stacked_test, ", 
        "       aes(x=values,group=ind,fill=ind )) +", "        geom_density(colour=NA,alpha=.5) +", 
        "        ylab(\"Probability density\") +", "        xlab(\"Yield\")"
        ), out.width.px = 624, out.height.px = 384, params.src = "communicating-geom_density, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-communicating-geom_histogram-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-communicating-geom_histogram-code-editor`)), session)
output$`tutorial-exercise-communicating-geom_histogram-output` <- renderUI({
  `tutorial-exercise-communicating-geom_histogram-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "communicating-geom_histogram", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "communicating-geom_histogram", 
        code = "test <- data.frame(\"practice 1\" = rnorm(n = 1000, mean = 8, sd = 1.5), \n                   \"practice 2\" = rnorm(n = 1000, mean = 7, sd = 1), \n                   \"practice 3\" = rnorm(n = 1000, mean = 5, sd = 0.5))\n\nstacked_test <- stack(test)\n\nggplot(stacked_test,aes(x=values))+ \n  geom_histogram(data=subset(stacked_test,ind =='practice.1'),\n                 aes(fill = ind), alpha = 0.5, bins = 150) + \n  geom_histogram(data=subset(stacked_test,ind == 'practice.2'),\n                 aes(fill = ind), alpha = 0.5, bins = 150) +\n  geom_histogram(data=subset(stacked_test,ind == 'practice.3'),\n                 aes(fill = ind), alpha = 0.5, bins = 150) ", 
        opts = list(label = "\"communicating-geom_histogram\"", 
            exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "communicating-geom_histogram", 
        exercise = TRUE, code = c("test <- data.frame(\"practice 1\" = rnorm(n = 1000, mean = 8, sd = 1.5), ", 
        "                   \"practice 2\" = rnorm(n = 1000, mean = 7, sd = 1), ", 
        "                   \"practice 3\" = rnorm(n = 1000, mean = 5, sd = 0.5))", 
        "", "stacked_test <- stack(test)", "", "ggplot(stacked_test,aes(x=values))+ ", 
        "  geom_histogram(data=subset(stacked_test,ind =='practice.1'),", 
        "                 aes(fill = ind), alpha = 0.5, bins = 150) + ", 
        "  geom_histogram(data=subset(stacked_test,ind == 'practice.2'),", 
        "                 aes(fill = ind), alpha = 0.5, bins = 150) +", 
        "  geom_histogram(data=subset(stacked_test,ind == 'practice.3'),", 
        "                 aes(fill = ind), alpha = 0.5, bins = 150) "
        ), out.width.px = 624, out.height.px = 384, params.src = "communicating-geom_histogram, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-communicating-plot_cashflow-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-communicating-plot_cashflow-code-editor`)), session)
output$`tutorial-exercise-communicating-plot_cashflow-output` <- renderUI({
  `tutorial-exercise-communicating-plot_cashflow-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "communicating-plot_cashflow", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "communicating-plot_cashflow", 
        code = "# Plotting the cashflow:\n\n# Create the estimate object (for multiple options):\n\nvariable = c(\"revenue_option1\", \"costs_option1\", \"n_years\", \n             \"revenue_option2\", \"costs_option2\")\ndistribution = c(\"norm\", \"norm\", \"const\", \"norm\", \"norm\")\nlower = c(10000,  5000, 20, 8000,  500)\nupper = c(100000, 50000, 20, 80000,  30000)\n\ncostBenefitEstimate <- as.estimate(variable, distribution, lower, upper)\n\n# Define the model function without name for the return value:\n\nprofit1 <- function(x) {\n  \ncashflow_option1 <- vv(revenue_option1 - costs_option1, n = n_years, var_CV = 100)\ncashflow_option2 <- vv(revenue_option2 - costs_option2, n = n_years, var_CV = 100)\n\nreturn(list(Revenues_option1 = revenue_option1,\n            Revenues_option2 = revenue_option2,\n            Costs_option1 = costs_option1,\n            Costs_option2 = costs_option2,\n            Cashflow_option_one = cashflow_option1,\n            Cashflow_option_two = cashflow_option2))\n}\n\n# Perform the Monte Carlo simulation:\n\npredictionProfit1 <- mcSimulation(estimate = costBenefitEstimate,\n                                  model_function = profit1,\n                                  numberOfModelRuns = 10000,\n                                  functionSyntax = \"plainNames\")\n\n\n# Plot the cashflow distribution over time\n\nplot_cashflow(mcSimulation_object = predictionProfit1, cashflow_var_name = \"Cashflow_option_one\",\n              x_axis_name = \"Years with intervention\",\n              y_axis_name = \"Annual cashflow in USD\",\n              color_25_75 = \"green4\", color_5_95 = \"green1\",\n              color_median = \"red\")", 
        opts = list(label = "\"communicating-plot_cashflow\"", 
            exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "communicating-plot_cashflow", 
        exercise = TRUE, code = c("# Plotting the cashflow:", 
        "", "# Create the estimate object (for multiple options):", 
        "", "variable = c(\"revenue_option1\", \"costs_option1\", \"n_years\", ", 
        "             \"revenue_option2\", \"costs_option2\")", 
        "distribution = c(\"norm\", \"norm\", \"const\", \"norm\", \"norm\")", 
        "lower = c(10000,  5000, 20, 8000,  500)", "upper = c(100000, 50000, 20, 80000,  30000)", 
        "", "costBenefitEstimate <- as.estimate(variable, distribution, lower, upper)", 
        "", "# Define the model function without name for the return value:", 
        "", "profit1 <- function(x) {", "  ", "cashflow_option1 <- vv(revenue_option1 - costs_option1, n = n_years, var_CV = 100)", 
        "cashflow_option2 <- vv(revenue_option2 - costs_option2, n = n_years, var_CV = 100)", 
        "", "return(list(Revenues_option1 = revenue_option1,", 
        "            Revenues_option2 = revenue_option2,", "            Costs_option1 = costs_option1,", 
        "            Costs_option2 = costs_option2,", "            Cashflow_option_one = cashflow_option1,", 
        "            Cashflow_option_two = cashflow_option2))", 
        "}", "", "# Perform the Monte Carlo simulation:", "", 
        "predictionProfit1 <- mcSimulation(estimate = costBenefitEstimate,", 
        "                                  model_function = profit1,", 
        "                                  numberOfModelRuns = 10000,", 
        "                                  functionSyntax = \"plainNames\")", 
        "", "", "# Plot the cashflow distribution over time", 
        "", "plot_cashflow(mcSimulation_object = predictionProfit1, cashflow_var_name = \"Cashflow_option_one\",", 
        "              x_axis_name = \"Years with intervention\",", 
        "              y_axis_name = \"Annual cashflow in USD\",", 
        "              color_25_75 = \"green4\", color_5_95 = \"green1\",", 
        "              color_median = \"red\")"), out.width.px = 624, 
        out.height.px = 384, params.src = "communicating-plot_cashflow, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-communicating-plot_cashflow-panels-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-communicating-plot_cashflow-panels-code-editor`)), session)
output$`tutorial-exercise-communicating-plot_cashflow-panels-output` <- renderUI({
  `tutorial-exercise-communicating-plot_cashflow-panels-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "communicating-plot_cashflow-panels", 
    global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
    "# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
    "# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
    "# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
    "library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
    "library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
    "library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
    "library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
    "", "# load the data (use write.csv for data created in RMD)", 
    "stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
    "example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
    "input_table <- read.csv(\"data/example_input_table.csv\")", 
    "hail_estimates <- read.csv(\"data/hail_estimates.csv\")", 
    "", "###### Chile function #######", "", "# create the model function", 
    "model_function <- function(){", "  income <- Yield * Market_price", 
    "  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
    "  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
    "example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
    "                              model_function = model_function,", 
    "                              numberOfModelRuns = 100,", 
    "                              functionSyntax = \"plainNames\")", 
    "###### make variables function #######", "# make variables", 
    "make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
    "    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
    "}", "", "# suppress warnings", "options(warn = - 1)", "", 
    "###### burkina function #######", "# second decision function", 
    "example_decision_function <- function(x, varnames){", "", 
    "  # calculate ex-ante risks: impact the implementation of interventions ####", 
    "  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
    "", "  # pre-calculate common random draws for all intervention model runs ####", 
    "", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
    "  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", 
    "  # benefits of fruit", "  precalc_intervention_fruit_benefits <-", 
    "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
    "    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", 
    "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
    "", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
    "    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
    "    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
    "    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
    "", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
    "    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
    "    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
    "    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
    "", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
    "      {", "", "  if (decision_intervention_strips)", "  {", 
    "    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
    "    intervention_strips_cost <- TRUE", "  } else", "  {", 
    "    intervention_strips <- FALSE", "    intervention_strips_PlanningCost <- FALSE", 
    "    intervention_strips_cost <- FALSE", "  }", "", "  if (intervention_NonPopInvolvEvent) {", 
    "    intervention_strips <- FALSE", "    intervention_strips_cost <- FALSE", 
    "  }", "", "  # Costs ####", "  if (intervention_strips_cost) {", 
    "    cost_intervention_strips <-", "      intervention_adaptation_cost +", 
    "      intervention_tech_devices_cost +", "      intervention_nursery_cost +", 
    "      intervention_wells_cost +", "      intervention_training_cost +", 
    "      intervention_mngmt_oprt_cost +", "      intervention_mngmt_follow_cost +", 
    "      intervention_mngmt_audit_cost", "  } else", "    cost_intervention_strips <- 0", 
    "", "  if (intervention_strips_PlanningCost) {", "    plan_cost_intervention_strips <-", 
    "      intervention_communication_cost + intervention_zoning_cost", 
    "  } else", "    plan_cost_intervention_strips <- 0", "", 
    "  maintenance_cost <- rep(0, n_years)", "", "  if (intervention_strips)", 
    "    maintenance_cost <-", "    maintenance_cost + vv(maintenance_intervention_strips,", 
    "                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
    "  intervention_cost[1] <-", "    intervention_cost[1] +", 
    "    cost_intervention_strips +", "    plan_cost_intervention_strips", 
    "", "", "  # Benefits from  cultivation in the intervention strips ####", 
    "", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
    "  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
    "  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
    "", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
    "  crop_production <-", "    intervention_fruit_benefits +", 
    "    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
    "", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
    "  # restrict access to the reservoir for livestock.", "", 
    "  if (intervention_strips)", "    TLU_intervention <-", 
    "    TLU * (1 + change_TLU_intervention_perc / 100)", "  else", 
    "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
    "    livestock_benefits <- TLU_intervention * TLU_profit", 
    "    total_benefits <- crop_production + livestock_benefits", 
    "    net_benefits <- total_benefits - intervention_cost", 
    "    result_interv <- net_benefits}", "", "", "  if (!decision_intervention_strips){", 
    "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
    "    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
    "    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
    "", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
    "", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
    "", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
    "# the variables will be called output_1, _2, etc.", "", 
    "return(list(Interv_NPV = NPV_interv,", "            NO_Interv_NPV = NPV_n_interv,", 
    "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
    "            Cashflow_decision_do = result_interv - result_n_interv))", 
    "}", "###### run burkina model #######", "# second simulation", 
    "mcSimulation_results <- decisionSupport::mcSimulation(", 
    "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
    "  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
    "  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
    "mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
    "", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
    "###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
    "                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
    "###### HAIL Risk #######", "hail_function <- function(){", 
    "", "yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
    "             n = 20)", "", "prices <- vv(var_mean = price,", 
    "             var_CV = var_CV,", "             n = 20)", 
    "", "# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
    "invest_costs <- c(initial_investment, rep(0, 19))", "", 
    "# use 'chance_event' to adjust yield for potential hail", 
    "hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
    "                                    value_if_not = yield,", 
    "                                    n = 20)", "", "# calculate profit without net", 
    "profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
    "profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
    "# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
    "NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
    "", "# calculate the overall NPV of the decision (do - don't do)", 
    "NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
    "            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
    "}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
    "                              model_function = hail_function,", 
    "                              numberOfModelRuns = 100,", 
    "                              functionSyntax = \"plainNames\")", 
    "", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
    "                                 hail_mc_simulation$y[3])", 
    "", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
    "                   first_out_var = \"NPV_decision\")", "", 
    "", "# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
    "# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
    "# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
    "# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", 
    "# daten <- data.frame(rasse=rasse, ll=ll)", "# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
    ), chunk_opts = list(label = "setup", include = FALSE)), 
    setup = NULL, chunks = list(list(label = "communicating-plot_cashflow-panels", 
        code = "\n# Plotting the cashflow:\n\n# Create the estimate object (for multiple options):\n\nvariable = c(\"revenue_option1\", \"costs_option1\", \"n_years\", \n             \"revenue_option2\", \"costs_option2\")\ndistribution = c(\"norm\", \"norm\", \"const\", \"norm\", \"norm\")\nlower = c(10000,  5000, 10, 8000,  500)\nupper = c(100000, 50000, 10, 80000,  30000)\n\ncostBenefitEstimate <- as.estimate(variable, distribution, lower, upper)\n\n# Define the model function without name for the return value:\n\nprofit1 <- function(x) {\n  \ncashflow_option1 <- vv(revenue_option1 - costs_option1, n = n_years, var_CV = 100)\ncashflow_option2 <- vv(revenue_option2 - costs_option2, n = n_years, var_CV = 100)\n\nreturn(list(Revenues_option1 = revenue_option1,\n            Revenues_option2 = revenue_option2,\n            Costs_option1 = costs_option1,\n            Costs_option2 = costs_option2,\n            Cashflow_option_one = cashflow_option1,\n            Cashflow_option_two = cashflow_option2))\n}\n\n# Perform the Monte Carlo simulation:\n\npredictionProfit1 <- mcSimulation(estimate = costBenefitEstimate,\n                                  model_function = profit1,\n                                  numberOfModelRuns = 10000,\n                                  functionSyntax = \"plainNames\")\n\nplot_cashflow(mcSimulation_object = predictionProfit1, \n              cashflow_var_name = c(\"Cashflow_option_one\", \"Cashflow_option_two\"),\n              x_axis_name = \"Years with intervention\",\n              y_axis_name = \"Annual cashflow in USD\",\n              color_25_75 = \"green4\", color_5_95 = \"green1\",\n              color_median = \"red\", \n              facet_labels = c(\"Option 1\", \"Option 2\"))\n  ", 
        opts = list(label = "\"communicating-plot_cashflow-panels\"", 
            exercise = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "communicating-plot_cashflow-panels", 
        exercise = TRUE, code = c("", "# Plotting the cashflow:", 
        "", "# Create the estimate object (for multiple options):", 
        "", "variable = c(\"revenue_option1\", \"costs_option1\", \"n_years\", ", 
        "             \"revenue_option2\", \"costs_option2\")", 
        "distribution = c(\"norm\", \"norm\", \"const\", \"norm\", \"norm\")", 
        "lower = c(10000,  5000, 10, 8000,  500)", "upper = c(100000, 50000, 10, 80000,  30000)", 
        "", "costBenefitEstimate <- as.estimate(variable, distribution, lower, upper)", 
        "", "# Define the model function without name for the return value:", 
        "", "profit1 <- function(x) {", "  ", "cashflow_option1 <- vv(revenue_option1 - costs_option1, n = n_years, var_CV = 100)", 
        "cashflow_option2 <- vv(revenue_option2 - costs_option2, n = n_years, var_CV = 100)", 
        "", "return(list(Revenues_option1 = revenue_option1,", 
        "            Revenues_option2 = revenue_option2,", "            Costs_option1 = costs_option1,", 
        "            Costs_option2 = costs_option2,", "            Cashflow_option_one = cashflow_option1,", 
        "            Cashflow_option_two = cashflow_option2))", 
        "}", "", "# Perform the Monte Carlo simulation:", "", 
        "predictionProfit1 <- mcSimulation(estimate = costBenefitEstimate,", 
        "                                  model_function = profit1,", 
        "                                  numberOfModelRuns = 10000,", 
        "                                  functionSyntax = \"plainNames\")", 
        "", "plot_cashflow(mcSimulation_object = predictionProfit1, ", 
        "              cashflow_var_name = c(\"Cashflow_option_one\", \"Cashflow_option_two\"),", 
        "              x_axis_name = \"Years with intervention\",", 
        "              y_axis_name = \"Annual cashflow in USD\",", 
        "              color_25_75 = \"green4\", color_5_95 = \"green1\",", 
        "              color_median = \"red\", ", "              facet_labels = c(\"Option 1\", \"Option 2\"))", 
        "  "), out.width.px = 624, out.height.px = 384, params.src = "communicating-plot_cashflow-panels, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-communicating-violin-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-communicating-violin-code-editor`)), session)
output$`tutorial-exercise-communicating-violin-output` <- renderUI({
  `tutorial-exercise-communicating-violin-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "communicating-violin", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "communicating-violin", code = "\nggplot(OrchardSprays, aes(y = decrease, x = treatment, fill = treatment))+\n  geom_violin() +\n  geom_boxplot(width = 0.1) +\n  theme(legend.position = \"none\")\n", 
        opts = list(label = "\"communicating-violin\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, tests = NULL, options = list(
        eval = FALSE, echo = TRUE, results = "markup", tidy = FALSE, 
        tidy.opts = NULL, collapse = FALSE, prompt = FALSE, comment = NA, 
        highlight = FALSE, size = "normalsize", background = "#F7F7F7", 
        strip.white = TRUE, cache = 0, cache.path = "Index_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "communicating-violin", exercise = TRUE, 
        code = c("", "ggplot(OrchardSprays, aes(y = decrease, x = treatment, fill = treatment))+", 
        "  geom_violin() +", "  geom_boxplot(width = 0.1) +", 
        "  theme(legend.position = \"none\")", ""), out.width.px = 624, 
        out.height.px = 384, params.src = "communicating-violin, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-communicating-ggridges-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-communicating-ggridges-code-editor`)), session)
output$`tutorial-exercise-communicating-ggridges-output` <- renderUI({
  `tutorial-exercise-communicating-ggridges-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "communicating-ggridges", global_setup = structure(c("knitr::opts_chunk$set(echo = TRUE)", 
"# library(devtools)", "# install.packages(c(\"bayesplot\", \"DiagrammeR\", \"ggcorrplot\", \"ggplot2\", \"ggrepel\", \"ggridges\", \"ggthemes\", \"igraph\", \"knitr\", \"learnr\", \"pander\", \"plyr\", \"rmarkdown\", \"tidyverse\"))", 
"# devtools::install_github(\"eikeluedeling/decisionSupport\")", 
"# library(brms)", "library(bayesplot)", "library(decisionSupport)", 
"library(DiagrammeR)", "library(ggcorrplot)", "library(ggplot2)", 
"library(ggrepel)", "library(ggridges)", "library(ggthemes)", 
"library(igraph)", "library(knitr)", "library(learnr)", "library(pander)", 
"library(plyr)", "library(rmarkdown)", "library(tidyverse)", 
"", "# load the data (use write.csv for data created in RMD)", 
"stakeholder <- read.csv(\"data/stakeholder.csv\")", "input_estimates <- read.csv(\"data/input_estimates.csv\")", 
"example_decision_inputs <- read.csv(\"data/example_decision_inputs.csv\")", 
"input_table <- read.csv(\"data/example_input_table.csv\")", 
"hail_estimates <- read.csv(\"data/hail_estimates.csv\")", "", 
"###### Chile function #######", "", "# create the model function", 
"model_function <- function(){", "  income <- Yield * Market_price", 
"  overall_costs <- Labor_cost + Management_cost", "  final_result <- income - overall_costs", 
"  return(list(final_result = final_result))", "}", "", "# Run the Monte Carlo simulation using the model function ####", 
"example_mc_simulation <- mcSimulation(estimate = as.estimate(input_estimates),", 
"                              model_function = model_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"###### make variables function #######", "# make variables", 
"make_variables <- function(est,n=1)", "{ x<-random(rho=est, n=n)", 
"    for(i in colnames(x)) assign(i,", "     as.numeric(x[1,i]),envir=.GlobalEnv)", 
"}", "", "# suppress warnings", "options(warn = - 1)", "", "###### burkina function #######", 
"# second decision function", "example_decision_function <- function(x, varnames){", 
"", "  # calculate ex-ante risks: impact the implementation of interventions ####", 
"  intervention_NonPopInvolvEvent <-", "    chance_event(intervention_NonPopInvolv, 1, 0, n = 1)", 
"", "  # pre-calculate common random draws for all intervention model runs ####", 
"", "  # profits from Tropical Livestock Units (TLU)", "  TLU <- vv(TLU_no_intervention, var_CV, n_years)", 
"  TLU_profit <- vv(profit_per_TLU, var_CV, n_years)", "", "  # benefits of fruit", 
"  precalc_intervention_fruit_benefits <-", "    vv(intervention_fruit_area_ha, var_CV, n_years) *", 
"    vv(intervention_fruit_yield_t_ha, var_CV, n_years) *", "    vv(intervention_fruit_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of vegetables", "  precalc_intervention_vegetable_benefits <-", 
"    vv(intervention_vegetable_area_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_vegetable_profit_USD_t, var_CV, n_years)", 
"", "  # benefits of rain-fed crops", "  precalc_intervention_rainfed_crop_benefits <-", 
"    vv(intervention_rainfed_crop_area_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_yield_t_ha, var_CV, n_years) *", 
"    vv(intervention_rainfed_crop_profit_USD_t, var_CV, n_years)", 
"", "  #  Intervention ####", "", "  for (decision_intervention_strips in c(FALSE,TRUE))", 
"      {", "", "  if (decision_intervention_strips)", "  {", 
"    intervention_strips <- TRUE", "    intervention_strips_PlanningCost <- TRUE", 
"    intervention_strips_cost <- TRUE", "  } else", "  {", "    intervention_strips <- FALSE", 
"    intervention_strips_PlanningCost <- FALSE", "    intervention_strips_cost <- FALSE", 
"  }", "", "  if (intervention_NonPopInvolvEvent) {", "    intervention_strips <- FALSE", 
"    intervention_strips_cost <- FALSE", "  }", "", "  # Costs ####", 
"  if (intervention_strips_cost) {", "    cost_intervention_strips <-", 
"      intervention_adaptation_cost +", "      intervention_tech_devices_cost +", 
"      intervention_nursery_cost +", "      intervention_wells_cost +", 
"      intervention_training_cost +", "      intervention_mngmt_oprt_cost +", 
"      intervention_mngmt_follow_cost +", "      intervention_mngmt_audit_cost", 
"  } else", "    cost_intervention_strips <- 0", "", "  if (intervention_strips_PlanningCost) {", 
"    plan_cost_intervention_strips <-", "      intervention_communication_cost + intervention_zoning_cost", 
"  } else", "    plan_cost_intervention_strips <- 0", "", "  maintenance_cost <- rep(0, n_years)", 
"", "  if (intervention_strips)", "    maintenance_cost <-", 
"    maintenance_cost + vv(maintenance_intervention_strips,", 
"                          var_CV, n_years)", "", "  intervention_cost <- maintenance_cost", 
"  intervention_cost[1] <-", "    intervention_cost[1] +", "    cost_intervention_strips +", 
"    plan_cost_intervention_strips", "", "", "  # Benefits from  cultivation in the intervention strips ####", 
"", "  intervention_fruit_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_fruit_benefits", 
"  intervention_vegetable_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_vegetable_benefits", 
"  intervention_rainfed_crop_benefits <-", "    as.numeric(intervention_strips) * precalc_intervention_rainfed_crop_benefits", 
"", "  # Total benefits from crop production (agricultural development and riparian zone) ####", 
"  crop_production <-", "    intervention_fruit_benefits +", 
"    intervention_vegetable_benefits +", "    intervention_rainfed_crop_benefits", 
"", "  # Benefits from livestock ####", "  # The following allows considering that intervention strips may", 
"  # restrict access to the reservoir for livestock.", "", "  if (intervention_strips)", 
"    TLU_intervention <-", "    TLU * (1 + change_TLU_intervention_perc / 100)", 
"  else", "    TLU_intervention <- TLU", "", "  if (decision_intervention_strips){", 
"    livestock_benefits <- TLU_intervention * TLU_profit", "    total_benefits <- crop_production + livestock_benefits", 
"    net_benefits <- total_benefits - intervention_cost", "    result_interv <- net_benefits}", 
"", "", "  if (!decision_intervention_strips){", "    livestock_benefits <- TLU_no_intervention * TLU_profit", 
"    total_benefits <- livestock_benefits", "    net_benefits <- total_benefits - intervention_cost", 
"    result_n_interv <- net_benefits}", "", "    } #close intervention loop bracket", 
"", "NPV_interv <-", "  discount(result_interv, discount_rate, calculate_NPV = TRUE)", 
"", "NPV_n_interv <-", "  discount(result_n_interv, discount_rate, calculate_NPV = TRUE)", 
"", "# Beware, if you do not name your outputs", "# (left-hand side of the equal sign) in the return section,", 
"# the variables will be called output_1, _2, etc.", "", "return(list(Interv_NPV = NPV_interv,", 
"            NO_Interv_NPV = NPV_n_interv,", "            NPV_decision_do = NPV_interv - NPV_n_interv,", 
"            Cashflow_decision_do = result_interv - result_n_interv))", 
"}", "###### run burkina model #######", "# second simulation", 
"mcSimulation_results <- decisionSupport::mcSimulation(", "  estimate = decisionSupport::estimate_read_csv(\"data/example_input_table.csv\"),", 
"  model_function = example_decision_function,", "  numberOfModelRuns = 100,", 
"  functionSyntax = \"plainNames\"", ")", "", "###### burkina evpi #####", 
"mcSimulation_table <- data.frame(mcSimulation_results$x, mcSimulation_results$y[1:3])", 
"", "evpi <- multi_EVPI(mc = mcSimulation_table, first_out_var = \"Interv_NPV\")", 
"###### Burkina pls ########", "pls_result <- plsr.mcSimulation(object = mcSimulation_results,", 
"                  resultName = names(mcSimulation_results$y)[3], ncomp = 1)", 
"###### HAIL Risk #######", "hail_function <- function(){", "", 
"yields <- vv(var_mean = yield,", "             var_CV = var_CV,", 
"             n = 20)", "", "prices <- vv(var_mean = price,", 
"             var_CV = var_CV,", "             n = 20)", "", 
"# use 'rep' to simulate the investment", "# only in the first year (assuming the net lasts 20 years)", 
"invest_costs <- c(initial_investment, rep(0, 19))", "", "# use 'chance_event' to adjust yield for potential hail", 
"hail_adjusted_yield <- chance_event(chance = p_hail,", "                                    value_if = 0,", 
"                                    value_if_not = yield,", 
"                                    n = 20)", "", "# calculate profit without net", 
"profit_no_net <- hail_adjusted_yield*prices", "", "# calculate profit with the net", 
"profit_with_net <- (yields*prices)-invest_costs", "", "# use 'discount' to calculate net present value", 
"# 'discount_rate' is expressed in percent", "NPV_no_net <- discount(profit_no_net, discount_rate = 5, calculate_NPV = TRUE)", 
"NPV_net <- discount(profit_with_net, discount_rate = 5, calculate_NPV = TRUE)", 
"", "# calculate the overall NPV of the decision (do - don't do)", 
"NPV_decision <- NPV_net-NPV_no_net", "", "return(list(NPV_no_net =  NPV_no_net,", 
"            NPV_net =  NPV_net,", "            NPV_decision = NPV_decision))", 
"}", "", "###### Run HAIL Risk model #######", "hail_mc_simulation <- mcSimulation(estimate = as.estimate(hail_estimates),", 
"                              model_function = hail_function,", 
"                              numberOfModelRuns = 100,", "                              functionSyntax = \"plainNames\")", 
"", "######  HAIL Risk evpi #######", "", "mcSimulation_table_hail <- data.frame(hail_mc_simulation$x,", 
"                                 hail_mc_simulation$y[3])", 
"", "evpi_hail <- multi_EVPI(mc = mcSimulation_table_hail,", 
"                   first_out_var = \"NPV_decision\")", "", "", 
"# brms stuff with Schiffers", "# library(brms, warn.conflicts=F, quietly=T)", 
"# priors <- c(set_prior(\"normal(200, 5)\", coef = \"rasseN\"), set_prior(\"normal(210, 5)\", coef = \"rasseK\"))", 
"# rasse <- c(\"K\", \"K\", \"K\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\")", 
"# ll <- c(225, 222, 221, 219, 219, 216, 221, 218, 217)", "# daten <- data.frame(rasse=rasse, ll=ll)", 
"# legeleistung <- brms::brm(formula = ll ~ rasse -1, data = daten , prior = priors, silent = 2)"
), chunk_opts = list(label = "setup", include = FALSE)), setup = NULL, 
    chunks = list(list(label = "communicating-ggridges", code = "\nggplot(OrchardSprays, \n       aes(x=decrease,y = treatment,fill = treatment)) +\n  geom_density_ridges_gradient(scale=2) + \n  theme_ridges() +\n  theme(legend.position = \"none\")\n", 
        opts = list(label = "\"communicating-ggridges\"", warning = "FALSE", 
            message = "FALSE", exercise = "TRUE"), engine = "r")), 
    code_check = NULL, error_check = NULL, check = NULL, solution = NULL, 
    tests = NULL, options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "Index_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "Index_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = FALSE, error = FALSE, 
        message = FALSE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "communicating-ggridges", exercise = TRUE, 
        code = c("", "ggplot(OrchardSprays, ", "       aes(x=decrease,y = treatment,fill = treatment)) +", 
        "  geom_density_ridges_gradient(scale=2) + ", "  theme_ridges() +", 
        "  theme(legend.position = \"none\")", ""), out.width.px = 624, 
        out.height.px = 384, params.src = "communicating-ggridges, warning=FALSE, message=FALSE, exercise=TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
</p>
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["header-attrs"]},{"type":"character","attributes":{},"value":["2.26"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pandoc"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["header-attrs.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.26"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/cerulean.min.css"]},{"type":"character","attributes":{},"value":["<style>h1 {font-size: 34px;}\n       h1.title {font-size: 38px;}\n       h2 {font-size: 30px;}\n       h3 {font-size: 24px;}\n       h4 {font-size: 18px;}\n       h5 {font-size: 16px;}\n       h6 {font-size: 12px;}\n       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}\n       pre:not([class]) { background-color: white }<\/style>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.26"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["pagedtable"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pagedtable-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/pagedtable.js"]},{"type":"character","attributes":{},"value":["css/pagedtable.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.26"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["textmate.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.26"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.11.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["i18n"]},{"type":"character","attributes":{},"value":["21.6.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/i18n"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["i18next.min.js","tutorial-i18n-init.js"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["<script id=\"i18n-cstm-trns\" type=\"application/json\">{\"language\":\"en\",\"resources\":{\"en\":{\"translation\":{\"button\":{\"runcode\":\"Run Code\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Hint\",\"hint_plural\":\"Hints\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Next Hint\",\"hintprev\":\"Previous Hint\",\"solution\":\"Solution\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copy to Clipboard\",\"startover\":\"Start Over\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continue\",\"submitanswer\":\"Submit Answer\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Previous Topic\",\"nexttopic\":\"Next Topic\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Try Again\"},\"text\":{\"startover\":\"Start Over\",\"areyousure\":\"Are you sure you want to start over? (all exercise progress will be reset)\",\"youmustcomplete\":\"You must complete the\",\"exercise\":\"exercise\",\"exercise_plural\":\"exercises\",\"inthissection\":\"in this section before continuing.\",\"code\":\"Code\",\"enginecap\":\"{{engine}} $t(text.code)\",\"quiz\":\"Quiz\",\"blank\":\"blank\",\"blank_plural\":\"blanks\",\"exercisecontainsblank\":\"This exercise contains {{count}} $t(text.blank).\",\"pleasereplaceblank\":\"Please replace {{blank}} with valid code.\",\"unparsable\":\"It looks like this might not be valid R code. R cannot determine how to turn your text into a complete command. You may have forgotten to fill in a blank, to remove an underscore, to include a comma between arguments, or to close an opening <code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code> or <code>{<\\/code> with a matching <code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code> or <code>}<\\/code>.\\n\",\"unparsablequotes\":\"<p>It looks like your R code contains specially formatted quotation marks or &quot;curly&quot; quotes (<code>{{character}}<\\/code>) around character strings, making your code invalid. R requires character values to be contained in straight quotation marks (<code>&quot;<\\/code> or <code>'<\\/code>).<\\/p> {{code}} <p>Don't worry, this is a common source of errors when you copy code from another app that applies its own formatting to text. You can try replacing the code on that line with the following. There may be other places that need to be fixed, too.<\\/p> {{suggestion}}\\n\",\"unparsableunicode\":\"<p>It looks like your R code contains an unexpected special character (<code>{{character}}<\\/code>) that makes your code invalid.<\\/p> {{code}} <p>Sometimes your code may contain a special character that looks like a regular character, especially if you copy and paste the code from another app. Try deleting the special character from your code and retyping it manually.<\\/p>\\n\",\"unparsableunicodesuggestion\":\"<p>It looks like your R code contains an unexpected special character (<code>{{character}}<\\/code>) that makes your code invalid.<\\/p> {{code}} <p>Sometimes your code may contain a special character that looks like a regular character, especially if you copy and paste the code from another app. You can try replacing the code on that line with the following. There may be other places that need to be fixed, too.<\\/p> {{suggestion}}\\n\",\"and\":\"and\",\"or\":\"or\",\"listcomma\":\", \",\"oxfordcomma\":\",\"}}},\"fr\":{\"translation\":{\"button\":{\"runcode\":\"Lancer le Code\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Indication\",\"hint_plural\":\"Indications\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Indication Suivante\",\"hintprev\":\"Indication Précédente\",\"solution\":\"Solution\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copier dans le Presse-papier\",\"startover\":\"Recommencer\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continuer\",\"submitanswer\":\"Soumettre\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Chapitre Précédent\",\"nexttopic\":\"Chapitre Suivant\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Réessayer\"},\"text\":{\"startover\":\"Recommencer\",\"areyousure\":\"Êtes-vous certains de vouloir recommencer? (La progression sera remise à zéro)\",\"youmustcomplete\":\"Vous devez d'abord compléter\",\"exercise\":\"l'exercice\",\"exercise_plural\":\"des exercices\",\"inthissection\":\"de cette section avec de continuer.\",\"code\":\"Code\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\",\"and\":\"et\",\"or\":\"ou\",\"oxfordcomma\":\"\"}}},\"es\":{\"translation\":{\"button\":{\"runcode\":\"Ejecutar código\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Pista\",\"hint_plural\":\"Pistas\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Siguiente pista\",\"hintprev\":\"Pista anterior\",\"solution\":\"Solución\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copiar al portapapeles\",\"startover\":\"Reiniciar\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continuar\",\"submitanswer\":\"Enviar respuesta\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Tema anterior\",\"nexttopic\":\"Tema siguiente\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Volver a intentar\"},\"text\":{\"startover\":\"Reiniciar\",\"areyousure\":\"¿De verdad quieres empezar de nuevo? (todo el progreso del ejercicio se perderá)\",\"youmustcomplete\":\"Debes completar\",\"exercise\":\"el ejercicio\",\"exercise_plural\":\"los ejercicios\",\"inthissection\":\"en esta sección antes de continuar.\",\"code\":\"Código\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Cuestionario\",\"and\":\"y\",\"or\":\"o\",\"oxfordcomma\":\"\"}}},\"pt\":{\"translation\":{\"button\":{\"runcode\":\"Executar código\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Dica\",\"hint_plural\":\"Dicas\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Próxima dica\",\"hintprev\":\"Dica anterior\",\"solution\":\"Solução\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copiar para a área de transferência\",\"startover\":\"Reiniciar\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continuar\",\"submitanswer\":\"Enviar resposta\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Tópico anterior\",\"nexttopic\":\"Próximo tópico\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Tentar novamente\"},\"text\":{\"startover\":\"Reiniciar\",\"areyousure\":\"Tem certeza que deseja começar novamente? (todo o progresso feito será perdido)\",\"youmustcomplete\":\"Você deve completar\",\"exercise\":\"o exercício\",\"exercise_plural\":\"os exercícios\",\"inthissection\":\"nesta seção antes de continuar.\",\"code\":\"Código\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\",\"and\":\"e\",\"or\":\"ou\",\"oxfordcomma\":\"\"}}},\"tr\":{\"translation\":{\"button\":{\"runcode\":\"Çalıştırma Kodu\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Ipucu\",\"hint_plural\":\"İpuçları\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Sonraki İpucu\",\"hintprev\":\"Önceki İpucu\",\"solution\":\"Çözüm\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Pano'ya Kopyala\",\"startover\":\"Baştan Başlamak\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Devam et\",\"submitanswer\":\"Cevabı onayla\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Önceki Konu\",\"nexttopic\":\"Sonraki Konu\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Tekrar Deneyin\"},\"text\":{\"startover\":\"Baştan Başlamak\",\"areyousure\":\"Baştan başlamak istediğinizden emin misiniz? (tüm egzersiz ilerlemesi kaybolacak)\",\"youmustcomplete\":\"Tamamlamalısın\",\"exercise\":\"egzersiz\",\"exercise_plural\":\"egzersizler\",\"inthissection\":\"devam etmeden önce bu bölümde\",\"code\":\"Kod\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Sınav\",\"oxfordcomma\":\"\"}}},\"emo\":{\"translation\":{\"button\":{\"runcode\":\"🏃\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"💡\",\"hint_plural\":\"$t(button.hint)\",\"hinttitle\":\"$t(button.hint)\",\"solution\":\"🎯\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"📋\",\"startover\":\"⏮\",\"startovertitle\":\"Start Over\",\"continue\":\"✅\",\"submitanswer\":\"🆗\",\"submitanswertitle\":\"Submit Answer\",\"previoustopic\":\"⬅\",\"nexttopic\":\"➡\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"🔁\"},\"text\":{\"startover\":\"⏮\",\"areyousure\":\"🤔\",\"youmustcomplete\":\"⚠️ 👉 🧑‍💻\",\"exercise\":\"\",\"exercise_plural\":\"\",\"inthissection\":\"\",\"code\":\"💻\",\"enginecap\":\"$t(text.code) {{engine}}\",\"oxfordcomma\":\"\"}}},\"eu\":{\"translation\":{\"button\":{\"runcode\":\"Kodea egikaritu\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Laguntza\",\"hint_plural\":\"Laguntza\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Aurreko laguntza\",\"hintprev\":\"Hurrengo laguntza\",\"solution\":\"Ebazpena\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Arbelean kopiatu\",\"startover\":\"Berrabiarazi\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Jarraitu\",\"submitanswer\":\"Erantzuna bidali\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Aurreko atala\",\"nexttopic\":\"Hurrengo atala\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Berriro saiatu\"},\"text\":{\"startover\":\"Berrabiarazi\",\"areyousure\":\"Berriro hasi nahi duzu? (egindako lana galdu egingo da)\",\"youmustcomplete\":\"Aurrera egin baino lehen atal honetako\",\"exercise\":\"ariketa egin behar duzu.\",\"exercise_plural\":\"ariketak egin behar dituzu.\",\"inthissection\":\"\",\"code\":\"Kodea\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Galdetegia\",\"oxfordcomma\":\"\"}}},\"de\":{\"translation\":{\"button\":{\"runcode\":\"Code ausführen\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Tipp\",\"hint_plural\":\"Tipps\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Nächster Tipp\",\"hintprev\":\"Vorheriger Tipp\",\"solution\":\"Lösung\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"In die Zwischenablage kopieren\",\"startover\":\"Neustart\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Weiter\",\"submitanswer\":\"Antwort einreichen\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Vorheriges Kapitel\",\"nexttopic\":\"Nächstes Kapitel\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Nochmal versuchen\"},\"text\":{\"startover\":\"Neustart\",\"areyousure\":\"Bist du sicher, dass du neustarten willst? (der gesamte Lernfortschritt wird gelöscht)\",\"youmustcomplete\":\"Vervollstädinge\",\"exercise\":\"die Übung\",\"exercise_plural\":\"die Übungen\",\"inthissection\":\"in diesem Kapitel, bevor du fortfährst.\",\"code\":\"Code\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\",\"blank\":\"Lücke\",\"blank_plural\":\"Lücken\",\"pleasereplaceblank\":\"Bitte ersetze {{blank}} mit gültigem Code.\",\"unparsable\":\"Dies scheint kein gültiger R Code zu sein. R kann deinen Text nicht in einen gültigen Befehl übersetzen. Du hast vielleicht vergessen, die Lücke zu füllen, einen Unterstrich zu entfernen, ein Komma zwischen Argumente zu setzen oder ein eröffnendes <code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code> oder <code>{<\\/code> mit einem zugehörigen <code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code> oder <code>}<\\/code> zu schließen.\\n\",\"and\":\"und\",\"or\":\"oder\",\"listcomma\":\", \",\"oxfordcomma\":\",\"}}},\"ko\":{\"translation\":{\"button\":{\"runcode\":\"코드 실행\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"힌트\",\"hint_plural\":\"힌트들\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"다음 힌트\",\"hintprev\":\"이전 힌트\",\"solution\":\"솔루션\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"클립보드에 복사\",\"startover\":\"재학습\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"다음 학습으로\",\"submitanswer\":\"정답 제출\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"이전 토픽\",\"nexttopic\":\"다음 토픽\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"재시도\"},\"text\":{\"startover\":\"재학습\",\"areyousure\":\"다시 시작 하시겠습니까? (모든 예제의 진행 정보가 재설정됩니다)\",\"youmustcomplete\":\"당신은 완료해야 합니다\",\"exercise\":\"연습문제\",\"exercise_plural\":\"연습문제들\",\"inthissection\":\"이 섹션을 실행하기 전에\",\"code\":\"코드\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"퀴즈\",\"blank\":\"공백\",\"blank_plural\":\"공백들\",\"exercisecontainsblank\":\"이 연습문제에는 {{count}}개의 $t(text.blank)이 포함되어 있습니다.\",\"pleasereplaceblank\":\"{{blank}}를 유효한 코드로 바꾸십시오.\",\"unparsable\":\"이것은 유효한 R 코드가 아닐 수 있습니다. R은 텍스트를 완전한 명령으로 변환하는 방법을 결정할 수 없습니다. 당신은 공백이나 밑줄을 대체하여 채우기, 인수를 컴마로 구분하기, 또는 <code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code> , <code>{<\\/code>로 시작하는 구문을 닫는 <code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code>, <code>}<\\/code>을 잊었을 수도 있습니다.\\n\",\"and\":\"그리고\",\"or\":\"혹은\",\"listcomma\":\", \",\"oxfordcomma\":\"\"}}},\"zh\":{\"translation\":{\"button\":{\"runcode\":\"运行代码\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"提示\",\"hint_plural\":\"提示\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"下一个提示\",\"hintprev\":\"上一个提示\",\"solution\":\"答案\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"复制到剪切板\",\"startover\":\"重新开始\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"继续\",\"submitanswer\":\"提交答案\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"上一专题\",\"nexttopic\":\"下一专题\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"再试一次\"},\"text\":{\"startover\":\"重置\",\"areyousure\":\"你确定要重新开始吗? (所有当前进度将被重置)\",\"youmustcomplete\":\"你必须完成\",\"exercise\":\"练习\",\"exercise_plural\":\"练习\",\"inthissection\":\"在进行本节之前\",\"code\":\"代码\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"测试\",\"blank\":\"空\",\"blank_plural\":\"空\",\"exercisecontainsblank\":\"本练习包含{{count}}个$t(text.blank)\",\"pleasereplaceblank\":\"请在{{blank}}内填写恰当的代码\",\"unparsable\":\"这似乎不是有效的R代码。 R不知道如何将您的文本转换为完整的命令。 您是否忘了填空，忘了删除下划线，忘了在参数之间包含逗号，或者是忘了用<code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code>,<code>}<\\/code>来封闭<code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code>。 or <code>{<\\/code>。\\n\",\"unparsablequotes\":\"<p>您的R代码中似乎含有特殊格式的引号，或者弯引号(<code>{{character}}<\\/code>) 在字符串前后，在R中字符串应该被直引号(<code>&quot;<\\/code> 或者 <code>'<\\/code>)包裹。<\\/p> {{code}} <p>别担心，该错误经常在复制粘贴包含格式的代码时遇到， 您可以尝试将该行中的代码替换为以下代码，也许还有其他地方需要修改。<\\/p> {{suggestion}}\\n\",\"unparsableunicode\":\"<p>您的代码中似乎包含有异常字符(<code>{{character}}<\\/code>),导致代码无效。<\\/p> {{code}} <p>有时候你的代码可能含有看似正常字符的特殊字符，特别是当你复制粘贴其他来源代码的时候。 请试着删除这些特殊字符,重新输入<\\/p>\\n\",\"unparsableunicodesuggestion\":\"<p>您的代码中似乎包含有异常字符(<code>{{character}}<\\/code>),导致代码无效。<\\/p> {{code}} <p>有时候你的代码可能含有看似正常字符的特殊字符，特别是当你复制粘贴其他来源代码的时候。 请试着删除这些特殊字符,重新输入<\\/p>\\n\",\"and\":\"且\",\"or\":\"或\",\"listcomma\":\",\",\"oxfordcomma\":\",\"}}},\"pl\":{\"translation\":{\"button\":{\"runcode\":\"Uruchom kod\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Podpowiedź\",\"hint_plural\":\"Podpowiedzi\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Następna podpowiedź\",\"hintprev\":\"Poprzednia podpowiedź\",\"solution\":\"Rozwiązanie\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Kopiuj do schowka\",\"startover\":\"Zacznij od początku\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Kontynuuj\",\"submitanswer\":\"Wyślij\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Poprzednia sekcja\",\"nexttopic\":\"Następna sekcja\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Spróbuj ponownie\"},\"text\":{\"startover\":\"Zacznij od początku\",\"areyousure\":\"Czy na pewno chcesz zacząć od początku? (cały postęp w zadaniu zostanie utracony)\",\"youmustcomplete\":\"Musisz ukończyć\",\"exercise\":\"ćwiczenie\",\"exercise_plural\":\"ćwiczenia\",\"inthissection\":\"w tej sekcji przed kontynuowaniem\",\"code\":\"Kod\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\",\"blank\":\"luka\",\"blank_plural\":\"luk(i)\",\"exercisecontainsblank\":\"To ćwiczenie zawiera {{count}} $t(text.blank).\",\"pleasereplaceblank\":\"Proszę uzupełnić {{blank}} prawidłowym kodem.\",\"unparsable\":\"Wygląda na to, że może to nie być prawidłowy kod R. R nie jest w stanie przetworzyć Twojego tekstu na polecenie. Mogłeś(-aś) zapomnieć wypełnić luki, usunąć podkreślnik, umieścić przecinka między argumentami, lub zamknąć znak <code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code> lub <code>{<\\/code> odpowiadającym <code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code> lub <code>}<\\/code>.\\n\",\"unparsablequotes\":\"<p>Wygląda na to, że Twój kod zawiera szczególnie sformatowane cudzysłowy lub cudzysłowy typograficzne (<code>{{character}}<\\/code>) przy ciągach znaków, co sprawia, że kod jest niepoprawny. R wymaga cudzysłowów prostych (<code>&quot;<\\/code> albo <code>'<\\/code>).<\\/p> {{code}} <p>Nie martw się, to powszechne źródło błędów, gdy kopiuje się kod z innego programu, który sam formatuje teskt. Możesz spróbować zastąpić swój kod następującym kodem. Mogą być też inne miejsca, które wymagają poprawienia.<\\/p> {{suggestion}}\\n\",\"unparsableunicode\":\"<p>Wygląda na to, że Twój kod zawiera niespodziewany znak specjalny (<code>{{character}}<\\/code>), co sprawia, że kod jest niepoprawny.<\\/p> {{code}} <p>Czasami Twój kod może zawierać znak specjalny, który wygląda jak zwykły znak, zwłaszcza jeśli kopiujesz kod z innego programu. Spróbuj usunąć znak specjalny i wpisać do ponownie ręcznie.<\\/p>\\n\",\"unparsableunicodesuggestion\":\"<p>Wygląda na to, że Twój kod zawiera niespodziewany znak specjalny (<code>{{character}}<\\/code>), co sprawia, że kod jest niepoprawny.<\\/p> {{code}} <p>Czasami Twój kod może zawierać znak specjalny, który wygląda jak zwykły znak, zwłaszcza jeśli kopiujesz kod z innego programu. Możesz spróbować zastąpić swój kod następującym kodem. Mogą być też inne miejsca, które wymagają poprawienia.<\\/p> {{suggestion}}\\n\",\"and\":\"i\",\"or\":\"lub\",\"listcomma\":\", \",\"oxfordcomma\":\"\"}}}}}<\/script>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-format"]},{"type":"character","attributes":{},"value":["0.11.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmarkdown/templates/tutorial/resources"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-format.js"]},{"type":"character","attributes":{},"value":["tutorial-format.css","rstudio-theme.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["navigation"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/navigation-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tabsets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.26"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["default.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.26"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["6.4.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.min.css","css/v4-shims.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fontawesome"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootbox"]},{"type":"character","attributes":{},"value":["5.5.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/bootbox"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["bootbox.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["idb-keyvalue"]},{"type":"character","attributes":{},"value":["3.2.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/idb-keyval"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["idb-keyval-iife-compat.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.11.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132]}},"value":[{"type":"character","attributes":{},"value":["abind","assertthat","backports","base","bayesplot","bitops","boot","broom","bslib","cachem","car","carData","cellranger","checkmate","chillR","class","cli","colorspace","commonmark","compiler","crayon","data.table","datasets","decisionSupport","DiagrammeR","digest","dotCall64","dplyr","ecmwfr","eha","ellipsis","evaluate","expm","fANCOVA","fansi","fastmap","fields","fontawesome","forcats","generics","GenSA","ggcorrplot","ggplot2","ggpubr","ggrepel","ggridges","ggsignif","ggthemes","glue","graphics","grDevices","grid","gtable","hms","htmltools","htmlwidgets","httpuv","httr","igraph","jquerylib","jsonlite","Kendall","knitr","later","lattice","learnr","lifecycle","lubridate","magrittr","maps","markdown","Matrix","mc2d","memoise","methods","metR","mime","msm","munsell","mvtnorm","nleqslv","pander","patchwork","pillar","pkgconfig","pls","plyr","prettyunits","progress","promises","purrr","R.methodsS3","R.oo","R.utils","R6","RColorBrewer","Rcpp","RCurl","readr","readxl","rlang","rmarkdown","rprojroot","rriskDistributions","rstatix","rstudioapi","sass","scales","shiny","spam","splines","stats","stringi","stringr","survival","tibble","tidyr","tidyselect","tidyverse","timechange","tools","tzdb","utf8","utils","vctrs","viridisLite","visNetwork","withr","xfun","XML","xtable","yaml"]},{"type":"character","attributes":{},"value":["1.4-5","0.2.1","1.4.1","4.4.0","1.11.1","1.0-7","1.3-30","1.0.5","0.7.0","1.1.0","3.1-2","3.0-5","1.1.0","2.3.1","0.75","7.3-22","3.6.2","2.1-0","1.9.1","4.4.0","1.5.2","1.15.4","4.4.0","1.114","1.0.11","0.6.35","1.1-1","1.1.4","1.5.0","2.11.4","0.3.2","0.23","0.999-9","0.6-1","1.0.6","1.2.0","15.2","0.5.2","1.0.0","0.1.3","1.1.14","0.1.4.1","3.5.1","0.6.0","0.9.5","0.5.6","0.6.4","5.1.0","1.7.0","4.4.0","4.4.0","4.4.0","0.3.5","1.1.3","0.5.8.1","1.6.4","1.6.15","1.4.7","2.0.3","0.1.4","1.8.8","2.2.1","1.46","1.3.2","0.22-6","0.11.5","1.0.4","1.9.3","2.0.3","3.4.2","1.12","1.7-0","0.2.0","2.0.1","4.4.0","0.15.0","0.12","1.7.1","0.5.1","1.2-4","3.3.5","0.6.5","1.2.0","1.9.0","2.0.3","2.8-3","1.8.9","1.2.0","1.2.3","1.3.0","1.0.2","1.8.2","1.26.0","2.12.3","2.5.1","1.1-3","1.0.12","1.98-1.14","2.1.5","1.4.3","1.1.3","2.26","2.0.4","2.1.2","0.7.2","0.16.0","0.4.9","1.3.0","1.8.1.1","2.10-0","4.4.0","4.4.0","1.8.4","1.5.1","3.5-8","3.2.1","1.3.1","1.2.1","2.0.0","0.3.0","4.4.0","0.4.0","1.2.4","4.4.0","0.6.5","0.4.2","2.1.2","3.0.0","0.44","3.99-0.16.1","1.8-4","2.3.8"]}]}]}
</script>
<!--/html_preserve-->
<div id="section-refs" class="references csl-bib-body hanging-indent"
entry-spacing="0">
<div id="section-ref-R-rmarkdown" class="csl-entry">
Allaire, JJ, Yihui Xie, Christophe Dervieux, Jonathan McPherson, Javier
Luraschi, Kevin Ushey, Aron Atkins, et al. 2024. <em>Rmarkdown: Dynamic
Documents for r</em>. <a
href="https://github.com/rstudio/rmarkdown">https://github.com/rstudio/rmarkdown</a>.
</div>
<div id="section-ref-bertsch_mcgrayne_theory_2011" class="csl-entry">
Bertsch McGrayne, Sharon. 2011. <em>The Theory That Would Not Die: How
<span>Bayes</span>’ Rule Cracked the Enigma Code, Hunted down
<span>Russian</span> Submarines, &amp; Emerged Triumphant from Two
Centuries of Controversy</em>. Yale University Press.
</div>
<div id="section-ref-do_decision_2020" class="csl-entry">
Do, Hoa, Eike Luedeling, and Cory Whitney. 2020. <span>“Decision
Analysis of Agroforestry Options Reveals Adoption Risks for
Resource-Poor Farmers.”</span> <em>Agronomy for Sustainable
Development</em> 40 (3): 20. <a
href="https://doi.org/10.1007/s13593-020-00624-5">https://doi.org/10.1007/s13593-020-00624-5</a>.
</div>
<div id="section-ref-fernandez_data_2021" class="csl-entry">
Fernandez, Eduardo, Gonzalo Rojas, Cory Whitney, Italo F Cuneo, and Eike
Luedeling. 2021. <span>“Data and Scripts: <span>Adapting</span> Sweet
Cherry Orchards to Extreme Weather Events – <span>Decision</span>
<span>Analysis</span> in Support of Farmers’ Investments in
<span>Central</span> <span>Chile</span>.”</span>
</div>
<div id="section-ref-fernandez_applying_2021" class="csl-entry">
Fernandez, Eduardo, Cory Whitney, and Eike Luedeling. 2021.
<span>“Applying the <span class="nocase">mcSimulation</span> Function in
<span class="nocase">decisionSupport</span>.”</span> <a
href="https://cran.r-project.org/web/packages/decisionSupport/vignettes/example_decision_function.html">https://cran.r-project.org/web/packages/decisionSupport/vignettes/example_decision_function.html</a>.
</div>
<div id="section-ref-R-bayesplot" class="csl-entry">
Gabry, Jonah, and Tristan Mahr. 2024. <em>Bayesplot: Plotting for
Bayesian Models</em>. <a
href="https://mc-stan.org/bayesplot/">https://mc-stan.org/bayesplot/</a>.
</div>
<div id="section-ref-galindo-prieto_variable_2014" class="csl-entry">
Galindo-Prieto, Beatriz, Lennart Eriksson, and Johan Trygg. 2014.
<span>“Variable Influence on Projection (<span>VIP</span>) for
Orthogonal Projections to Latent Structures (<span>OPLS</span>):
<span>Variable</span> Influence on Projection for
<span>OPLS</span>.”</span> <em>Journal of Chemometrics</em> 28 (8):
623–32. <a
href="https://doi.org/10.1002/cem.2627">https://doi.org/10.1002/cem.2627</a>.
</div>
<div id="section-ref-howard_foundations_2015" class="csl-entry">
Howard, Ronald A., and Ali E. Abbas. 2015. <em>Foundations of
<span>Decision</span> <span>Analysis</span></em>. NY, NY: Prentice Hall.
</div>
<div id="section-ref-hubbard_how_2014" class="csl-entry">
Hubbard, Douglas W. 2014. <em>How <span>To</span> <span>Measure</span>
<span>Anything</span>: <span>Finding</span> the <span>Value</span> of
<span>Intangibles</span> in <span>Business</span></em>. 2nd ed. Vol.
Second Edition. Hoboken, New Jersey: John Wiley &amp; Sons.
</div>
<div id="section-ref-kahneman_thinking_2011" class="csl-entry">
Kahneman, Daniel, and Patrick Egan. 2011. <em>Thinking, Fast and
Slow</em>. Vol. 1. New York: Farrar, Straus; Giroux.
</div>
<div id="section-ref-lanzanova_improving_2019" class="csl-entry">
Lanzanova, Denis, Cory Whitney, Keith Shepherd, and Eike Luedeling.
2019. <span>“Improving Development Efficiency Through Decision Analysis:
<span>Reservoir</span> Protection in <span>Burkina</span>
<span>Faso</span>.”</span> <em>Environmental Modelling &amp;
Software</em> 115 (May): 164–75. <a
href="https://doi.org/10.1016/j.envsoft.2019.01.016">https://doi.org/10.1016/j.envsoft.2019.01.016</a>.
</div>
<div id="section-ref-R-decisionSupport" class="csl-entry">
Luedeling, Eike, Lutz Goehring, Katja Schiffers, Cory Whitney, and
Eduardo Fernandez. 2024. <em>decisionSupport: Quantitative Support of
Decision Making Under Uncertainty</em>. <a
href="http://www.worldagroforestry.org/">http://www.worldagroforestry.org/</a>.
</div>
<div id="section-ref-luedeling_water_2014" class="csl-entry">
Luedeling, Eike, and JDe Leeuw. 2014. <span>“Water for
<span>Wajir</span>.”</span> <em>Worldagroforestry.org</em>.
</div>
<div id="section-ref-luedeling_fresh_2015" class="csl-entry">
Luedeling, Eike, Arjen L. Oord, Boniface Kiteme, Sarah Ogalleh, Maimbo
Malesu, Keith D. Shepherd, and Jan De Leeuw. 2015. <span>“Fresh
Groundwater for <span>Wajir</span> - Ex-Ante Assessment of Uncertain
Benefits for Multiple Stakeholders in a Water Supply Project in
<span>Northern</span> <span>Kenya</span>.”</span> <em>Frontiers in
Environmental Science</em> 3, article 16: 1–18. <a
href="https://doi.org/10.3389/fenvs.2015.00016">https://doi.org/10.3389/fenvs.2015.00016</a>.
</div>
<div id="section-ref-luedeling_decision-focused_2016" class="csl-entry">
Luedeling, Eike, and Keith Shepherd. 2016.
<span>“Decision-<span>Focused</span> <span>Agricultural</span>
<span>Research</span>.”</span> <em>Solutions</em> 7 (5): 46–54.
https://doi.org/<a
href="https://www.thesolutionsjournal.com/article/decision-focused-agricultural-research/">https://www.thesolutionsjournal.com/article/decision-focused-agricultural-research/</a>.
</div>
<div id="section-ref-R-base" class="csl-entry">
R Core Team. 2024. <em>R: A Language and Environment for Statistical
Computing</em>. Vienna, Austria: R Foundation for Statistical Computing.
<a href="https://www.R-project.org/">https://www.R-project.org/</a>.
</div>
<div id="section-ref-robinson_out_2017" class="csl-entry">
Robinson, Ken. 2017. <em>Out of Our Minds: <span>Learning</span> to Be
Creative</em>. Oxford, United Kingdom: John Wiley &amp; Sons.
</div>
<div id="section-ref-rojas_adapting_2021" class="csl-entry">
Rojas, Gonzalo, Eduardo Fernandez, Cory Whitney, Eike Luedeling, and
Italo F. Cuneo. 2021. <span>“Adapting Sweet Cherry Orchards to Extreme
Weather Events – <span>Decision</span> <span>Analysis</span> in Support
of Farmers’ Investments in <span>Central</span>
<span>Chile</span>.”</span> <em>Agricultural Systems</em> 187
(February): 103031. <a
href="https://doi.org/10.1016/j.agsy.2020.103031">https://doi.org/10.1016/j.agsy.2020.103031</a>.
</div>
<div id="section-ref-ruett_model-based_2020" class="csl-entry">
Ruett, Marius, Cory Whitney, and Eike Luedeling. 2020.
<span>“Model-Based Evaluation of Management Options in Ornamental Plant
Nurseries.”</span> <em>Journal of Cleaner Production</em> 271 (June):
122653. <a
href="https://doi.org/10.1016/j.jclepro.2020.122653">https://doi.org/10.1016/j.jclepro.2020.122653</a>.
</div>
<div id="section-ref-savage_flaw_2009" class="csl-entry">
Savage, Sam L., and Harry M. Markowitz. 2009. <em>The Flaw of Averages:
<span>Why</span> We Underestimate Risk in the Face of Uncertainty</em>.
John Wiley &amp; Sons.
</div>
<div id="section-ref-shepherd_development_2015" class="csl-entry">
Shepherd, Keith, Douglas Hubbard, Norman Fenton, Karl Claxton, Eike
Luedeling, and Jan de Leeuw. 2015. <span>“Development Goals Should
Enable Decision-Making.”</span> <em>Nature</em> 523 (7559): 152–54.
</div>
<div id="section-ref-tetlock_superforecasting_2015" class="csl-entry">
Tetlock, Philip E., and Dan Gardner. 2015. <em>Superforecasting:
<span>The</span> <span>Art</span> and <span>Science</span> of
<span>Prediction</span></em>. New York, NY: Crown Publishers.
</div>
<div id="section-ref-whitehead_principia_2011" class="csl-entry">
Whitehead, Alfred North, and Bertrand Russell. 2011. <em>Principia
Mathematica</em>. San Bernardio, CA: Rough Draft Printing.
</div>
<div id="section-ref-whitney_probabilistic_2018-1" class="csl-entry">
Whitney, Cory, Denis Lanzanova, Caroline Muchiri, Keith D. Shepherd,
Todd S. Rosenstock, Michael Krawinkel, John R. S. Tabuti, and Eike
Luedeling. 2018. <span>“Probabilistic Decision Tools for Determining
Impacts of Agricultural Development Policy on Household
Nutrition.”</span> <em>Earth’s Future</em> 6 (3): 359–72. <a
href="https://doi.org/10.1002/2017EF000765">https://doi.org/10.1002/2017EF000765</a>.
</div>
<div id="section-ref-R-tidyverse" class="csl-entry">
Wickham, Hadley. 2023. <em>Tidyverse: Easily Install and Load the
Tidyverse</em>. <a
href="https://tidyverse.tidyverse.org">https://tidyverse.tidyverse.org</a>.
</div>
<div id="section-ref-R-ggplot2" class="csl-entry">
Wickham, Hadley, Winston Chang, Lionel Henry, Thomas Lin Pedersen,
Kohske Takahashi, Claus Wilke, Kara Woo, Hiroaki Yutani, Dewey
Dunnington, and Teun van den Brand. 2024. <em>Ggplot2: Create Elegant
Data Visualisations Using the Grammar of Graphics</em>. <a
href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>.
</div>
<div id="section-ref-R-ggridges" class="csl-entry">
Wilke, Claus O. 2024. <em>Ggridges: Ridgeline Plots in Ggplot2</em>. <a
href="https://wilkelab.org/ggridges/">https://wilkelab.org/ggridges/</a>.
</div>
<div id="section-ref-wold_pls-regression_2001" class="csl-entry">
Wold, Svante, Michael Sjöström, and Lennart Eriksson. 2001.
<span>“<span>PLS</span>-Regression: A Basic Tool of
Chemometrics.”</span> <em>Chemometrics and Intelligent Laboratory
Systems</em>, <span>PLS</span> <span>Methods</span>, 58 (2): 109–30. <a
href="https://doi.org/10.1016/S0169-7439(01)00155-1">https://doi.org/10.1016/S0169-7439(01)00155-1</a>.
</div>
</div>
</div>

</article> <!-- topics -->

<div class="topicsContainer">
<div class="topicsPositioner">
<div class="band">
<div class="bandContent topicsListContainer">

<!-- begin doc-metadata -->
<div id="doc-metadata">
<h1 class="title toc-ignore" style="display:none;">Decision Analysis and
Forecasting for Agricultural Development <img
src="images/decisionSupport_hex_sticker.png" style="width:1in" /></h1>
<h4 class="author"><em>Cory Whitney, Eike Luedeling et al.</em></h4>
</div>
<!-- end doc-metadata -->

</div> <!-- bandContent.topicsListContainer -->
</div> <!-- band -->
</div> <!-- topicsPositioner -->
</div> <!-- topicsContainer -->


</main> <!-- bandContent page -->
</div> <!-- pageContent band -->



<!-- Build Tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<script>
// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>


</body>

</html>
